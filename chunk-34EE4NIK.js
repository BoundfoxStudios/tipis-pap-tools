import{M as Aa}from"./chunk-BTA754KE.js";import{a as j,b as Ee,c as Hi,f as Jr}from"./chunk-CWTPBX7D.js";var Fe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ke=Object.keys,tt=Array.isArray;typeof Promise<"u"&&!Fe.Promise&&(Fe.Promise=Promise);function at(t,e){return typeof e!="object"||Ke(e).forEach(function(n){t[n]=e[n]}),t}var ir=Object.getPrototypeOf,Lu={}.hasOwnProperty;function yt(t,e){return Lu.call(t,e)}function Fn(t,e){typeof e=="function"&&(e=e(ir(t))),(typeof Reflect>"u"?Ke:Reflect.ownKeys)(e).forEach(n=>{Yt(t,n,e[n])})}var Ka=Object.defineProperty;function Yt(t,e,n,r){Ka(t,e,at(n&&yt(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Ln(t){return{from:function(e){return t.prototype=Object.create(e.prototype),Yt(t.prototype,"constructor",t),{extend:Fn.bind(null,t.prototype)}}}}var Ru=Object.getOwnPropertyDescriptor;function xs(t,e){let n=Ru(t,e),r;return n||(r=ir(t))&&xs(r,e)}var Pu=[].slice;function wi(t,e,n){return Pu.call(t,e,n)}function ja(t,e){return e(t)}function Xn(t){if(!t)throw new Error("Assertion Failed")}function $a(t){Fe.setImmediate?setImmediate(t):setTimeout(t,0)}function Ha(t,e){return t.reduce((n,r,i)=>{var s=e(r,i);return s&&(n[s[0]]=s[1]),n},{})}function Bu(t,e,n){try{t.apply(null,n)}catch(r){e&&e(r)}}function Zt(t,e){if(yt(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,i=e.length;r<i;++r){var s=Zt(t,e[r]);n.push(s)}return n}var a=e.indexOf(".");if(a!==-1){var o=t[e.substr(0,a)];return o===void 0?void 0:Zt(o,e.substr(a+1))}}function Dt(t,e,n){if(!(!t||e===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){Xn(typeof n!="string"&&"length"in n);for(var r=0,i=e.length;r<i;++r)Dt(t,e[r],n[r])}else{var s=e.indexOf(".");if(s!==-1){var a=e.substr(0,s),o=e.substr(s+1);if(o==="")n===void 0?tt(t)&&!isNaN(parseInt(a))?t.splice(a,1):delete t[a]:t[a]=n;else{var c=t[a];(!c||!yt(t,a))&&(c=t[a]={}),Dt(c,o,n)}}else n===void 0?tt(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function Vu(t,e){typeof e=="string"?Dt(t,e,void 0):"length"in e&&[].map.call(e,function(n){Dt(t,n,void 0)})}function za(t){var e={};for(var n in t)yt(t,n)&&(e[n]=t[n]);return e}var Uu=[].concat;function Za(t){return Uu.apply([],t)}var Ya="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Za([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>Fe[t]),Wu=Ya.map(t=>Fe[t]);Ha(Ya,t=>[t,!0]);var en=null;function fr(t){en=typeof WeakMap<"u"&&new WeakMap;let e=Qi(t);return en=null,e}function Qi(t){if(!t||typeof t!="object")return t;let e=en&&en.get(t);if(e)return e;if(tt(t)){e=[],en&&en.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(Qi(t[n]))}else if(Wu.indexOf(t.constructor)>=0)e=t;else{let s=ir(t);e=s===Object.prototype?{}:Object.create(s),en&&en.set(t,e);for(var i in t)yt(t,i)&&(e[i]=Qi(t[i]))}return e}var{toString:Ku}={};function Xi(t){return Ku.call(t).slice(8,-1)}var es=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ju=typeof es=="symbol"?function(t){var e;return t!=null&&(e=t[es])&&e.apply(t)}:function(){return null},Cn={};function Ht(t){var e,n,r,i;if(arguments.length===1){if(tt(t))return t.slice();if(this===Cn&&typeof t=="string")return[t];if(i=ju(t)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(t==null)return[t];if(e=t.length,typeof e=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var Is=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1,Vt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function qa(t,e){Vt=t,Ga=e}var Ga=()=>!0,$u=!new Error("").stack;function Sn(){if($u)try{throw Sn.arguments,new Error}catch(t){return t}return new Error}function ts(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(Ga).map(r=>`
`+r).join("")):""}var Hu=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Ja=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ks=Hu.concat(Ja),zu={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Rn(t,e){this._e=Sn(),this.name=t,this.message=e}Ln(Rn).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+ts(this._e,2))}},toString:function(){return this.name+": "+this.message}});function Qa(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function li(t,e,n,r){this._e=Sn(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=Qa(t,e)}Ln(li).from(Rn);function tr(t,e){this._e=Sn(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=Qa(t,e)}Ln(tr).from(Rn);var As=ks.reduce((t,e)=>(t[e]=e+"Error",t),{}),Zu=Rn,ie=ks.reduce((t,e)=>{var n=e+"Error";function r(i,s){this._e=Sn(),this.name=n,i?typeof i=="string"?(this.message=`${i}${s?`
 `+s:""}`,this.inner=s||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=zu[e]||n,this.inner=null)}return Ln(r).from(Zu),t[e]=r,t},{});ie.Syntax=SyntaxError;ie.Type=TypeError;ie.Range=RangeError;var Na=Ja.reduce((t,e)=>(t[e+"Error"]=ie[e],t),{});function Yu(t,e){if(!t||t instanceof Rn||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Na[t.name])return t;var n=new Na[t.name](e||t.message,t);return"stack"in t&&Yt(n,"stack",{get:function(){return this.inner.stack}}),n}var bi=ks.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=ie[e]),t),{});bi.ModifyError=li;bi.DexieError=Rn;bi.BulkError=tr;function Ae(){}function hr(t){return t}function qu(t,e){return t==null||t===hr?e:function(n){return e(t(n))}}function bn(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function Gu(t,e){return t===Ae?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?bn(r,this.onsuccess):r),i&&(this.onerror=this.onerror?bn(i,this.onerror):i),s!==void 0?s:n}}function Ju(t,e){return t===Ae?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?bn(n,this.onsuccess):n),r&&(this.onerror=this.onerror?bn(r,this.onerror):r)}}function Qu(t,e){return t===Ae?e:function(n){var r=t.apply(this,arguments);at(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?bn(i,this.onsuccess):i),s&&(this.onerror=this.onerror?bn(s,this.onerror):s),r===void 0?a===void 0?void 0:a:at(r,a)}}function Xu(t,e){return t===Ae?e:function(){return e.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function Ns(t,e){return t===Ae?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return e.apply(r,s)})}return e.apply(this,arguments)}}var sr={},el=100,tl=20,Xa=100,[ns,ci,rs]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,ir(t),t];let e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,ir(e),t]})(),eo=ci&&ci.then,ri=ns&&ns.constructor,Ds=!!rs,is=!1,nl=rs?()=>{rs.then(Qr)}:Fe.setImmediate?setImmediate.bind(null,Qr):Fe.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Qr(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Qr,0)},ar=function(t,e){er.push([t,e]),fi&&(nl(),fi=!1)},ss=!0,fi=!0,vn=[],ii=[],as=null,os=hr,Mn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ma,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{Ma(t[0],t[1])}catch{}})}},X=Mn,er=[],wn=0,si=[];function H(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Ae,this._lib=!1;var e=this._PSD=X;if(Vt&&(this._stackHolder=Sn(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==sr)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&ls(this,this._value);return}this._state=null,this._value=null,++e.ref,no(this,t)}var us={get:function(){var t=X,e=hi;function n(r,i){var s=!t.global&&(t!==X||e!==hi);let a=s&&!qt();var o=new H((c,l)=>{Cs(this,new to(mi(r,t,s,a),mi(i,t,s,a),c,l,t))});return Vt&&so(o,this),o}return n.prototype=sr,n},set:function(t){Yt(this,"then",t&&t.prototype===sr?us:{get:function(){return t},set:us.set})}};Fn(H.prototype,{then:us,_then:function(t,e){Cs(this,new to(null,null,t,e,X))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):ai(r)):this.then(null,r=>r&&r.name===e?n(r):ai(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),ai(e)))},stack:{get:function(){if(this._stack)return this._stack;try{is=!0;var t=io(this,[],tl),e=t.join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{is=!1}}},timeout:function(t,e){return t<1/0?new H((n,r)=>{var i=setTimeout(()=>r(new ie.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&Yt(H.prototype,Symbol.toStringTag,"Dexie.Promise");Mn.env=ao();function to(t,e,n,r,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=i}Fn(H,{all:function(){var t=Ht.apply(null,arguments).map(di);return new H(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((i,s)=>H.resolve(i).then(a=>{t[s]=a,--r||e(t)},n))})},resolve:t=>{if(t instanceof H)return t;if(t&&typeof t.then=="function")return new H((n,r)=>{t.then(n,r)});var e=new H(sr,!0,t);return so(e,as),e},reject:ai,race:function(){var t=Ht.apply(null,arguments).map(di);return new H((e,n)=>{t.map(r=>H.resolve(r).then(e,n))})},PSD:{get:()=>X,set:t=>X=t},totalEchoes:{get:()=>hi},newPSD:nn,usePSD:Bn,scheduler:{get:()=>ar,set:t=>{ar=t}},rejectionMapper:{get:()=>os,set:t=>{os=t}},follow:(t,e)=>new H((n,r)=>nn((i,s)=>{var a=X;a.unhandleds=[],a.onunhandled=s,a.finalize=bn(function(){il(()=>{this.unhandleds.length===0?i():s(this.unhandleds[0])})},a.finalize),t()},e,n,r))});ri&&(ri.allSettled&&Yt(H,"allSettled",function(){let t=Ht.apply(null,arguments).map(di);return new H(e=>{t.length===0&&e([]);let n=t.length,r=new Array(n);t.forEach((i,s)=>H.resolve(i).then(a=>r[s]={status:"fulfilled",value:a},a=>r[s]={status:"rejected",reason:a}).then(()=>--n||e(r)))})}),ri.any&&typeof AggregateError<"u"&&Yt(H,"any",function(){let t=Ht.apply(null,arguments).map(di);return new H((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length,i=new Array(r);t.forEach((s,a)=>H.resolve(s).then(o=>e(o),o=>{i[a]=o,--r||n(new AggregateError(i))}))})}));function no(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&dr();n&&typeof n.then=="function"?no(t,(i,s)=>{n instanceof H?n._then(i,s):n.then(i,s)}):(t._state=!0,t._value=n,ro(t)),r&&mr()}},ls.bind(null,t))}catch(n){ls(t,n)}}function ls(t,e){if(ii.push(e),t._state===null){var n=t._lib&&dr();e=os(e),t._state=!1,t._value=e,Vt&&e!==null&&typeof e=="object"&&!e._promise&&Bu(()=>{var r=xs(e,"stack");e._promise=t,Yt(e,"stack",{get:()=>is?r&&(r.get?r.get.apply(e):r.value):t.stack})}),sl(t),ro(t),n&&mr()}}function ro(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Cs(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),wn===0&&(++wn,ar(()=>{--wn===0&&Ms()},[]))}function Cs(t,e){if(t._state===null){t._listeners.push(e);return}var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++wn,ar(rl,[n,t,e])}function rl(t,e,n){try{as=e;var r,i=e._value;e._state?r=t(i):(ii.length&&(ii=[]),r=t(i),ii.indexOf(i)===-1&&al(e)),n.resolve(r)}catch(s){n.reject(s)}finally{as=null,--wn===0&&Ms(),--n.psd.ref||n.psd.finalize()}}function io(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var i=t._value,s,a;i!=null?(s=i.name||"Error",a=i.message||i,r=ts(i,0)):(s=i,a=""),e.push(s+(a?": "+a:"")+r)}return Vt&&(r=ts(t._stackHolder,2),r&&e.indexOf(r)===-1&&e.push(r),t._prev&&io(t._prev,e,n)),e}function so(t,e){var n=e?e._numPrev+1:0;n<el&&(t._prev=e,t._numPrev=n)}function Qr(){dr()&&mr()}function dr(){var t=ss;return ss=!1,fi=!1,t}function mr(){var t,e,n;do for(;er.length>0;)for(t=er,er=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(er.length>0);ss=!0,fi=!0}function Ms(){var t=vn;vn=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=si.slice(0),n=e.length;n;)e[--n]()}function il(t){function e(){t(),si.splice(si.indexOf(e),1)}si.push(e),++wn,ar(()=>{--wn===0&&Ms()},[])}function sl(t){vn.some(e=>e._value===t._value)||vn.push(t)}function al(t){for(var e=vn.length;e;)if(vn[--e]._value===t._value){vn.splice(e,1);return}}function ai(t){return new H(sr,!1,t)}function Le(t,e){var n=X;return function(){var r=dr(),i=X;try{return rn(n,!0),t.apply(this,arguments)}catch(s){e&&e(s)}finally{rn(i,!1),r&&mr()}}}var et={awaits:0,echoes:0,id:0},ol=0,oi=[],zi=0,hi=0,ul=0;function nn(t,e,n,r){var i=X,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++ul;var a=Mn.env;s.env=Ds?{Promise:H,PromiseProp:{value:H,configurable:!0,writable:!0},all:H.all,race:H.race,allSettled:H.allSettled,any:H.any,resolve:H.resolve,reject:H.reject,nthen:Da(a.nthen,s),gthen:Da(a.gthen,s)}:{},e&&at(s,e),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var o=Bn(s,t,n,r);return s.ref===0&&s.finalize(),o}function Pn(){return et.id||(et.id=++ol),++et.awaits,et.echoes+=Xa,et.id}function qt(){return et.awaits?(--et.awaits===0&&(et.id=0),et.echoes=et.awaits*Xa,!0):!1}(""+eo).indexOf("[native code]")===-1&&(Pn=qt=Ae);function di(t){return et.echoes&&t&&t.constructor===ri?(Pn(),t.then(e=>(qt(),e),e=>(qt(),ze(e)))):t}function ll(t){++hi,(!et.echoes||--et.echoes===0)&&(et.echoes=et.id=0),oi.push(X),rn(t,!0)}function cl(){var t=oi[oi.length-1];oi.pop(),rn(t,!1)}function rn(t,e){var n=X;if((e?et.echoes&&(!zi++||t!==X):zi&&(!--zi||t!==X))&&oo(e?ll.bind(null,t):cl),t!==X&&(X=t,n===Mn&&(Mn.env=ao()),Ds)){var r=Mn.env.Promise,i=t.env;ci.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(Fe,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function ao(){var t=Fe.Promise;return Ds?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(Fe,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:ci.then,gthen:t.prototype.then}:{}}function Bn(t,e,n,r,i){var s=X;try{return rn(t,!0),e(n,r,i)}finally{rn(s,!1)}}function oo(t){eo.call(ns,t)}function mi(t,e,n,r){return typeof t!="function"?t:function(){var i=X;n&&Pn(),rn(e,!0);try{return t.apply(this,arguments)}finally{rn(i,!1),r&&oo(qt)}}}function Da(t,e){return function(n,r){return t.call(this,mi(n,e),mi(r,e))}}var Ca="unhandledrejection";function Ma(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,i={promise:e,reason:t};if(Fe.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(Ca,!0,!0),at(r,i)):Fe.CustomEvent&&(r=new CustomEvent(Ca,{detail:i}),at(r,i)),r&&Fe.dispatchEvent&&(dispatchEvent(r),!Fe.PromiseRejectionEvent&&Fe.onunhandledrejection))try{Fe.onunhandledrejection(r)}catch{}Vt&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var ze=H.reject;function cs(t,e,n,r){if(!t.idbdb||!t._state.openComplete&&!X.letThrough&&!t._vip){if(t._state.openComplete)return ze(new ie.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return ze(new ie.DatabaseClosed);t.open().catch(Ae)}return t._state.dbReadyPromise.then(()=>cs(t,e,n,r))}else{var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(s){return s.name===As.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>cs(t,e,n,r))):ze(s)}return i._promise(e,(s,a)=>nn(()=>(X.trans=i,r(s,a,i)))).then(s=>i._completion.then(()=>s))}}var Fa="3.2.4",gn="\uFFFF",fs=-1/0,jt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",uo="String expected.",nr=[],Ti=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),fl=Ti,hl=Ti,lo=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),Si="__dbnames",Zi="readonly",Yi="readwrite";function Tn(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var co={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Xr(t){return typeof t=="string"&&!/\./.test(t)?e=>(e[t]===void 0&&t in e&&(e=fr(e),delete e[t]),e):e=>e}var hs=class{_trans(e,n,r){let i=this._tx||X.trans,s=this.name;function a(c,l,m){if(!m.schema[s])throw new ie.NotFound("Table "+s+" not part of transaction");return n(m.idbtrans,m)}let o=dr();try{return i&&i.db===this.db?i===X.trans?i._promise(e,a,r):nn(()=>i._promise(e,a,r),{trans:i,transless:X.transless||X}):cs(this.db,e,[this.name],a)}finally{o&&mr()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(i=>this.hook.reading.fire(i))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(tt(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);let n=Ke(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);let r=this.schema.indexes.concat(this.schema.primKey).filter(l=>l.compound&&n.every(m=>l.keyPath.indexOf(m)>=0)&&l.keyPath.every(m=>n.indexOf(m)>=0))[0];if(r&&this.db._maxKey!==gn)return this.where(r.name).equals(r.keyPath.map(l=>e[l]));!r&&Vt&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);let{idxByName:i}=this.schema,s=this.db._deps.indexedDB;function a(l,m){try{return s.cmp(l,m)===0}catch{return!1}}let[o,c]=n.reduce(([l,m],p)=>{let w=i[p],g=e[p];return[l||w,l||!w?Tn(m,w&&w.multi?T=>{let S=Zt(T,p);return tt(S)&&S.some(k=>a(g,k))}:T=>a(g,Zt(T,p))):m]},[null,null]);return o?this.where(o.name).equals(e[o.keyPath]).filter(c):r?this.filter(c):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,tt(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;let n=r=>{if(!r)return r;let i=Object.create(e.prototype);for(var s in r)if(yt(r,s))try{i[s]=r[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){function e(n){at(this,n)}return this.mapToClass(e)}add(e,n){let{auto:r,keyPath:i}=this.schema.primKey,s=e;return i&&r&&(s=Xr(i)(e)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"add",keys:n!=null?[n]:null,values:[s]})).then(a=>a.numFailures?H.reject(a.failures[0]):a.lastResult).then(a=>{if(i)try{Dt(e,i,a)}catch{}return a})}update(e,n){if(typeof e=="object"&&!tt(e)){let r=Zt(e,this.schema.primKey.keyPath);if(r===void 0)return ze(new ie.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?Ke(n).forEach(i=>{Dt(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(e).modify(n)}put(e,n){let{auto:r,keyPath:i}=this.schema.primKey,s=e;return i&&r&&(s=Xr(i)(e)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"put",values:[s],keys:n!=null?[n]:null})).then(a=>a.numFailures?H.reject(a.failures[0]):a.lastResult).then(a=>{if(i)try{Dt(e,i,a)}catch{}return a})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?H.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:co})).then(e=>e.numFailures?H.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(e,n,r){let i=Array.isArray(n)?n:void 0;r=r||(i?void 0:n);let s=r?r.allKeys:void 0;return this._trans("readwrite",a=>{let{auto:o,keyPath:c}=this.schema.primKey;if(c&&i)throw new ie.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new ie.InvalidArgument("Arguments objects and keys must have the same length");let l=e.length,m=c&&o?e.map(Xr(c)):e;return this.core.mutate({trans:a,type:"add",keys:i,values:m,wantResults:s}).then(({numFailures:p,results:w,lastResult:g,failures:T})=>{let S=s?w:g;if(p===0)return S;throw new tr(`${this.name}.bulkAdd(): ${p} of ${l} operations failed`,T)})})}bulkPut(e,n,r){let i=Array.isArray(n)?n:void 0;r=r||(i?void 0:n);let s=r?r.allKeys:void 0;return this._trans("readwrite",a=>{let{auto:o,keyPath:c}=this.schema.primKey;if(c&&i)throw new ie.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new ie.InvalidArgument("Arguments objects and keys must have the same length");let l=e.length,m=c&&o?e.map(Xr(c)):e;return this.core.mutate({trans:a,type:"put",keys:i,values:m,wantResults:s}).then(({numFailures:p,results:w,lastResult:g,failures:T})=>{let S=s?w:g;if(p===0)return S;throw new tr(`${this.name}.bulkPut(): ${p} of ${l} operations failed`,T)})})}bulkDelete(e){let n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:i,failures:s})=>{if(r===0)return i;throw new tr(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,s)})}};function yr(t){var e={},n=function(o,c){if(c){for(var l=arguments.length,m=new Array(l-1);--l;)m[l-1]=arguments[l];return e[o].subscribe.apply(null,m),t}else if(typeof o=="string")return e[o]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(o,c,l){if(typeof o=="object")return a(o);c||(c=Xu),l||(l=Ae);var m={subscribers:[],fire:l,subscribe:function(p){m.subscribers.indexOf(p)===-1&&(m.subscribers.push(p),m.fire=c(m.fire,p))},unsubscribe:function(p){m.subscribers=m.subscribers.filter(function(w){return w!==p}),m.fire=m.subscribers.reduce(c,l)}};return e[o]=n[o]=m,m}function a(o){Ke(o).forEach(function(c){var l=o[c];if(tt(l))s(c,o[c][0],o[c][1]);else if(l==="asap")var m=s(c,hr,function(){for(var w=arguments.length,g=new Array(w);w--;)g[w]=arguments[w];m.subscribers.forEach(function(T){$a(function(){T.apply(null,g)})})});else throw new ie.InvalidArgument("Invalid event config")})}}function pr(t,e){return Ln(e).from({prototype:t}),e}function dl(t){return pr(hs.prototype,function(n,r,i){this.db=t,this._tx=i,this.name=n,this.schema=r,this.hook=t._allTables[n]?t._allTables[n].hook:yr(null,{creating:[Gu,Ae],reading:[qu,hr],updating:[Qu,Ae],deleting:[Ju,Ae]})})}function Nn(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function qi(t,e){t.filter=Tn(t.filter,e)}function Gi(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>Tn(r(),e()):e,t.justLimit=n&&!r}function ml(t,e){t.isMatch=Tn(t.isMatch,e)}function ui(t,e){if(t.isPrimKey)return e.primaryKey;let n=e.getIndexByKeyPath(t.index);if(!n)throw new ie.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function La(t,e,n){let r=ui(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function ei(t,e,n,r){let i=t.replayFilter?Tn(t.filter,t.replayFilter()):t.filter;if(t.or){let s={},a=(o,c,l)=>{if(!i||i(c,l,w=>c.stop(w),w=>c.fail(w))){var m=c.primaryKey,p=""+m;p==="[object ArrayBuffer]"&&(p=""+new Uint8Array(m)),yt(s,p)||(s[p]=!0,e(o,c,l))}};return Promise.all([t.or._iterate(a,n),Ra(La(t,r,n),t.algorithm,a,!t.keysOnly&&t.valueMapper)])}else return Ra(La(t,r,n),Tn(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function Ra(t,e,n,r){var i=r?(a,o,c)=>n(r(a),o,c):n,s=Le(i);return t.then(a=>{if(a)return a.start(()=>{var o=()=>a.continue();(!e||e(a,c=>o=c,c=>{a.stop(c),o=Ae},c=>{a.fail(c),o=Ae}))&&s(a.value,a,c=>o=c),o()})})}function st(t,e){try{let n=Pa(t),r=Pa(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return pl(Ba(t),Ba(e));case"Array":return yl(t,e)}}catch{}return NaN}function yl(t,e){let n=t.length,r=e.length,i=n<r?n:r;for(let s=0;s<i;++s){let a=st(t[s],e[s]);if(a!==0)return a}return n===r?0:n<r?-1:1}function pl(t,e){let n=t.length,r=e.length,i=n<r?n:r;for(let s=0;s<i;++s)if(t[s]!==e[s])return t[s]<e[s]?-1:1;return n===r?0:n<r?-1:1}function Pa(t){let e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";let n=Xi(t);return n==="ArrayBuffer"?"binary":n}function Ba(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var ds=class{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,ze.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,ze.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=Tn(n.algorithm,e)}_iterate(e,n){return ei(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&at(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>ei(n,e,r,n.table.core))}count(e){return this._read(n=>{let r=this._ctx,i=r.table.core;if(Nn(r,!0))return i.count({trans:n,query:{index:ui(r,i.schema),range:r.range}}).then(a=>Math.min(a,r.limit));var s=0;return ei(r,()=>(++s,!1),n,i).then(()=>s)}).then(e)}sortBy(e,n){let r=e.split(".").reverse(),i=r[0],s=r.length-1;function a(l,m){return m?a(l[r[m]],m-1):l[i]}var o=this._ctx.dir==="next"?1:-1;function c(l,m){var p=a(l,s),w=a(m,s);return p<w?-o:p>w?o:0}return this.toArray(function(l){return l.sort(c)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&Nn(r,!0)&&r.limit>0){let{valueMapper:i}=r,s=ui(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:s,range:r.range}}).then(({result:a})=>i?a.map(i):a)}else{let i=[];return ei(r,s=>i.push(s),n,r.table.core).then(()=>i)}},e)}offset(e){var n=this._ctx;return e<=0?this:(n.offset+=e,Nn(n)?Gi(n,()=>{var r=e;return(i,s)=>r===0?!0:r===1?(--r,!1):(s(()=>{i.advance(r),r=0}),!1)}):Gi(n,()=>{var r=e;return()=>--r<0}),this)}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Gi(this._ctx,()=>{var n=e;return function(r,i,s){return--n<=0&&i(s),n>=0}},!0),this}until(e,n){return qi(this._ctx,function(r,i,s){return e(r.value)?(i(s),n):!0}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){return qi(this._ctx,function(n){return e(n.value)}),ml(this._ctx,e),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&Nn(n,!0)&&n.limit>0)return this._read(i=>{var s=ui(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(({result:i})=>i).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return qi(this._ctx,function(i){var s=i.primaryKey.toString(),a=yt(r,s);return r[s]=!0,!a}),this}modify(e){var n=this._ctx;return this._write(r=>{var i;if(typeof e=="function")i=e;else{var s=Ke(e),a=s.length;i=function(S){for(var k=!1,O=0;O<a;++O){var D=s[O],E=e[D];Zt(S,D)!==E&&(Dt(S,D,E),k=!0)}return k}}let o=n.table.core,{outbound:c,extractKey:l}=o.schema.primaryKey,m=this.db._options.modifyChunkSize||200,p=[],w=0,g=[],T=(S,k)=>{let{failures:O,numFailures:D}=k;w+=S-D;for(let E of Ke(O))p.push(O[E])};return this.clone().primaryKeys().then(S=>{let k=O=>{let D=Math.min(m,S.length-O);return o.getMany({trans:r,keys:S.slice(O,O+D),cache:"immutable"}).then(E=>{let I=[],N=[],L=c?[]:null,B=[];for(let v=0;v<D;++v){let d=E[v],x={value:fr(d),primKey:S[O+v]};i.call(x,x.value,x)!==!1&&(x.value==null?B.push(S[O+v]):!c&&st(l(d),l(x.value))!==0?(B.push(S[O+v]),I.push(x.value)):(N.push(x.value),c&&L.push(S[O+v])))}let z=Nn(n)&&n.limit===1/0&&(typeof e!="function"||e===Ji)&&{index:n.index,range:n.range};return Promise.resolve(I.length>0&&o.mutate({trans:r,type:"add",values:I}).then(v=>{for(let d in v.failures)B.splice(parseInt(d),1);T(I.length,v)})).then(()=>(N.length>0||z&&typeof e=="object")&&o.mutate({trans:r,type:"put",keys:L,values:N,criteria:z,changeSpec:typeof e!="function"&&e}).then(v=>T(N.length,v))).then(()=>(B.length>0||z&&e===Ji)&&o.mutate({trans:r,type:"delete",keys:B,criteria:z}).then(v=>T(B.length,v))).then(()=>S.length>O+D&&k(O+m))})};return k(0).then(()=>{if(p.length>0)throw new li("Error modifying one or more objects",p,w,g);return S.length})})})}delete(){var e=this._ctx,n=e.range;return Nn(e)&&(e.isPrimKey&&!hl||n.type===3)?this._write(r=>{let{primaryKey:i}=e.table.core.schema,s=n;return e.table.core.count({trans:r,query:{index:i,range:s}}).then(a=>e.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(({failures:o,lastResult:c,results:l,numFailures:m})=>{if(m)throw new li("Could not delete some values",Object.keys(o).map(p=>o[p]),a-m);return a-m}))}):this.modify(Ji)}},Ji=(t,e)=>e.value=null;function gl(t){return pr(ds.prototype,function(n,r){this.db=t;let i=co,s=null;if(r)try{i=r()}catch(l){s=l}let a=n._ctx,o=a.table,c=o.hook.reading.fire;this._ctx={table:o,index:a.index,isPrimKey:!a.index||o.schema.primKey.keyPath&&a.index===o.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:s,or:a.or,valueMapper:c!==hr?c:null}})}function vl(t,e){return t<e?-1:t===e?0:1}function wl(t,e){return t>e?-1:t===e?0:1}function mt(t,e,n){var r=t instanceof yi?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function Dn(t){return new t.Collection(t,()=>fo("")).limit(0)}function bl(t){return t==="next"?e=>e.toUpperCase():e=>e.toLowerCase()}function Tl(t){return t==="next"?e=>e.toLowerCase():e=>e.toUpperCase()}function Sl(t,e,n,r,i,s){for(var a=Math.min(t.length,r.length),o=-1,c=0;c<a;++c){var l=e[c];if(l!==r[c])return i(t[c],n[c])<0?t.substr(0,c)+n[c]+n.substr(c+1):i(t[c],r[c])<0?t.substr(0,c)+r[c]+n.substr(c+1):o>=0?t.substr(0,o)+e[o]+n.substr(o+1):null;i(t[c],l)<0&&(o=c)}return a<r.length&&s==="next"?t+n.substr(t.length):a<t.length&&s==="prev"?t.substr(0,n.length):o<0?null:t.substr(0,o)+r[o]+n.substr(o+1)}function ti(t,e,n,r){var i,s,a,o,c,l,m,p=n.length;if(!n.every(S=>typeof S=="string"))return mt(t,uo);function w(S){i=bl(S),s=Tl(S),a=S==="next"?vl:wl;var k=n.map(function(O){return{lower:s(O),upper:i(O)}}).sort(function(O,D){return a(O.lower,D.lower)});o=k.map(function(O){return O.upper}),c=k.map(function(O){return O.lower}),l=S,m=S==="next"?"":r}w("next");var g=new t.Collection(t,()=>Xt(o[0],c[p-1]+r));g._ondirectionchange=function(S){w(S)};var T=0;return g._addAlgorithm(function(S,k,O){var D=S.key;if(typeof D!="string")return!1;var E=s(D);if(e(E,c,T))return!0;for(var I=null,N=T;N<p;++N){var L=Sl(D,E,o[N],c[N],a,l);L===null&&I===null?T=N+1:(I===null||a(I,L)>0)&&(I=L)}return k(I!==null?function(){S.continue(I+m)}:O),!1}),g}function Xt(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function fo(t){return{type:1,lower:t,upper:t}}var yi=class{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||i)&&!(r&&i)?Dn(this):new this.Collection(this,()=>Xt(e,n,!r,!i))}catch{return mt(this,jt)}}equals(e){return e==null?mt(this,jt):new this.Collection(this,()=>fo(e))}above(e){return e==null?mt(this,jt):new this.Collection(this,()=>Xt(e,void 0,!0))}aboveOrEqual(e){return e==null?mt(this,jt):new this.Collection(this,()=>Xt(e,void 0,!1))}below(e){return e==null?mt(this,jt):new this.Collection(this,()=>Xt(void 0,e,!1,!0))}belowOrEqual(e){return e==null?mt(this,jt):new this.Collection(this,()=>Xt(void 0,e))}startsWith(e){return typeof e!="string"?mt(this,uo):this.between(e,e+gn,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):ti(this,(n,r)=>n.indexOf(r[0])===0,[e],gn)}equalsIgnoreCase(e){return ti(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=Ht.apply(Cn,arguments);return e.length===0?Dn(this):ti(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=Ht.apply(Cn,arguments);return e.length===0?Dn(this):ti(this,(n,r)=>r.some(i=>n.indexOf(i)===0),e,gn)}anyOf(){let e=Ht.apply(Cn,arguments),n=this._cmp;try{e.sort(n)}catch{return mt(this,jt)}if(e.length===0)return Dn(this);let r=new this.Collection(this,()=>Xt(e[0],e[e.length-1]));r._ondirectionchange=s=>{n=s==="next"?this._ascending:this._descending,e.sort(n)};let i=0;return r._addAlgorithm((s,a,o)=>{let c=s.key;for(;n(c,e[i])>0;)if(++i,i===e.length)return a(o),!1;return n(c,e[i])===0?!0:(a(()=>{s.continue(e[i])}),!1)}),r}notEqual(e){return this.inAnyRange([[fs,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){let e=Ht.apply(Cn,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return mt(this,jt)}let n=e.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[fs,i]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){let r=this._cmp,i=this._ascending,s=this._descending,a=this._min,o=this._max;if(e.length===0)return Dn(this);if(!e.every(I=>I[0]!==void 0&&I[1]!==void 0&&i(I[0],I[1])<=0))return mt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ie.InvalidArgument);let c=!n||n.includeLowers!==!1,l=n&&n.includeUppers===!0;function m(I,N){let L=0,B=I.length;for(;L<B;++L){let z=I[L];if(r(N[0],z[1])<0&&r(N[1],z[0])>0){z[0]=a(z[0],N[0]),z[1]=o(z[1],N[1]);break}}return L===B&&I.push(N),I}let p=i;function w(I,N){return p(I[0],N[0])}let g;try{g=e.reduce(m,[]),g.sort(w)}catch{return mt(this,jt)}let T=0,S=l?I=>i(I,g[T][1])>0:I=>i(I,g[T][1])>=0,k=c?I=>s(I,g[T][0])>0:I=>s(I,g[T][0])>=0;function O(I){return!S(I)&&!k(I)}let D=S,E=new this.Collection(this,()=>Xt(g[0][0],g[g.length-1][1],!c,!l));return E._ondirectionchange=I=>{I==="next"?(D=S,p=i):(D=k,p=s),g.sort(w)},E._addAlgorithm((I,N,L)=>{for(var B=I.key;D(B);)if(++T,T===g.length)return N(L),!1;return O(B)?!0:(this._cmp(B,g[T][1])===0||this._cmp(B,g[T][0])===0||N(()=>{p===i?I.continue(g[T][0]):I.continue(g[T][1])}),!1)}),E}startsWithAnyOf(){let e=Ht.apply(Cn,arguments);return e.every(n=>typeof n=="string")?e.length===0?Dn(this):this.inAnyRange(e.map(n=>[n,n+gn])):mt(this,"startsWithAnyOf() only works with strings")}};function El(t){return pr(yi.prototype,function(n,r,i){this.db=t,this._ctx={table:n,index:r===":id"?null:r,or:i};let s=t._deps.indexedDB;if(!s)throw new ie.MissingAPI;this._cmp=this._ascending=s.cmp.bind(s),this._descending=(a,o)=>s.cmp(o,a),this._max=(a,o)=>s.cmp(a,o)>0?a:o,this._min=(a,o)=>s.cmp(a,o)<0?a:o,this._IDBKeyRange=t._deps.IDBKeyRange})}function Bt(t){return Le(function(e){return or(e),t(e.target.error),!1})}function or(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var ur="storagemutated",tn="x-storagemutated-1",sn=yr(null,ur),ms=class{_lock(){return Xn(!X.global),++this._reculock,this._reculock===1&&!X.global&&(X.lockOwnerFor=this),this}_unlock(){if(Xn(!X.global),--this._reculock===0)for(X.global||(X.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Bn(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&X.lockOwnerFor!==this}create(e){if(!this.mode)return this;let n=this.db.idbdb,r=this.db._state.dbOpenError;if(Xn(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new ie.DatabaseClosed(r);case"MissingAPIError":throw new ie.MissingAPI(r.message,r);default:throw new ie.OpenFailed(r)}if(!this.active)throw new ie.TransactionInactive;return Xn(this._completion._state===null),e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),e.onerror=Le(i=>{or(i),this._reject(e.error)}),e.onabort=Le(i=>{or(i),this.active&&this._reject(new ie.Abort(e.error)),this.active=!1,this.on("abort").fire(i)}),e.oncomplete=Le(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&sn.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return ze(new ie.ReadOnly("Transaction is readonly"));if(!this.active)return ze(new ie.TransactionInactive);if(this._locked())return new H((s,a)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(s,a)},X])});if(r)return nn(()=>{var s=new H((a,o)=>{this._lock();let c=n(a,o,this);c&&c.then&&c.then(a,o)});return s.finally(()=>this._unlock()),s._lib=!0,s});var i=new H((s,a)=>{var o=n(s,a,this);o&&o.then&&o.then(s,a)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();let r=H.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function a(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=a)})()}var s=n._waitingFor;return new H((a,o)=>{r.then(c=>n._waitingQueue.push(Le(a.bind(null,c))),c=>n._waitingQueue.push(Le(o.bind(null,c)))).finally(()=>{n._waitingFor===s&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ie.Abort))}table(e){let n=this._memoizedTables||(this._memoizedTables={});if(yt(n,e))return n[e];let r=this.schema[e];if(!r)throw new ie.NotFound("Table "+e+" not part of transaction");let i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i}};function _l(t){return pr(ms.prototype,function(n,r,i,s,a){this.db=t,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=s,this.idbtrans=null,this.on=yr(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new H((o,c)=>{this._resolve=o,this._reject=c}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},o=>{var c=this.active;return this.active=!1,this.on.error.fire(o),this.parent?this.parent._reject(o):c&&this.idbtrans&&this.idbtrans.abort(),ze(o)})})}function ys(t,e,n,r,i,s,a){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:s,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+ho(e)}}function ho(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function mo(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:Ha(n,r=>[r.name,r])}}function Ol(t){return t.length===1?t[0]:t}var lr=t=>{try{return t.only([[]]),lr=()=>[[]],[[]]}catch{return lr=()=>gn,gn}};function ps(t){return t==null?()=>{}:typeof t=="string"?xl(t):e=>Zt(e,t)}function xl(t){return t.split(".").length===1?n=>n[t]:n=>Zt(n,t)}function Va(t){return[].slice.call(t)}var Il=0;function rr(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function kl(t,e,n){function r(m,p){let w=Va(m.objectStoreNames);return{schema:{name:m.name,tables:w.map(g=>p.objectStore(g)).map(g=>{let{keyPath:T,autoIncrement:S}=g,k=tt(T),O=T==null,D={},E={name:g.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:O,compound:k,keyPath:T,autoIncrement:S,unique:!0,extractKey:ps(T)},indexes:Va(g.indexNames).map(I=>g.index(I)).map(I=>{let{name:N,unique:L,multiEntry:B,keyPath:z}=I,v=tt(z),d={name:N,compound:v,keyPath:z,unique:L,multiEntry:B,extractKey:ps(z)};return D[rr(z)]=d,d}),getIndexByKeyPath:I=>D[rr(I)]};return D[":id"]=E.primaryKey,T!=null&&(D[rr(T)]=E.primaryKey),E})},hasGetAll:w.length>0&&"getAll"in p.objectStore(w[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(m){if(m.type===3)return null;if(m.type===4)throw new Error("Cannot convert never type to IDBKeyRange");let{lower:p,upper:w,lowerOpen:g,upperOpen:T}=m;return p===void 0?w===void 0?null:e.upperBound(w,!!T):w===void 0?e.lowerBound(p,!!g):e.bound(p,w,!!g,!!T)}function s(m){let p=m.name;function w({trans:S,type:k,keys:O,values:D,range:E}){return new Promise((I,N)=>{I=Le(I);let L=S.objectStore(p),B=L.keyPath==null,z=k==="put"||k==="add";if(!z&&k!=="delete"&&k!=="deleteRange")throw new Error("Invalid operation type: "+k);let{length:v}=O||D||{length:1};if(O&&D&&O.length!==D.length)throw new Error("Given keys array must have same length as given values array.");if(v===0)return I({numFailures:0,failures:{},results:[],lastResult:void 0});let d,x=[],_=[],K=0,ae=ue=>{++K,or(ue)};if(k==="deleteRange"){if(E.type===4)return I({numFailures:K,failures:_,results:[],lastResult:void 0});E.type===3?x.push(d=L.clear()):x.push(d=L.delete(i(E)))}else{let[ue,de]=z?B?[D,O]:[D,null]:[O,null];if(z)for(let se=0;se<v;++se)x.push(d=de&&de[se]!==void 0?L[k](ue[se],de[se]):L[k](ue[se])),d.onerror=ae;else for(let se=0;se<v;++se)x.push(d=L[k](ue[se])),d.onerror=ae}let le=ue=>{let de=ue.target.result;x.forEach((se,$e)=>se.error!=null&&(_[$e]=se.error)),I({numFailures:K,failures:_,results:k==="delete"?O:x.map(se=>se.result),lastResult:de})};d.onerror=ue=>{ae(ue),le(ue)},d.onsuccess=le})}function g({trans:S,values:k,query:O,reverse:D,unique:E}){return new Promise((I,N)=>{I=Le(I);let{index:L,range:B}=O,z=S.objectStore(p),v=L.isPrimaryKey?z:z.index(L.name),d=D?E?"prevunique":"prev":E?"nextunique":"next",x=k||!("openKeyCursor"in v)?v.openCursor(i(B),d):v.openKeyCursor(i(B),d);x.onerror=Bt(N),x.onsuccess=Le(_=>{let K=x.result;if(!K){I(null);return}K.___id=++Il,K.done=!1;let ae=K.continue.bind(K),le=K.continuePrimaryKey;le&&(le=le.bind(K));let ue=K.advance.bind(K),de=()=>{throw new Error("Cursor not started")},se=()=>{throw new Error("Cursor not stopped")};K.trans=S,K.stop=K.continue=K.continuePrimaryKey=K.advance=de,K.fail=Le(N),K.next=function(){let $e=1;return this.start(()=>$e--?this.continue():this.stop()).then(()=>this)},K.start=$e=>{let nt=new Promise((He,Ot)=>{He=Le(He),x.onerror=Bt(Ot),K.fail=Ot,K.stop=G=>{K.stop=K.continue=K.continuePrimaryKey=K.advance=se,He(G)}}),Ze=()=>{if(x.result)try{$e()}catch(He){K.fail(He)}else K.done=!0,K.start=()=>{throw new Error("Cursor behind last entry")},K.stop()};return x.onsuccess=Le(He=>{x.onsuccess=Ze,Ze()}),K.continue=ae,K.continuePrimaryKey=le,K.advance=ue,Ze(),nt},I(K)},N)})}function T(S){return k=>new Promise((O,D)=>{O=Le(O);let{trans:E,values:I,limit:N,query:L}=k,B=N===1/0?void 0:N,{index:z,range:v}=L,d=E.objectStore(p),x=z.isPrimaryKey?d:d.index(z.name),_=i(v);if(N===0)return O({result:[]});if(S){let K=I?x.getAll(_,B):x.getAllKeys(_,B);K.onsuccess=ae=>O({result:ae.target.result}),K.onerror=Bt(D)}else{let K=0,ae=I||!("openKeyCursor"in x)?x.openCursor(_):x.openKeyCursor(_),le=[];ae.onsuccess=ue=>{let de=ae.result;if(!de)return O({result:le});if(le.push(I?de.value:de.primaryKey),++K===N)return O({result:le});de.continue()},ae.onerror=Bt(D)}})}return{name:p,schema:m,mutate:w,getMany({trans:S,keys:k}){return new Promise((O,D)=>{O=Le(O);let E=S.objectStore(p),I=k.length,N=new Array(I),L=0,B=0,z,v=x=>{let _=x.target;(N[_._pos]=_.result)!=null,++B===L&&O(N)},d=Bt(D);for(let x=0;x<I;++x)k[x]!=null&&(z=E.get(k[x]),z._pos=x,z.onsuccess=v,z.onerror=d,++L);L===0&&O(N)})},get({trans:S,key:k}){return new Promise((O,D)=>{O=Le(O);let I=S.objectStore(p).get(k);I.onsuccess=N=>O(N.target.result),I.onerror=Bt(D)})},query:T(o),openCursor:g,count({query:S,trans:k}){let{index:O,range:D}=S;return new Promise((E,I)=>{let N=k.objectStore(p),L=O.isPrimaryKey?N:N.index(O.name),B=i(D),z=B?L.count(B):L.count();z.onsuccess=Le(v=>E(v.target.result)),z.onerror=Bt(I)})}}}let{schema:a,hasGetAll:o}=r(t,n),c=a.tables.map(m=>s(m)),l={};return c.forEach(m=>l[m.name]=m),{stack:"dbcore",transaction:t.transaction.bind(t),table(m){if(!l[m])throw new Error(`Table '${m}' not found`);return l[m]},MIN_KEY:-1/0,MAX_KEY:lr(e),schema:a}}function Al(t,e){return e.reduce((n,{create:r})=>j(j({},n),r(n)),t)}function Nl(t,e,{IDBKeyRange:n,indexedDB:r},i){return{dbcore:Al(kl(e,n,i),t.dbcore)}}function Fs({_novip:t},e){let n=e.db,r=Nl(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(i=>{let s=i.name;t.core.schema.tables.some(a=>a.name===s)&&(i.core=t.core.table(s),t[s]instanceof t.Table&&(t[s].core=i.core))})}function pi({_novip:t},e,n,r){n.forEach(i=>{let s=r[i];e.forEach(a=>{let o=xs(a,i);(!o||"value"in o&&o.value===void 0)&&(a===t.Transaction.prototype||a instanceof t.Transaction?Yt(a,i,{get(){return this.table(i)},set(c){Ka(this,i,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):a[i]=new t.Table(i,s))})})}function gs({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function Dl(t,e){return t._cfg.version-e._cfg.version}function Cl(t,e,n,r){let i=t._dbSchema,s=t._createTransaction("readwrite",t._storeNames,i);s.create(n),s._completion.catch(r);let a=s._reject.bind(s),o=X.transless||X;nn(()=>{X.trans=s,X.transless=o,e===0?(Ke(i).forEach(c=>{Ls(n,c,i[c].primKey,i[c].indexes)}),Fs(t,n),H.follow(()=>t.on.populate.fire(s)).catch(a)):Ml(t,e,s,n).catch(a)})}function Ml({_novip:t},e,n,r){let i=[],s=t._versions,a=t._dbSchema=Rs(t,t.idbdb,r),o=!1;s.filter(m=>m._cfg.version>=e).forEach(m=>{i.push(()=>{let p=a,w=m._cfg.dbschema;ws(t,p,r),ws(t,w,r),a=t._dbSchema=w;let g=yo(p,w);g.add.forEach(S=>{Ls(r,S[0],S[1].primKey,S[1].indexes)}),g.change.forEach(S=>{if(S.recreate)throw new ie.Upgrade("Not yet support for changing primary key");{let k=r.objectStore(S.name);S.add.forEach(O=>vs(k,O)),S.change.forEach(O=>{k.deleteIndex(O.name),vs(k,O)}),S.del.forEach(O=>k.deleteIndex(O))}});let T=m._cfg.contentUpgrade;if(T&&m._cfg.version>e){Fs(t,r),n._memoizedTables={},o=!0;let S=za(w);g.del.forEach(E=>{S[E]=p[E]}),gs(t,[t.Transaction.prototype]),pi(t,[t.Transaction.prototype],Ke(S),S),n.schema=S;let k=Is(T);k&&Pn();let O,D=H.follow(()=>{if(O=T(n),O&&k){var E=qt.bind(null,null);O.then(E,E)}});return O&&typeof O.then=="function"?H.resolve(O):D.then(()=>O)}}),i.push(p=>{if(!o||!fl){let w=m._cfg.dbschema;Ll(w,p)}gs(t,[t.Transaction.prototype]),pi(t,[t.Transaction.prototype],t._storeNames,t._dbSchema),n.schema=t._dbSchema})});function l(){return i.length?H.resolve(i.shift()(n.idbtrans)).then(l):H.resolve()}return l().then(()=>{Fl(a,r)})}function yo(t,e){let n={del:[],add:[],change:[]},r;for(r in t)e[r]||n.del.push(r);for(r in e){let i=t[r],s=e[r];if(!i)n.add.push([r,s]);else{let a={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!Ti)a.recreate=!0,n.change.push(a);else{let o=i.idxByName,c=s.idxByName,l;for(l in o)c[l]||a.del.push(l);for(l in c){let m=o[l],p=c[l];m?m.src!==p.src&&a.change.push(p):a.add.push(p)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}}return n}function Ls(t,e,n,r){let i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(s=>vs(i,s)),i}function Fl(t,e){Ke(t).forEach(n=>{e.db.objectStoreNames.contains(n)||Ls(e,n,t[n].primKey,t[n].indexes)})}function Ll(t,e){[].slice.call(e.db.objectStoreNames).forEach(n=>t[n]==null&&e.db.deleteObjectStore(n))}function vs(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function Rs(t,e,n){let r={};return wi(e.objectStoreNames,0).forEach(s=>{let a=n.objectStore(s),o=a.keyPath,c=ys(ho(o),o||"",!1,!1,!!a.autoIncrement,o&&typeof o!="string",!0),l=[];for(let p=0;p<a.indexNames.length;++p){let w=a.index(a.indexNames[p]);o=w.keyPath;var m=ys(w.name,o,!!w.unique,!!w.multiEntry,!1,o&&typeof o!="string",!1);l.push(m)}r[s]=mo(s,c,l)}),r}function Rl({_novip:t},e,n){t.verno=e.version/10;let r=t._dbSchema=Rs(t,e,n);t._storeNames=wi(e.objectStoreNames,0),pi(t,[t._allTables],Ke(r),r)}function Pl(t,e){let n=Rs(t,t.idbdb,e),r=yo(n,t._dbSchema);return!(r.add.length||r.change.some(i=>i.add.length||i.change.length))}function ws({_novip:t},e,n){let r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){let s=r[i],a=n.objectStore(s);t._hasGetAll="getAll"in a;for(let o=0;o<a.indexNames.length;++o){let c=a.indexNames[o],l=a.index(c).keyPath,m=typeof l=="string"?l:"["+wi(l).join("+")+"]";if(e[s]){let p=e[s].idxByName[m];p&&(p.name=c,delete e[s].idxByName[m],e[s].idxByName[c]=p)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Fe.WorkerGlobalScope&&Fe instanceof Fe.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}function Bl(t){return t.split(",").map((e,n)=>{e=e.trim();let r=e.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return ys(r,i||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),tt(i),n===0)})}var bs=class{_parseStoresSpec(e,n){Ke(e).forEach(r=>{if(e[r]!==null){var i=Bl(e[r]),s=i.shift();if(s.multi)throw new ie.Schema("Primary key cannot be multi-valued");i.forEach(a=>{if(a.auto)throw new ie.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new ie.Schema("Index must have a name and cannot be an empty string")}),n[r]=mo(r,s,i)}})}stores(e){let n=this.db;this._cfg.storesSource=this._cfg.storesSource?at(this._cfg.storesSource,e):e;let r=n._versions,i={},s={};return r.forEach(a=>{at(i,a._cfg.storesSource),s=a._cfg.dbschema={},a._parseStoresSpec(i,s)}),n._dbSchema=s,gs(n,[n._allTables,n,n.Transaction.prototype]),pi(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],Ke(s),s),n._storeNames=Ke(s),this}upgrade(e){return this._cfg.contentUpgrade=Ns(this._cfg.contentUpgrade||Ae,e),this}};function Vl(t){return pr(bs.prototype,function(n){this.db=t,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Ps(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new We(Si,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Bs(t){return t&&typeof t.databases=="function"}function Ul({indexedDB:t,IDBKeyRange:e}){return Bs(t)?Promise.resolve(t.databases()).then(n=>n.map(r=>r.name).filter(r=>r!==Si)):Ps(t,e).toCollection().primaryKeys()}function Wl({indexedDB:t,IDBKeyRange:e},n){!Bs(t)&&n!==Si&&Ps(t,e).put({name:n}).catch(Ae)}function Kl({indexedDB:t,IDBKeyRange:e},n){!Bs(t)&&n!==Si&&Ps(t,e).delete(n).catch(Ae)}function Ts(t){return nn(function(){return X.letThrough=!0,t()})}function jl(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var e;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};e=setInterval(r,100),r()}).finally(function(){return clearInterval(e)})}function $l(t){let e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?ze(e.dbOpenError):t);Vt&&(e.openCanceller._stackHolder=Sn()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;let r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new ie.DatabaseClosed("db.open() was cancelled")}let s=e.dbReadyResolve,a=null,o=!1;return H.race([r,(typeof navigator>"u"?H.resolve():jl()).then(()=>new H((c,l)=>{if(i(),!n)throw new ie.MissingAPI;let m=t.name,p=e.autoSchema?n.open(m):n.open(m,Math.round(t.verno*10));if(!p)throw new ie.MissingAPI;p.onerror=Bt(l),p.onblocked=Le(t._fireOnBlocked),p.onupgradeneeded=Le(w=>{if(a=p.transaction,e.autoSchema&&!t._options.allowEmptyDB){p.onerror=or,a.abort(),p.result.close();let T=n.deleteDatabase(m);T.onsuccess=T.onerror=Le(()=>{l(new ie.NoSuchDatabase(`Database ${m} doesnt exist`))})}else{a.onerror=Bt(l);var g=w.oldVersion>Math.pow(2,62)?0:w.oldVersion;o=g<1,t._novip.idbdb=p.result,Cl(t,g/10,a,l)}},l),p.onsuccess=Le(()=>{a=null;let w=t._novip.idbdb=p.result,g=wi(w.objectStoreNames);if(g.length>0)try{let T=w.transaction(Ol(g),"readonly");e.autoSchema?Rl(t,w,T):(ws(t,t._dbSchema,T),Pl(t,T)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Fs(t,T)}catch{}nr.push(t),w.onversionchange=Le(T=>{e.vcFired=!0,t.on("versionchange").fire(T)}),w.onclose=Le(T=>{t.on("close").fire(T)}),o&&Wl(t._deps,m),c()},l)}))]).then(()=>(i(),e.onReadyBeingFired=[],H.resolve(Ts(()=>t.on.ready.fire(t.vip))).then(function c(){if(e.onReadyBeingFired.length>0){let l=e.onReadyBeingFired.reduce(Ns,Ae);return e.onReadyBeingFired=[],H.resolve(Ts(()=>l(t.vip))).then(c)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(c=>{e.dbOpenError=c;try{a&&a.abort()}catch{}return r===e.openCanceller&&t._close(),ze(c)}).finally(()=>{e.openComplete=!0,s()})}function Ss(t){var e=a=>t.next(a),n=a=>t.throw(a),r=s(e),i=s(n);function s(a){return o=>{var c=a(o),l=c.value;return c.done?l:!l||typeof l.then!="function"?tt(l)?Promise.all(l).then(r,i):r(l):l.then(r,i)}}return s(e)()}function Hl(t,e,n){var r=arguments.length;if(r<2)throw new ie.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var s=Za(i);return[t,s,n]}function po(t,e,n,r,i){return H.resolve().then(()=>{let s=X.transless||X,a=t._createTransaction(e,n,t._dbSchema,r),o={trans:a,transless:s};if(r)a.idbtrans=r.idbtrans;else try{a.create(),t._state.PR1398_maxLoop=3}catch(p){return p.name===As.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>po(t,e,n,null,i))):ze(p)}let c=Is(i);c&&Pn();let l,m=H.follow(()=>{if(l=i.call(a,a),l)if(c){var p=qt.bind(null,null);l.then(p,p)}else typeof l.next=="function"&&typeof l.throw=="function"&&(l=Ss(l))},o);return(l&&typeof l.then=="function"?H.resolve(l).then(p=>a.active?p:ze(new ie.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):m.then(()=>l)).then(p=>(r&&a._resolve(),a._completion.then(()=>p))).catch(p=>(a._reject(p),ze(p)))})}function ni(t,e,n){let r=tt(t)?t.slice():[t];for(let i=0;i<n;++i)r.push(e);return r}function zl(t){return Ee(j({},t),{table(e){let n=t.table(e),{schema:r}=n,i={},s=[];function a(w,g,T){let S=rr(w),k=i[S]=i[S]||[],O=w==null?0:typeof w=="string"?1:w.length,D=g>0,E=Ee(j({},T),{isVirtual:D,keyTail:g,keyLength:O,extractKey:ps(w),unique:!D&&T.unique});if(k.push(E),E.isPrimaryKey||s.push(E),O>1){let I=O===2?w[0]:w.slice(0,O-1);a(I,g+1,T)}return k.sort((I,N)=>I.keyTail-N.keyTail),E}let o=a(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[o];for(let w of r.indexes)a(w.keyPath,0,w);function c(w){let g=i[rr(w)];return g&&g[0]}function l(w,g){return{type:w.type===1?2:w.type,lower:ni(w.lower,w.lowerOpen?t.MAX_KEY:t.MIN_KEY,g),lowerOpen:!0,upper:ni(w.upper,w.upperOpen?t.MIN_KEY:t.MAX_KEY,g),upperOpen:!0}}function m(w){let g=w.query.index;return g.isVirtual?Ee(j({},w),{query:{index:g,range:l(w.query.range,g.keyTail)}}):w}return Ee(j({},n),{schema:Ee(j({},r),{primaryKey:o,indexes:s,getIndexByKeyPath:c}),count(w){return n.count(m(w))},query(w){return n.query(m(w))},openCursor(w){let{keyTail:g,isVirtual:T,keyLength:S}=w.query.index;if(!T)return n.openCursor(w);function k(O){function D(I){I!=null?O.continue(ni(I,w.reverse?t.MAX_KEY:t.MIN_KEY,g)):w.unique?O.continue(O.key.slice(0,S).concat(w.reverse?t.MIN_KEY:t.MAX_KEY,g)):O.continue()}return Object.create(O,{continue:{value:D},continuePrimaryKey:{value(I,N){O.continuePrimaryKey(ni(I,t.MAX_KEY,g),N)}},primaryKey:{get(){return O.primaryKey}},key:{get(){let I=O.key;return S===1?I[0]:I.slice(0,S)}},value:{get(){return O.value}}})}return n.openCursor(m(w)).then(O=>O&&k(O))}})}})}var Zl={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:zl};function Vs(t,e,n,r){return n=n||{},r=r||"",Ke(t).forEach(i=>{if(!yt(e,i))n[r+i]=void 0;else{var s=t[i],a=e[i];if(typeof s=="object"&&typeof a=="object"&&s&&a){let o=Xi(s),c=Xi(a);o!==c?n[r+i]=e[i]:o==="Object"?Vs(s,a,n,r+i+"."):s!==a&&(n[r+i]=e[i])}else s!==a&&(n[r+i]=e[i])}}),Ke(e).forEach(i=>{yt(t,i)||(n[r+i]=e[i])}),n}function Yl(t,e){return e.type==="delete"?e.keys:e.keys||e.values.map(t.extractKey)}var ql={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>Ee(j({},t),{table(e){let n=t.table(e),{primaryKey:r}=n.schema;return Ee(j({},n),{mutate(s){let a=X.trans,{deleting:o,creating:c,updating:l}=a.table(e).hook;switch(s.type){case"add":if(c.fire===Ae)break;return a._promise("readwrite",()=>m(s),!0);case"put":if(c.fire===Ae&&l.fire===Ae)break;return a._promise("readwrite",()=>m(s),!0);case"delete":if(o.fire===Ae)break;return a._promise("readwrite",()=>m(s),!0);case"deleteRange":if(o.fire===Ae)break;return a._promise("readwrite",()=>p(s),!0)}return n.mutate(s);function m(g){let T=X.trans,S=g.keys||Yl(r,g);if(!S)throw new Error("Keys missing");return g=g.type==="add"||g.type==="put"?Ee(j({},g),{keys:S}):j({},g),g.type!=="delete"&&(g.values=[...g.values]),g.keys&&(g.keys=[...g.keys]),Gl(n,g,S).then(k=>{let O=S.map((D,E)=>{let I=k[E],N={onerror:null,onsuccess:null};if(g.type==="delete")o.fire.call(N,D,I,T);else if(g.type==="add"||I===void 0){let L=c.fire.call(N,D,g.values[E],T);D==null&&L!=null&&(D=L,g.keys[E]=D,r.outbound||Dt(g.values[E],r.keyPath,D))}else{let L=Vs(I,g.values[E]),B=l.fire.call(N,L,D,I,T);if(B){let z=g.values[E];Object.keys(B).forEach(v=>{yt(z,v)?z[v]=B[v]:Dt(z,v,B[v])})}}return N});return n.mutate(g).then(({failures:D,results:E,numFailures:I,lastResult:N})=>{for(let L=0;L<S.length;++L){let B=E?E[L]:S[L],z=O[L];B==null?z.onerror&&z.onerror(D[L]):z.onsuccess&&z.onsuccess(g.type==="put"&&k[L]?g.values[L]:B)}return{failures:D,results:E,numFailures:I,lastResult:N}}).catch(D=>(O.forEach(E=>E.onerror&&E.onerror(D)),Promise.reject(D)))})}function p(g){return w(g.trans,g.range,1e4)}function w(g,T,S){return n.query({trans:g,values:!1,query:{index:r,range:T},limit:S}).then(({result:k})=>m({type:"delete",keys:k,trans:g}).then(O=>O.numFailures>0?Promise.reject(O.failures[0]):k.length<S?{failures:[],numFailures:0,lastResult:void 0}:w(g,Ee(j({},T),{lower:k[k.length-1],lowerOpen:!0}),S)))}}})}})};function Gl(t,e,n){return e.type==="add"?Promise.resolve([]):t.getMany({trans:e.trans,keys:n,cache:"immutable"})}function go(t,e,n){try{if(!e||e.keys.length<t.length)return null;let r=[];for(let i=0,s=0;i<e.keys.length&&s<t.length;++i)st(e.keys[i],t[s])===0&&(r.push(n?fr(e.values[i]):e.values[i]),++s);return r.length===t.length?r:null}catch{return null}}var Jl={stack:"dbcore",level:-1,create:t=>({table:e=>{let n=t.table(e);return Ee(j({},n),{getMany:r=>{if(!r.cache)return n.getMany(r);let i=go(r.keys,r.trans._cache,r.cache==="clone");return i?H.resolve(i):n.getMany(r).then(s=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?fr(s):s},s))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))})}})};function Us(t){return!("from"in t)}var $t=function(t,e){if(this)at(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0});else{let n=new $t;return t&&"d"in t&&at(n,t),n}};Fn($t.prototype,{add(t){return gi(this,t),this},addKey(t){return cr(this,t,t),this},addKeys(t){return t.forEach(e=>cr(this,e,e)),this},[es](){return Es(this)}});function cr(t,e,n){let r=st(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Us(t))return at(t,{from:e,to:n,d:1});let i=t.l,s=t.r;if(st(n,t.from)<0)return i?cr(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},Ua(t);if(st(e,t.to)>0)return s?cr(s,e,n):t.r={from:e,to:n,d:1,l:null,r:null},Ua(t);st(e,t.from)<0&&(t.from=e,t.l=null,t.d=s?s.d+1:1),st(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);let a=!t.r;i&&!t.l&&gi(t,i),s&&a&&gi(t,s)}function gi(t,e){function n(r,{from:i,to:s,l:a,r:o}){cr(r,i,s),a&&n(r,a),o&&n(r,o)}Us(e)||n(t,e)}function Ql(t,e){let n=Es(e),r=n.next();if(r.done)return!1;let i=r.value,s=Es(t),a=s.next(i.from),o=a.value;for(;!r.done&&!a.done;){if(st(o.from,i.to)<=0&&st(o.to,i.from)>=0)return!0;st(i.from,o.from)<0?i=(r=n.next(o.from)).value:o=(a=s.next(i.from)).value}return!1}function Es(t){let e=Us(t)?null:{s:0,n:t};return{next(n){let r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&st(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||st(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function Ua(t){var e,n;let r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){let s=i==="r"?"l":"r",a=j({},t),o=t[i];t.from=o.from,t.to=o.to,t[i]=o[i],a[i]=o[s],t[s]=a,a.d=Wa(a)}t.d=Wa(t)}function Wa({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}var Xl={stack:"dbcore",level:0,create:t=>{let e=t.schema.name,n=new $t(t.MIN_KEY,t.MAX_KEY);return Ee(j({},t),{table:r=>{let i=t.table(r),{schema:s}=i,{primaryKey:a}=s,{extractKey:o,outbound:c}=a,l=Ee(j({},i),{mutate:w=>{let g=w.trans,T=g.mutatedParts||(g.mutatedParts={}),S=L=>{let B=`idb://${e}/${r}/${L}`;return T[B]||(T[B]=new $t)},k=S(""),O=S(":dels"),{type:D}=w,[E,I]=w.type==="deleteRange"?[w.range]:w.type==="delete"?[w.keys]:w.values.length<50?[[],w.values]:[],N=w.trans._cache;return i.mutate(w).then(L=>{if(tt(E)){D!=="delete"&&(E=L.results),k.addKeys(E);let B=go(E,N);!B&&D!=="add"&&O.addKeys(E),(B||I)&&ec(S,s,B,I)}else if(E){let B={from:E.lower,to:E.upper};O.add(B),k.add(B)}else k.add(n),O.add(n),s.indexes.forEach(B=>S(B.name).add(n));return L})}}),m=({query:{index:w,range:g}})=>{var T,S;return[w,new $t((T=g.lower)!==null&&T!==void 0?T:t.MIN_KEY,(S=g.upper)!==null&&S!==void 0?S:t.MAX_KEY)]},p={get:w=>[a,new $t(w.key)],getMany:w=>[a,new $t().addKeys(w.keys)],count:m,query:m,openCursor:m};return Ke(p).forEach(w=>{l[w]=function(g){let{subscr:T}=X;if(T){let S=I=>{let N=`idb://${e}/${r}/${I}`;return T[N]||(T[N]=new $t)},k=S(""),O=S(":dels"),[D,E]=p[w](g);if(S(D.name||"").add(E),!D.isPrimaryKey)if(w==="count")O.add(n);else{let I=w==="query"&&c&&g.values&&i.query(Ee(j({},g),{values:!1}));return i[w].apply(this,arguments).then(N=>{if(w==="query"){if(c&&g.values)return I.then(({result:B})=>(k.addKeys(B),N));let L=g.values?N.result.map(o):N.result;g.values?k.addKeys(L):O.addKeys(L)}else if(w==="openCursor"){let L=N,B=g.values;return L&&Object.create(L,{key:{get(){return O.addKey(L.primaryKey),L.key}},primaryKey:{get(){let z=L.primaryKey;return O.addKey(z),z}},value:{get(){return B&&k.addKey(L.primaryKey),L.value}}})}return N})}}return i[w].apply(this,arguments)}}),l}})}};function ec(t,e,n,r){function i(s){let a=t(s.name||"");function o(l){return l!=null?s.extractKey(l):null}let c=l=>s.multiEntry&&tt(l)?l.forEach(m=>a.addKey(m)):a.addKey(l);(n||r).forEach((l,m)=>{let p=n&&o(n[m]),w=r&&o(r[m]);st(p,w)!==0&&(p!=null&&c(p),w!=null&&c(w))})}e.indexes.forEach(i)}var We=class t{constructor(e,n){this._middlewares={},this.verno=0;let r=t.dependencies;this._options=n=j({addons:t.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};let{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;let s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ae,dbReadyPromise:null,cancelOpen:Ae,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};s.dbReadyPromise=new H(a=>{s.dbReadyResolve=a}),s.openCanceller=new H((a,o)=>{s.cancelOpen=o}),this._state=s,this.name=e,this.on=yr(this,"populate","blocked","versionchange","close",{ready:[Ns,Ae]}),this.on.ready.subscribe=ja(this.on.ready.subscribe,a=>(o,c)=>{t.vip(()=>{let l=this._state;if(l.openComplete)l.dbOpenError||H.resolve().then(o),c&&a(o);else if(l.onReadyBeingFired)l.onReadyBeingFired.push(o),c&&a(o);else{a(o);let m=this;c||a(function p(){m.on.ready.unsubscribe(o),m.on.ready.unsubscribe(p)})}})}),this.Collection=gl(this),this.Table=dl(this),this.Transaction=_l(this),this.Version=Vl(this),this.WhereClause=El(this),this.on("versionchange",a=>{a.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",a=>{!a.newVersion||a.newVersion<a.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a.oldVersion/10}`)}),this._maxKey=lr(n.IDBKeyRange),this._createTransaction=(a,o,c,l)=>new this.Transaction(a,o,c,this._options.chromeTransactionDurability,l),this._fireOnBlocked=a=>{this.on("blocked").fire(a),nr.filter(o=>o.name===this.name&&o!==this&&!o._state.vcFired).map(o=>o.on("versionchange").fire(a))},this.use(Zl),this.use(ql),this.use(Xl),this.use(Jl),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(a=>a(this))}version(e){if(isNaN(e)||e<.1)throw new ie.Type("Given version is not a positive number");if(e=Math.round(e*10)/10,this.idbdb||this._state.isBeingOpened)throw new ie.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);let n=this._versions;var r=n.filter(i=>i._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(Dl),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||X.letThrough||this._vip)?e():new H((n,r)=>{if(this._state.openComplete)return r(new ie.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen){r(new ie.DatabaseClosed);return}this.open().catch(Ae)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:i}){i&&this.unuse({stack:e,name:i});let s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:n,level:r??10,name:i}),s.sort((a,o)=>a.level-o.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(i=>r?i.create!==r:n?i.name!==n:!1)),this}open(){return $l(this)}_close(){let e=this._state,n=nr.indexOf(this);if(n>=0&&nr.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new H(r=>{e.dbReadyResolve=r}),e.openCanceller=new H((r,i)=>{e.cancelOpen=i})}close(){this._close();let e=this._state;this._options.autoOpen=!1,e.dbOpenError=new ie.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){let e=arguments.length>0,n=this._state;return new H((r,i)=>{let s=()=>{this.close();var a=this._deps.indexedDB.deleteDatabase(this.name);a.onsuccess=Le(()=>{Kl(this._deps,this.name),r()}),a.onerror=Bt(i),a.onblocked=this._fireOnBlocked};if(e)throw new ie.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){let e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Ke(this._allTables).map(e=>this._allTables[e])}transaction(){let e=Hl.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let i=X.trans;(!i||i.db!==this||e.indexOf("!")!==-1)&&(i=null);let s=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");let a,o;try{if(o=n.map(l=>{var m=l instanceof this.Table?l.name:l;if(typeof m!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return m}),e=="r"||e===Zi)a=Zi;else if(e=="rw"||e==Yi)a=Yi;else throw new ie.InvalidArgument("Invalid transaction mode: "+e);if(i){if(i.mode===Zi&&a===Yi)if(s)i=null;else throw new ie.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i&&o.forEach(l=>{if(i&&i.storeNames.indexOf(l)===-1)if(s)i=null;else throw new ie.SubTransaction("Table "+l+" not included in parent transaction.")}),s&&i&&!i.active&&(i=null)}}catch(l){return i?i._promise(null,(m,p)=>{p(l)}):ze(l)}let c=po.bind(null,this,a,o,i,r);return i?i._promise(a,c,"lock"):X.trans?Bn(X.transless,()=>this._whenReady(c)):this._whenReady(c)}table(e){if(!yt(this._allTables,e))throw new ie.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}},tc=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",_s=class{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(!e||typeof e=="function"?{next:e,error:n,complete:r}:e)}[tc](){return this}};function vo(t,e){return Ke(e).forEach(n=>{let r=t[n]||(t[n]=new $t);gi(r,e[n])}),t}function nc(t){let e=!1,n,r=new _s(i=>{let s=Is(t);function a(k){s&&Pn();let O=()=>nn(t,{subscr:k,trans:null}),D=X.trans?Bn(X.transless,O):O();return s&&D.then(qt,qt),D}let o=!1,c={},l={},m={get closed(){return o},unsubscribe:()=>{o=!0,sn.storagemutated.unsubscribe(T)}};i.start&&i.start(m);let p=!1,w=!1;function g(){return Ke(l).some(k=>c[k]&&Ql(c[k],l[k]))}let T=k=>{vo(c,k),g()&&S()},S=()=>{if(p||o)return;c={};let k={},O=a(k);w||(sn(ur,T),w=!0),p=!0,Promise.resolve(O).then(D=>{e=!0,n=D,p=!1,!o&&(g()?S():(c={},l=k,i.next&&i.next(D)))},D=>{p=!1,e=!1,i.error&&i.error(D),m.unsubscribe()})};return S(),m});return r.hasValue=()=>e,r.getValue=()=>n,r}var Os;try{Os={indexedDB:Fe.indexedDB||Fe.mozIndexedDB||Fe.webkitIndexedDB||Fe.msIndexedDB,IDBKeyRange:Fe.IDBKeyRange||Fe.webkitIDBKeyRange}}catch{Os={indexedDB:null,IDBKeyRange:null}}var pn=We;Fn(pn,Ee(j({},bi),{delete(t){return new pn(t,{addons:[]}).delete()},exists(t){return new pn(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1)},getDatabaseNames(t){try{return Ul(pn.dependencies).then(t)}catch{return ze(new ie.MissingAPI)}},defineClass(){function t(e){at(this,e)}return t},ignoreTransaction(t){return X.trans?Bn(X.transless,t):t()},vip:Ts,async:function(t){return function(){try{var e=Ss(t.apply(this,arguments));return!e||typeof e.then!="function"?H.resolve(e):e}catch(n){return ze(n)}}},spawn:function(t,e,n){try{var r=Ss(t.apply(n,e||[]));return!r||typeof r.then!="function"?H.resolve(r):r}catch(i){return ze(i)}},currentTransaction:{get:()=>X.trans||null},waitFor:function(t,e){let n=H.resolve(typeof t=="function"?pn.ignoreTransaction(t):t).timeout(e||6e4);return X.trans?X.trans.waitFor(n):n},Promise:H,debug:{get:()=>Vt,set:t=>{qa(t,t==="dexie"?()=>!0:lo)}},derive:Ln,extend:at,props:Fn,override:ja,Events:yr,on:sn,liveQuery:nc,extendObservabilitySet:vo,getByKeyPath:Zt,setByKeyPath:Dt,delByKeyPath:Vu,shallowClone:za,deepClone:fr,getObjectDiff:Vs,cmp:st,asap:$a,minKey:fs,addons:[],connections:nr,errnames:As,dependencies:Os,semVer:Fa,version:Fa.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,n*2))}));pn.maxKey=lr(pn.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(sn(ur,t=>{if(!zt){let e;Ti?(e=document.createEvent("CustomEvent"),e.initCustomEvent(tn,!0,!0,t)):e=new CustomEvent(tn,{detail:t}),zt=!0,dispatchEvent(e),zt=!1}}),addEventListener(tn,({detail:t})=>{zt||vi(t)}));function vi(t){let e=zt;try{zt=!0,sn.storagemutated.fire(t)}finally{zt=e}}var zt=!1;if(typeof BroadcastChannel<"u"){let t=new BroadcastChannel(tn);typeof t.unref=="function"&&t.unref(),sn(ur,e=>{zt||t.postMessage(e)}),t.onmessage=e=>{e.data&&vi(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){sn(ur,e=>{try{zt||(typeof localStorage<"u"&&localStorage.setItem(tn,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:tn,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===tn){let n=JSON.parse(e.newValue);n&&vi(n.changedParts)}});let t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",rc)}function rc({data:t}){t&&t.type===tn&&vi(t.changedParts)}H.rejectionMapper=Yu;qa(Vt,lo);function an(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(m){try{l(r.next(m))}catch(p){a(p)}}function c(m){try{l(r.throw(m))}catch(p){a(p)}}function l(m){m.done?s(m.value):i(m.value).then(o,c)}l((r=r.apply(t,e||[])).next())})}function Ct(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(l){return function(m){return c([l,m])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(m){l=[6,m],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function ic(t){var e=[t.schema.primKey].concat(t.schema.indexes);return e.map(function(n){return n.src}).join(",")}function sc(t){for(var e={},n=0,r=t.tables;n<r.length;n++){var i=r[n];e[i.name]=i.schema}return e}function wo(t,e){return new Promise(function(n,r){var i=new FileReader;i.onabort=function(s){return r(new Error("file read aborted"))},i.onerror=function(s){return r(s.target.error)},i.onload=function(s){return n(s.target.result)},e==="binary"?i.readAsArrayBuffer(t):i.readAsText(t)})}function bo(t,e){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var n=new FileReaderSync,r=e==="binary"?n.readAsArrayBuffer(t):n.readAsText(t);return r}var Ks=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $s(t,e){return e={exports:{}},t(e,e.exports),e.exports}var _i=$s(function(t,e){(function(n,r){t.exports=r()})(Ks,function(){function n(A){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(C){return typeof C}:n=function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},n(A)}function r(A,C,M,F,W,ye,ve){try{var me=A[ye](ve),J=me.value}catch(qe){M(qe);return}me.done?C(J):Promise.resolve(J).then(F,W)}function i(A){return function(){var C=this,M=arguments;return new Promise(function(F,W){var ye=A.apply(C,M);function ve(J){r(ye,F,W,ve,me,"next",J)}function me(J){r(ye,F,W,ve,me,"throw",J)}ve(void 0)})}}function s(A,C){if(!(A instanceof C))throw new TypeError("Cannot call a class as a function")}function a(A,C){for(var M=0;M<C.length;M++){var F=C[M];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(A,F.key,F)}}function o(A,C,M){return C&&a(A.prototype,C),M&&a(A,M),A}function c(A,C,M){return C in A?Object.defineProperty(A,C,{value:M,enumerable:!0,configurable:!0,writable:!0}):A[C]=M,A}function l(A,C){var M=Object.keys(A);if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(A);C&&(F=F.filter(function(W){return Object.getOwnPropertyDescriptor(A,W).enumerable})),M.push.apply(M,F)}return M}function m(A){for(var C=1;C<arguments.length;C++){var M=arguments[C]!=null?arguments[C]:{};C%2?l(Object(M),!0).forEach(function(F){c(A,F,M[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(M)):l(Object(M)).forEach(function(F){Object.defineProperty(A,F,Object.getOwnPropertyDescriptor(M,F))})}return A}function p(A,C){return T(A)||k(A,C)||D()}function w(A){return g(A)||S(A)||O()}function g(A){if(Array.isArray(A)){for(var C=0,M=new Array(A.length);C<A.length;C++)M[C]=A[C];return M}}function T(A){if(Array.isArray(A))return A}function S(A){if(Symbol.iterator in Object(A)||Object.prototype.toString.call(A)==="[object Arguments]")return Array.from(A)}function k(A,C){if(Symbol.iterator in Object(A)||Object.prototype.toString.call(A)==="[object Arguments]"){var M=[],F=!0,W=!1,ye=void 0;try{for(var ve=A[Symbol.iterator](),me;!(F=(me=ve.next()).done)&&(M.push(me.value),!(C&&M.length===C));F=!0);}catch(J){W=!0,ye=J}finally{try{!F&&ve.return!=null&&ve.return()}finally{if(W)throw ye}}return M}}function O(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function D(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var E=function A(C){s(this,A),this.p=new Promise(C)};E.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(E.prototype[Symbol.toStringTag]="TypesonPromise"),E.prototype.then=function(A,C){var M=this;return new E(function(F,W){M.p.then(function(ye){F(A?A(ye):ye)}).catch(function(ye){return C?C(ye):Promise.reject(ye)}).then(F,W)})},E.prototype.catch=function(A){return this.then(null,A)},E.resolve=function(A){return new E(function(C){C(A)})},E.reject=function(A){return new E(function(C,M){M(A)})},["all","race"].forEach(function(A){E[A]=function(C){return new E(function(M,F){Promise[A](C.map(function(W){return W&&W.constructor&&W.constructor.__typeson__type__==="TypesonPromise"?W.p:W})).then(M,F)})}});var I={},N=I.toString,L={}.hasOwnProperty,B=Object.getPrototypeOf,z=L.toString;function v(A,C){return ae(A)&&typeof A.then=="function"&&(!C||typeof A.catch=="function")}function d(A){return N.call(A).slice(8,-1)}function x(A,C){if(!A||n(A)!=="object")return!1;var M=B(A);if(!M)return C===null;var F=L.call(M,"constructor")&&M.constructor;return typeof F!="function"?C===null:C===F||C!==null&&z.call(F)===z.call(C)||typeof C=="function"&&typeof F.__typeson__type__=="string"&&F.__typeson__type__===C.__typeson__type__}function _(A){if(!A||d(A)!=="Object")return!1;var C=B(A);return C?x(A,Object):!0}function K(A){if(!A||d(A)!=="Object")return!1;var C=B(A);return C?x(A,Object)||K(C):!0}function ae(A){return A&&n(A)==="object"}function le(A){return A.replace(/~/g,"~0").replace(/\./g,"~1")}function ue(A){return A.replace(/~1/g,".").replace(/~0/g,"~")}function de(A,C){if(C==="")return A;var M=C.indexOf(".");if(M>-1){var F=A[ue(C.slice(0,M))];return F===void 0?void 0:de(F,C.slice(M+1))}return A[ue(C)]}function se(A,C,M){if(C==="")return M;var F=C.indexOf(".");if(F>-1){var W=A[ue(C.slice(0,F))];return se(W,C.slice(F+1),M)}return A[ue(C)]=M,A}function $e(A){return A===null?"null":Array.isArray(A)?"array":n(A)}var nt=Object.keys,Ze=Array.isArray,He={}.hasOwnProperty,Ot=["type","replaced","iterateIn","iterateUnsetNumeric"];function G(A,C){if(A.keypath==="")return-1;var M=A.keypath.match(/\./g)||0,F=C.keypath.match(/\./g)||0;return M&&(M=M.length),F&&(F=F.length),M>F?-1:M<F?1:A.keypath<C.keypath?-1:A.keypath>C.keypath}var Oe=function(){function A(C){s(this,A),this.options=C,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return o(A,[{key:"stringify",value:function(M,F,W,ye){ye=m({},this.options,{},ye,{stringification:!0});var ve=this.encapsulate(M,null,ye);return Ze(ve)?JSON.stringify(ve[0],F,W):ve.then(function(me){return JSON.stringify(me,F,W)})}},{key:"stringifySync",value:function(M,F,W,ye){return this.stringify(M,F,W,m({throwOnBadSyncType:!0},ye,{sync:!0}))}},{key:"stringifyAsync",value:function(M,F,W,ye){return this.stringify(M,F,W,m({throwOnBadSyncType:!0},ye,{sync:!1}))}},{key:"parse",value:function(M,F,W){return W=m({},this.options,{},W,{parse:!0}),this.revive(JSON.parse(M,F),W)}},{key:"parseSync",value:function(M,F,W){return this.parse(M,F,m({throwOnBadSyncType:!0},W,{sync:!0}))}},{key:"parseAsync",value:function(M,F,W){return this.parse(M,F,m({throwOnBadSyncType:!0},W,{sync:!1}))}},{key:"specialTypeNames",value:function(M,F){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return W.returnTypeNames=!0,this.encapsulate(M,F,W)}},{key:"rootTypeName",value:function(M,F){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return W.iterateNone=!0,this.encapsulate(M,F,W)}},{key:"encapsulate",value:function(M,F,W){W=m({sync:!0},this.options,{},W);var ye=W,ve=ye.sync,me=this,J={},qe=[],ut=[],ct=[],xt="cyclic"in W?W.cyclic:!0,It=W,Wt=It.encapsulateObserver,ft=Ie("",M,xt,F||{},ct);function kt(Y){var h=Object.values(J);if(W.iterateNone)return h.length?h[0]:A.getJSONType(Y);if(h.length){if(W.returnTypeNames)return w(new Set(h));!Y||!_(Y)||He.call(Y,"$types")?Y={$:Y,$types:{$:J}}:Y.$types=J}else ae(Y)&&He.call(Y,"$types")&&(Y={$:Y,$types:!0});return W.returnTypeNames?!1:Y}function Be(Y,h){return xe.apply(this,arguments)}function xe(){return xe=i(regeneratorRuntime.mark(function Y(h,u){var f;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,Promise.all(u.map(function(R){return R[1].p}));case 2:return f=b.sent,b.next=5,Promise.all(f.map(function(){var R=i(regeneratorRuntime.mark(function V(q){var $,ne,ce,fe,Se,ge,pe,De,Ce,oe,Ge,Z,P,ee;return regeneratorRuntime.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if($=[],ne=u.splice(0,1),ce=p(ne,1),fe=ce[0],Se=p(fe,7),ge=Se[0],pe=Se[2],De=Se[3],Ce=Se[4],oe=Se[5],Ge=Se[6],Z=Ie(ge,q,pe,De,$,!0,Ge),P=x(Z,E),!(ge&&P)){re.next=11;break}return re.next=8,Z.p;case 8:return ee=re.sent,Ce[oe]=ee,re.abrupt("return",Be(h,$));case 11:return ge?Ce[oe]=Z:P?h=Z.p:h=Z,re.abrupt("return",Be(h,$));case 13:case"end":return re.stop()}},V)}));return function(V){return R.apply(this,arguments)}}()));case 5:return b.abrupt("return",h);case 6:case"end":return b.stop()}},Y)})),xe.apply(this,arguments)}function be(Y,h,u){Object.assign(Y,h);var f=Ot.map(function(y){var b=Y[y];return delete Y[y],b});u(),Ot.forEach(function(y,b){Y[y]=f[b]})}function Ie(Y,h,u,f,y,b,R){var V,q={},$=n(h),ne=Wt?function(P){var ee=R||f.type||A.getJSONType(h);Wt(Object.assign(P||q,{keypath:Y,value:h,cyclic:u,stateObj:f,promisesData:y,resolvingTypesonPromise:b,awaitingTypesonPromise:x(h,E)},{type:ee}))}:null;if(["string","boolean","number","undefined"].includes($))return h===void 0||$==="number"&&(isNaN(h)||h===-1/0||h===1/0)?(f.replaced?V=h:V=Ve(Y,h,f,y,!1,b,ne),V!==h&&(q={replaced:V})):V=h,ne&&ne(),V;if(h===null)return ne&&ne(),h;if(u&&!f.iterateIn&&!f.iterateUnsetNumeric&&h&&n(h)==="object"){var ce=qe.indexOf(h);if(ce<0)u===!0&&(qe.push(h),ut.push(Y));else return J[Y]="#",ne&&ne({cyclicKeypath:ut[ce]}),"#"+ut[ce]}var fe=_(h),Se=Ze(h),ge=(fe||Se)&&(!me.plainObjectReplacers.length||f.replaced)||f.iterateIn?h:Ve(Y,h,f,y,fe||Se,null,ne),pe;if(ge!==h?(V=ge,q={replaced:ge}):Y===""&&x(h,E)?(y.push([Y,h,u,f,void 0,void 0,f.type]),V=h):Se&&f.iterateIn!=="object"||f.iterateIn==="array"?(pe=new Array(h.length),q={clone:pe}):!["function","symbol"].includes(n(h))&&!("toJSON"in h)&&!x(h,E)&&!x(h,Promise)&&!x(h,ArrayBuffer)||fe||f.iterateIn==="object"?(pe={},f.addLength&&(pe.length=h.length),q={clone:pe}):V=h,ne&&ne(),W.iterateNone)return pe||V;if(!pe)return V;if(f.iterateIn){var De=function(ee){var Q={ownKeys:He.call(h,ee)};be(f,Q,function(){var re=Y+(Y?".":"")+le(ee),he=Ie(re,h[ee],!!u,f,y,b);x(he,E)?y.push([re,he,!!u,f,pe,ee,f.type]):he!==void 0&&(pe[ee]=he)})};for(var Ce in h)De(Ce);ne&&ne({endIterateIn:!0,end:!0})}else nt(h).forEach(function(P){var ee=Y+(Y?".":"")+le(P),Q={ownKeys:!0};be(f,Q,function(){var re=Ie(ee,h[P],!!u,f,y,b);x(re,E)?y.push([ee,re,!!u,f,pe,P,f.type]):re!==void 0&&(pe[P]=re)})}),ne&&ne({endIterateOwn:!0,end:!0});if(f.iterateUnsetNumeric){for(var oe=h.length,Ge=function(ee){if(!(ee in h)){var Q=Y+(Y?".":"")+ee,re={ownKeys:!1};be(f,re,function(){var he=Ie(Q,void 0,!!u,f,y,b);x(he,E)?y.push([Q,he,!!u,f,pe,ee,f.type]):he!==void 0&&(pe[ee]=he)})}},Z=0;Z<oe;Z++)Ge(Z);ne&&ne({endIterateUnsetNumeric:!0,end:!0})}return pe}function Ve(Y,h,u,f,y,b,R){for(var V=y?me.plainObjectReplacers:me.nonplainObjectReplacers,q=V.length;q--;){var $=V[q];if($.test(h,u)){var ne=$.type;if(me.revivers[ne]){var ce=J[Y];J[Y]=ce?[ne].concat(ce):ne}if(Object.assign(u,{type:ne,replaced:!0}),(ve||!$.replaceAsync)&&!$.replace)return R&&R({typeDetected:!0}),Ie(Y,h,xt&&"readonly",u,f,b,ne);R&&R({replacing:!0});var fe=ve||!$.replaceAsync?"replace":"replaceAsync";return Ie(Y,$[fe](h,u),xt&&"readonly",u,f,b,ne)}}return h}return ct.length?ve&&W.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(Be(ft,ct)).then(kt):!ve&&W.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():W.stringification&&ve?[kt(ft)]:ve?kt(ft):Promise.resolve(kt(ft))}},{key:"encapsulateSync",value:function(M,F,W){return this.encapsulate(M,F,m({throwOnBadSyncType:!0},W,{sync:!0}))}},{key:"encapsulateAsync",value:function(M,F,W){return this.encapsulate(M,F,m({throwOnBadSyncType:!0},W,{sync:!1}))}},{key:"revive",value:function(M,F){var W=M&&M.$types;if(!W)return M;if(W===!0)return M.$;F=m({sync:!0},this.options,{},F);var ye=F,ve=ye.sync,me=[],J={},qe=!0;W.$&&_(W.$)&&(M=M.$,W=W.$,qe=!1);var ut=this;function ct(xe,be){var Ie=ut.revivers[xe]||[],Ve=p(Ie,1),Y=Ve[0];if(!Y)throw new Error("Unregistered type: "+xe);return ve&&!("revive"in Y)?be:Y[ve&&Y.revive?"revive":!ve&&Y.reviveAsync?"reviveAsync":"revive"](be,J)}function xt(){var xe=[];if(Object.entries(W).forEach(function(be){var Ie=p(be,2),Ve=Ie[0],Y=Ie[1];Y!=="#"&&[].concat(Y).forEach(function(h){var u=ut.revivers[h]||[null,{}],f=p(u,2),y=f[1].plain;y&&(xe.push({keypath:Ve,type:h}),delete W[Ve])})}),!!xe.length)return xe.sort(G).reduce(function be(Ie,Ve){var Y=Ve.keypath,h=Ve.type;if(v(Ie))return Ie.then(function(y){return be(y,{keypath:Y,type:h})});var u=de(M,Y);if(u=ct(h,u),x(u,E))return u.then(function(y){var b=se(M,Y,y);b===y&&(M=b)});var f=se(M,Y,u);f===u&&(M=f)},void 0)}var It=[];function Wt(xe,be,Ie,Ve,Y){if(!(qe&&xe==="$types")){var h=W[xe],u=Ze(be);if(u||_(be)){var f=u?new Array(be.length):{};for(nt(be).forEach(function(ce){var fe=Wt(xe+(xe?".":"")+le(ce),be[ce],Ie||f,f,ce),Se=function(pe){return x(pe,Ye)?f[ce]=void 0:pe!==void 0&&(f[ce]=pe),pe};x(fe,E)?It.push(fe.then(function(ge){return Se(ge)})):Se(fe)}),be=f;me.length;){var y=p(me[0],4),b=y[0],R=y[1],V=y[2],q=y[3],$=de(b,R);if($!==void 0)V[q]=$;else break;me.splice(0,1)}}if(!h)return be;if(h==="#"){var ne=de(Ie,be.slice(1));return ne===void 0&&me.push([Ie,be.slice(1),Ve,Y]),ne}return[].concat(h).reduce(function ce(fe,Se){return x(fe,E)?fe.then(function(ge){return ce(ge,Se)}):ct(Se,fe)},be)}}function ft(xe){return x(xe,Ye)?void 0:xe}var kt=xt(),Be;return x(kt,E)?Be=kt.then(function(){return M}):(Be=Wt("",M,null),It.length&&(Be=E.resolve(Be).then(function(xe){return E.all([xe].concat(It))}).then(function(xe){var be=p(xe,1),Ie=be[0];return Ie}))),v(Be)?ve&&F.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():x(Be,E)?Be.p.then(ft):Be:!ve&&F.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():ve?ft(Be):Promise.resolve(ft(Be))}},{key:"reviveSync",value:function(M,F){return this.revive(M,m({throwOnBadSyncType:!0},F,{sync:!0}))}},{key:"reviveAsync",value:function(M,F){return this.revive(M,m({throwOnBadSyncType:!0},F,{sync:!1}))}},{key:"register",value:function(M,F){return F=F||{},[].concat(M).forEach(function W(ye){var ve=this;if(Ze(ye))return ye.map(function(me){return W.call(ve,me)});ye&&nt(ye).forEach(function(me){if(me==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(A.JSON_TYPES.includes(me))throw new TypeError("Plain JSON object types are reserved as type names");var J=ye[me],qe=J&&J.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,ut=qe.filter(function(Ie){return Ie.type===me});if(ut.length&&(qe.splice(qe.indexOf(ut[0]),1),delete this.revivers[me],delete this.types[me]),typeof J=="function"){var ct=J;J={test:function(Ve){return Ve&&Ve.constructor===ct},replace:function(Ve){return m({},Ve)},revive:function(Ve){return Object.assign(Object.create(ct.prototype),Ve)}}}else if(Ze(J)){var xt=J,It=p(xt,3),Wt=It[0],ft=It[1],kt=It[2];J={test:Wt,replace:ft,revive:kt}}if(!(!J||!J.test)){var Be={type:me,test:J.test.bind(J)};J.replace&&(Be.replace=J.replace.bind(J)),J.replaceAsync&&(Be.replaceAsync=J.replaceAsync.bind(J));var xe=typeof F.fallback=="number"?F.fallback:F.fallback?0:1/0;if(J.testPlainObjects?this.plainObjectReplacers.splice(xe,0,Be):this.nonplainObjectReplacers.splice(xe,0,Be),J.revive||J.reviveAsync){var be={};J.revive&&(be.revive=J.revive.bind(J)),J.reviveAsync&&(be.reviveAsync=J.reviveAsync.bind(J)),this.revivers[me]=[be,{plain:J.testPlainObjects}]}this.types[me]=J}},this)},this),this}}]),A}(),Ye=function A(){s(this,A)};return Ye.__typeson__type__="TypesonUndefined",Oe.Undefined=Ye,Oe.Promise=E,Oe.isThenable=v,Oe.toStringTag=d,Oe.hasConstructorOf=x,Oe.isObject=ae,Oe.isPlainObject=_,Oe.isUserObject=K,Oe.escapeKeyPathComponent=le,Oe.unescapeKeyPathComponent=ue,Oe.getByKeyPath=de,Oe.getJSONType=$e,Oe.JSON_TYPES=["null","boolean","number","string","array","object"],Oe})}),ac=$s(function(t,e){(function(n,r){t.exports=r()})(Ks,function(){function n(h){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function r(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")}function i(h,u){for(var f=0;f<u.length;f++){var y=u[f];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}function s(h,u,f){return u in h?Object.defineProperty(h,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):h[u]=f,h}function a(h,u){var f=Object.keys(h);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(h);u&&(y=y.filter(function(b){return Object.getOwnPropertyDescriptor(h,b).enumerable})),f.push.apply(f,y)}return f}function o(h){return function(f){if(Array.isArray(f))return c(f)}(h)||function(f){if(typeof Symbol<"u"&&Symbol.iterator in Object(f))return Array.from(f)}(h)||function(f,y){if(f){if(typeof f=="string")return c(f,y);var b=Object.prototype.toString.call(f).slice(8,-1);if(b==="Object"&&f.constructor&&(b=f.constructor.name),b==="Map"||b==="Set")return Array.from(f);if(b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return c(f,y)}}(h)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function c(h,u){(u==null||u>h.length)&&(u=h.length);for(var f=0,y=new Array(u);f<u;f++)y[f]=h[f];return y}function l(h){return(l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(h)}function m(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")}function p(h,u){for(var f=0;f<u.length;f++){var y=u[f];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(h,y.key,y)}}function w(h,u,f){return u in h?Object.defineProperty(h,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):h[u]=f,h}function g(h,u){var f=Object.keys(h);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(h);u&&(y=y.filter(function(b){return Object.getOwnPropertyDescriptor(h,b).enumerable})),f.push.apply(f,y)}return f}function T(h){for(var u=1;u<arguments.length;u++){var f=arguments[u]!=null?arguments[u]:{};u%2?g(Object(f),!0).forEach(function(y){w(h,y,f[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(f)):g(Object(f)).forEach(function(y){Object.defineProperty(h,y,Object.getOwnPropertyDescriptor(f,y))})}return h}function S(h,u){return function(y){if(Array.isArray(y))return y}(h)||function(y,b){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(y)))){var R=[],V=!0,q=!1,$=void 0;try{for(var ne,ce=y[Symbol.iterator]();!(V=(ne=ce.next()).done)&&(R.push(ne.value),!b||R.length!==b);V=!0);}catch(fe){q=!0,$=fe}finally{try{V||ce.return==null||ce.return()}finally{if(q)throw $}}return R}}(h,u)||O(h,u)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function k(h){return function(f){if(Array.isArray(f))return D(f)}(h)||function(f){if(typeof Symbol<"u"&&Symbol.iterator in Object(f))return Array.from(f)}(h)||O(h)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function O(h,u){if(h){if(typeof h=="string")return D(h,u);var f=Object.prototype.toString.call(h).slice(8,-1);return f==="Object"&&h.constructor&&(f=h.constructor.name),f==="Map"||f==="Set"?Array.from(h):f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?D(h,u):void 0}}function D(h,u){(u==null||u>h.length)&&(u=h.length);for(var f=0,y=new Array(u);f<u;f++)y[f]=h[f];return y}var E=function h(u){m(this,h),this.p=new Promise(u)};E.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(E.prototype[Symbol.toStringTag]="TypesonPromise"),E.prototype.then=function(h,u){var f=this;return new E(function(y,b){f.p.then(function(R){y(h?h(R):R)}).catch(function(R){return u?u(R):Promise.reject(R)}).then(y,b)})},E.prototype.catch=function(h){return this.then(null,h)},E.resolve=function(h){return new E(function(u){u(h)})},E.reject=function(h){return new E(function(u,f){f(h)})},["all","race"].forEach(function(h){E[h]=function(u){return new E(function(f,y){Promise[h](u.map(function(b){return b&&b.constructor&&b.constructor.__typeson__type__==="TypesonPromise"?b.p:b})).then(f,y)})}});var I={}.toString,N={}.hasOwnProperty,L=Object.getPrototypeOf,B=N.toString;function z(h,u){return _(h)&&typeof h.then=="function"&&(!u||typeof h.catch=="function")}function v(h){return I.call(h).slice(8,-1)}function d(h,u){if(!h||l(h)!=="object")return!1;var f=L(h);if(!f)return u===null;var y=N.call(f,"constructor")&&f.constructor;return typeof y!="function"?u===null:u===y||u!==null&&B.call(y)===B.call(u)||typeof u=="function"&&typeof y.__typeson__type__=="string"&&y.__typeson__type__===u.__typeson__type__}function x(h){return!(!h||v(h)!=="Object")&&(!L(h)||d(h,Object))}function _(h){return h&&l(h)==="object"}function K(h){return h.replace(/~/g,"~0").replace(/\./g,"~1")}function ae(h){return h.replace(/~1/g,".").replace(/~0/g,"~")}function le(h,u){if(u==="")return h;var f=u.indexOf(".");if(f>-1){var y=h[ae(u.slice(0,f))];return y===void 0?void 0:le(y,u.slice(f+1))}return h[ae(u)]}function ue(h,u,f){if(u==="")return f;var y=u.indexOf(".");return y>-1?ue(h[ae(u.slice(0,y))],u.slice(y+1),f):(h[ae(u)]=f,h)}function de(h,u,f){return f?u?u(h):h:(h&&h.then||(h=Promise.resolve(h)),u?h.then(u):h)}var se=Object.keys,$e=Array.isArray,nt={}.hasOwnProperty,Ze=["type","replaced","iterateIn","iterateUnsetNumeric"];function He(h){return function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];try{return Promise.resolve(h.apply(this,u))}catch(y){return Promise.reject(y)}}}function Ot(h,u){if(h.keypath==="")return-1;var f=h.keypath.match(/\./g)||0,y=u.keypath.match(/\./g)||0;return f&&(f=f.length),y&&(y=y.length),f>y?-1:f<y?1:h.keypath<u.keypath?-1:h.keypath>u.keypath}var G=function(){function h(u){m(this,h),this.options=u,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(f,y,b){return y&&p(f.prototype,y),b&&p(f,b),f}(h,[{key:"stringify",value:function(f,y,b,R){R=T(T(T({},this.options),R),{},{stringification:!0});var V=this.encapsulate(f,null,R);return $e(V)?JSON.stringify(V[0],y,b):V.then(function(q){return JSON.stringify(q,y,b)})}},{key:"stringifySync",value:function(f,y,b,R){return this.stringify(f,y,b,T(T({throwOnBadSyncType:!0},R),{},{sync:!0}))}},{key:"stringifyAsync",value:function(f,y,b,R){return this.stringify(f,y,b,T(T({throwOnBadSyncType:!0},R),{},{sync:!1}))}},{key:"parse",value:function(f,y,b){return b=T(T(T({},this.options),b),{},{parse:!0}),this.revive(JSON.parse(f,y),b)}},{key:"parseSync",value:function(f,y,b){return this.parse(f,y,T(T({throwOnBadSyncType:!0},b),{},{sync:!0}))}},{key:"parseAsync",value:function(f,y,b){return this.parse(f,y,T(T({throwOnBadSyncType:!0},b),{},{sync:!1}))}},{key:"specialTypeNames",value:function(f,y){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return b.returnTypeNames=!0,this.encapsulate(f,y,b)}},{key:"rootTypeName",value:function(f,y){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return b.iterateNone=!0,this.encapsulate(f,y,b)}},{key:"encapsulate",value:function(f,y,b){var R=He(function(Z,P){return de(Promise.all(P.map(function(ee){return ee[1].p})),function(ee){return de(Promise.all(ee.map(He(function(Q){var re=!1,he=[],ht=S(P.splice(0,1),1),Ue=S(ht[0],7),lt=Ue[0],wt=Ue[2],ke=Ue[3],bt=Ue[4],Me=Ue[5],dt=Ue[6],rt=oe(lt,Q,wt,ke,he,!0,dt),At=d(rt,E);return function(ji,qr){var An=ji();return An&&An.then?An.then(qr):qr(An)}(function(){if(lt&&At)return de(rt.p,function(Nt){return bt[Me]=Nt,re=!0,R(Z,he)})},function(Nt){return re?Nt:(lt?bt[Me]=rt:Z=At?rt.p:rt,R(Z,he))})}))),function(){return Z})})}),V=(b=T(T({sync:!0},this.options),b)).sync,q=this,$={},ne=[],ce=[],fe=[],Se=!("cyclic"in b)||b.cyclic,ge=b.encapsulateObserver,pe=oe("",f,Se,y||{},fe);function De(Z){var P=Object.values($);if(b.iterateNone)return P.length?P[0]:h.getJSONType(Z);if(P.length){if(b.returnTypeNames)return k(new Set(P));Z&&x(Z)&&!nt.call(Z,"$types")?Z.$types=$:Z={$:Z,$types:{$}}}else _(Z)&&nt.call(Z,"$types")&&(Z={$:Z,$types:!0});return!b.returnTypeNames&&Z}function Ce(Z,P,ee){Object.assign(Z,P);var Q=Ze.map(function(re){var he=Z[re];return delete Z[re],he});ee(),Ze.forEach(function(re,he){Z[re]=Q[he]})}function oe(Z,P,ee,Q,re,he,ht){var Ue,lt={},wt=l(P),ke=ge?function(Qt){var it=ht||Q.type||h.getJSONType(P);ge(Object.assign(Qt||lt,{keypath:Z,value:P,cyclic:ee,stateObj:Q,promisesData:re,resolvingTypesonPromise:he,awaitingTypesonPromise:d(P,E)},{type:it}))}:null;if(["string","boolean","number","undefined"].includes(wt))return P===void 0||Number.isNaN(P)||P===Number.NEGATIVE_INFINITY||P===Number.POSITIVE_INFINITY?(Ue=Q.replaced?P:Ge(Z,P,Q,re,!1,he,ke))!==P&&(lt={replaced:Ue}):Ue=P,ke&&ke(),Ue;if(P===null)return ke&&ke(),P;if(ee&&!Q.iterateIn&&!Q.iterateUnsetNumeric&&P&&l(P)==="object"){var bt=ne.indexOf(P);if(!(bt<0))return $[Z]="#",ke&&ke({cyclicKeypath:ce[bt]}),"#"+ce[bt];ee===!0&&(ne.push(P),ce.push(Z))}var Me,dt=x(P),rt=$e(P),At=(dt||rt)&&(!q.plainObjectReplacers.length||Q.replaced)||Q.iterateIn?P:Ge(Z,P,Q,re,dt||rt,null,ke);if(At!==P?(Ue=At,lt={replaced:At}):Z===""&&d(P,E)?(re.push([Z,P,ee,Q,void 0,void 0,Q.type]),Ue=P):rt&&Q.iterateIn!=="object"||Q.iterateIn==="array"?(Me=new Array(P.length),lt={clone:Me}):(["function","symbol"].includes(l(P))||"toJSON"in P||d(P,E)||d(P,Promise)||d(P,ArrayBuffer))&&!dt&&Q.iterateIn!=="object"?Ue=P:(Me={},Q.addLength&&(Me.length=P.length),lt={clone:Me}),ke&&ke(),b.iterateNone)return Me||Ue;if(!Me)return Ue;if(Q.iterateIn){var Nt=function(it){var Kt={ownKeys:nt.call(P,it)};Ce(Q,Kt,function(){var yn=Z+(Z?".":"")+K(it),Gr=oe(yn,P[it],!!ee,Q,re,he);d(Gr,E)?re.push([yn,Gr,!!ee,Q,Me,it,Q.type]):Gr!==void 0&&(Me[it]=Gr)})};for(var ji in P)Nt(ji);ke&&ke({endIterateIn:!0,end:!0})}else se(P).forEach(function(Qt){var it=Z+(Z?".":"")+K(Qt);Ce(Q,{ownKeys:!0},function(){var Kt=oe(it,P[Qt],!!ee,Q,re,he);d(Kt,E)?re.push([it,Kt,!!ee,Q,Me,Qt,Q.type]):Kt!==void 0&&(Me[Qt]=Kt)})}),ke&&ke({endIterateOwn:!0,end:!0});if(Q.iterateUnsetNumeric){for(var qr=P.length,An=function(it){if(!(it in P)){var Kt=Z+(Z?".":"")+it;Ce(Q,{ownKeys:!1},function(){var yn=oe(Kt,void 0,!!ee,Q,re,he);d(yn,E)?re.push([Kt,yn,!!ee,Q,Me,it,Q.type]):yn!==void 0&&(Me[it]=yn)})}},$i=0;$i<qr;$i++)An($i);ke&&ke({endIterateUnsetNumeric:!0,end:!0})}return Me}function Ge(Z,P,ee,Q,re,he,ht){for(var Ue=re?q.plainObjectReplacers:q.nonplainObjectReplacers,lt=Ue.length;lt--;){var wt=Ue[lt];if(wt.test(P,ee)){var ke=wt.type;if(q.revivers[ke]){var bt=$[Z];$[Z]=bt?[ke].concat(bt):ke}return Object.assign(ee,{type:ke,replaced:!0}),!V&&wt.replaceAsync||wt.replace?(ht&&ht({replacing:!0}),oe(Z,wt[V||!wt.replaceAsync?"replace":"replaceAsync"](P,ee),Se&&"readonly",ee,Q,he,ke)):(ht&&ht({typeDetected:!0}),oe(Z,P,Se&&"readonly",ee,Q,he,ke))}}return P}return fe.length?V&&b.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(R(pe,fe)).then(De):!V&&b.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():b.stringification&&V?[De(pe)]:V?De(pe):Promise.resolve(De(pe))}},{key:"encapsulateSync",value:function(f,y,b){return this.encapsulate(f,y,T(T({throwOnBadSyncType:!0},b),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(f,y,b){return this.encapsulate(f,y,T(T({throwOnBadSyncType:!0},b),{},{sync:!1}))}},{key:"revive",value:function(f,y){var b=f&&f.$types;if(!b)return f;if(b===!0)return f.$;var R=(y=T(T({sync:!0},this.options),y)).sync,V=[],q={},$=!0;b.$&&x(b.$)&&(f=f.$,b=b.$,$=!1);var ne=this;function ce(De,Ce){var oe=S(ne.revivers[De]||[],1)[0];if(!oe)throw new Error("Unregistered type: "+De);return R&&!("revive"in oe)?Ce:oe[R&&oe.revive?"revive":!R&&oe.reviveAsync?"reviveAsync":"revive"](Ce,q)}var fe=[];function Se(De){return d(De,Oe)?void 0:De}var ge,pe=function(){var Ce=[];if(Object.entries(b).forEach(function(oe){var Ge=S(oe,2),Z=Ge[0],P=Ge[1];P!=="#"&&[].concat(P).forEach(function(ee){S(ne.revivers[ee]||[null,{}],2)[1].plain&&(Ce.push({keypath:Z,type:ee}),delete b[Z])})}),Ce.length)return Ce.sort(Ot).reduce(function oe(Ge,Z){var P=Z.keypath,ee=Z.type;if(z(Ge))return Ge.then(function(he){return oe(he,{keypath:P,type:ee})});var Q=le(f,P);if(d(Q=ce(ee,Q),E))return Q.then(function(he){var ht=ue(f,P,he);ht===he&&(f=ht)});var re=ue(f,P,Q);re===Q&&(f=re)},void 0)}();return d(pe,E)?ge=pe.then(function(){return f}):(ge=function De(Ce,oe,Ge,Z,P){if(!$||Ce!=="$types"){var ee=b[Ce],Q=$e(oe);if(Q||x(oe)){var re=Q?new Array(oe.length):{};for(se(oe).forEach(function(Me){var dt=De(Ce+(Ce?".":"")+K(Me),oe[Me],Ge||re,re,Me),rt=function(Nt){return d(Nt,Oe)?re[Me]=void 0:Nt!==void 0&&(re[Me]=Nt),Nt};d(dt,E)?fe.push(dt.then(function(At){return rt(At)})):rt(dt)}),oe=re;V.length;){var he=S(V[0],4),ht=he[0],Ue=he[1],lt=he[2],wt=he[3],ke=le(ht,Ue);if(ke===void 0)break;lt[wt]=ke,V.splice(0,1)}}if(!ee)return oe;if(ee==="#"){var bt=le(Ge,oe.slice(1));return bt===void 0&&V.push([Ge,oe.slice(1),Z,P]),bt}return[].concat(ee).reduce(function Me(dt,rt){return d(dt,E)?dt.then(function(At){return Me(At,rt)}):ce(rt,dt)},oe)}}("",f,null),fe.length&&(ge=E.resolve(ge).then(function(De){return E.all([De].concat(fe))}).then(function(De){return S(De,1)[0]}))),z(ge)?R&&y.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():d(ge,E)?ge.p.then(Se):ge:!R&&y.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():R?Se(ge):Promise.resolve(Se(ge))}},{key:"reviveSync",value:function(f,y){return this.revive(f,T(T({throwOnBadSyncType:!0},y),{},{sync:!0}))}},{key:"reviveAsync",value:function(f,y){return this.revive(f,T(T({throwOnBadSyncType:!0},y),{},{sync:!1}))}},{key:"register",value:function(f,y){return y=y||{},[].concat(f).forEach(function b(R){var V=this;if($e(R))return R.map(function(q){return b.call(V,q)});R&&se(R).forEach(function(q){if(q==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(h.JSON_TYPES.includes(q))throw new TypeError("Plain JSON object types are reserved as type names");var $=R[q],ne=$&&$.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,ce=ne.filter(function(Ce){return Ce.type===q});if(ce.length&&(ne.splice(ne.indexOf(ce[0]),1),delete this.revivers[q],delete this.types[q]),typeof $=="function"){var fe=$;$={test:function(oe){return oe&&oe.constructor===fe},replace:function(oe){return T({},oe)},revive:function(oe){return Object.assign(Object.create(fe.prototype),oe)}}}else if($e($)){var Se=S($,3);$={test:Se[0],replace:Se[1],revive:Se[2]}}if($&&$.test){var ge={type:q,test:$.test.bind($)};$.replace&&(ge.replace=$.replace.bind($)),$.replaceAsync&&(ge.replaceAsync=$.replaceAsync.bind($));var pe=typeof y.fallback=="number"?y.fallback:y.fallback?0:Number.POSITIVE_INFINITY;if($.testPlainObjects?this.plainObjectReplacers.splice(pe,0,ge):this.nonplainObjectReplacers.splice(pe,0,ge),$.revive||$.reviveAsync){var De={};$.revive&&(De.revive=$.revive.bind($)),$.reviveAsync&&(De.reviveAsync=$.reviveAsync.bind($)),this.revivers[q]=[De,{plain:$.testPlainObjects}]}this.types[q]=$}},this)},this),this}}]),h}(),Oe=function h(){m(this,h)};Oe.__typeson__type__="TypesonUndefined",G.Undefined=Oe,G.Promise=E,G.isThenable=z,G.toStringTag=v,G.hasConstructorOf=d,G.isObject=_,G.isPlainObject=x,G.isUserObject=function h(u){if(!u||v(u)!=="Object")return!1;var f=L(u);return!f||d(u,Object)||h(f)},G.escapeKeyPathComponent=K,G.unescapeKeyPathComponent=ae,G.getByKeyPath=le,G.getJSONType=function(u){return u===null?"null":Array.isArray(u)?"array":l(u)},G.JSON_TYPES=["null","boolean","number","string","array","object"];for(var Ye={userObject:{test:function(u,f){return G.isUserObject(u)},replace:function(u){return function(y){for(var b=1;b<arguments.length;b++){var R=arguments[b]!=null?arguments[b]:{};b%2?a(Object(R),!0).forEach(function(V){s(y,V,R[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(R)):a(Object(R)).forEach(function(V){Object.defineProperty(y,V,Object.getOwnPropertyDescriptor(R,V))})}return y}({},u)},revive:function(u){return u}}},A=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(u,f){return!!Array.isArray(u)&&(Object.keys(u).some(function(y){return String(Number.parseInt(y))!==y})&&(f.iterateIn="object",f.addLength=!0),!0)},replace:function(u,f){return f.iterateUnsetNumeric=!0,u},revive:function(u){if(Array.isArray(u))return u;var f=[];return Object.keys(u).forEach(function(y){var b=u[y];f[y]=b}),f}}},{sparseUndefined:{test:function(u,f){return u===void 0&&f.ownKeys===!1},replace:function(u){return 0},revive:function(u){}}}],C={undef:{test:function(u,f){return u===void 0&&(f.ownKeys||!("ownKeys"in f))},replace:function(u){return 0},revive:function(u){return new G.Undefined}}},M={StringObject:{test:function(u){return G.toStringTag(u)==="String"&&n(u)==="object"},replace:function(u){return String(u)},revive:function(u){return new String(u)}},BooleanObject:{test:function(u){return G.toStringTag(u)==="Boolean"&&n(u)==="object"},replace:function(u){return!!u},revive:function(u){return new Boolean(u)}},NumberObject:{test:function(u){return G.toStringTag(u)==="Number"&&n(u)==="object"},replace:function(u){return Number(u)},revive:function(u){return new Number(u)}}},F=[{nan:{test:function(u){return Number.isNaN(u)},replace:function(u){return"NaN"},revive:function(u){return Number.NaN}}},{infinity:{test:function(u){return u===Number.POSITIVE_INFINITY},replace:function(u){return"Infinity"},revive:function(u){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(u){return u===Number.NEGATIVE_INFINITY},replace:function(u){return"-Infinity"},revive:function(u){return Number.NEGATIVE_INFINITY}}}],W={date:{test:function(u){return G.toStringTag(u)==="Date"},replace:function(u){var f=u.getTime();return Number.isNaN(f)?"NaN":f},revive:function(u){return u==="NaN"?new Date(Number.NaN):new Date(u)}}},ye={regexp:{test:function(u){return G.toStringTag(u)==="RegExp"},replace:function(u){return{source:u.source,flags:(u.global?"g":"")+(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.sticky?"y":"")+(u.unicode?"u":"")}},revive:function(u){var f=u.source,y=u.flags;return new RegExp(f,y)}}},ve={map:{test:function(u){return G.toStringTag(u)==="Map"},replace:function(u){return o(u.entries())},revive:function(u){return new Map(u)}}},me={set:{test:function(u){return G.toStringTag(u)==="Set"},replace:function(u){return o(u.values())},revive:function(u){return new Set(u)}}},J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qe=new Uint8Array(256),ut=0;ut<J.length;ut++)qe[J.charCodeAt(ut)]=ut;var ct=function(u,f,y){y==null&&(y=u.byteLength);for(var b=new Uint8Array(u,f||0,y),R=b.length,V="",q=0;q<R;q+=3)V+=J[b[q]>>2],V+=J[(3&b[q])<<4|b[q+1]>>4],V+=J[(15&b[q+1])<<2|b[q+2]>>6],V+=J[63&b[q+2]];return R%3==2?V=V.slice(0,-1)+"=":R%3==1&&(V=V.slice(0,-2)+"=="),V},xt=function(u){var f,y,b,R,V=u.length,q=.75*u.length,$=0;u[u.length-1]==="="&&(q--,u[u.length-2]==="="&&q--);for(var ne=new ArrayBuffer(q),ce=new Uint8Array(ne),fe=0;fe<V;fe+=4)f=qe[u.charCodeAt(fe)],y=qe[u.charCodeAt(fe+1)],b=qe[u.charCodeAt(fe+2)],R=qe[u.charCodeAt(fe+3)],ce[$++]=f<<2|y>>4,ce[$++]=(15&y)<<4|b>>2,ce[$++]=(3&b)<<6|63&R;return ne},It={arraybuffer:{test:function(u){return G.toStringTag(u)==="ArrayBuffer"},replace:function(u,f){f.buffers||(f.buffers=[]);var y=f.buffers.indexOf(u);return y>-1?{index:y}:(f.buffers.push(u),ct(u))},revive:function(u,f){if(f.buffers||(f.buffers=[]),n(u)==="object")return f.buffers[u.index];var y=xt(u);return f.buffers.push(y),y}}},Wt=typeof self>"u"?Ks:self,ft={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(h){var u=h,f=Wt[u];f&&(ft[h.toLowerCase()]={test:function(b){return G.toStringTag(b)===u},replace:function(b,R){var V=b.buffer,q=b.byteOffset,$=b.length;R.buffers||(R.buffers=[]);var ne=R.buffers.indexOf(V);return ne>-1?{index:ne,byteOffset:q,length:$}:(R.buffers.push(V),{encoded:ct(V),byteOffset:q,length:$})},revive:function(b,R){R.buffers||(R.buffers=[]);var V,q=b.byteOffset,$=b.length,ne=b.encoded,ce=b.index;return"index"in b?V=R.buffers[ce]:(V=xt(ne),R.buffers.push(V)),new f(V,q,$)}})});var kt={dataview:{test:function(u){return G.toStringTag(u)==="DataView"},replace:function(u,f){var y=u.buffer,b=u.byteOffset,R=u.byteLength;f.buffers||(f.buffers=[]);var V=f.buffers.indexOf(y);return V>-1?{index:V,byteOffset:b,byteLength:R}:(f.buffers.push(y),{encoded:ct(y),byteOffset:b,byteLength:R})},revive:function(u,f){f.buffers||(f.buffers=[]);var y,b=u.byteOffset,R=u.byteLength,V=u.encoded,q=u.index;return"index"in u?y=f.buffers[q]:(y=xt(V),f.buffers.push(y)),new DataView(y,b,R)}}},Be={IntlCollator:{test:function(u){return G.hasConstructorOf(u,Intl.Collator)},replace:function(u){return u.resolvedOptions()},revive:function(u){return new Intl.Collator(u.locale,u)}},IntlDateTimeFormat:{test:function(u){return G.hasConstructorOf(u,Intl.DateTimeFormat)},replace:function(u){return u.resolvedOptions()},revive:function(u){return new Intl.DateTimeFormat(u.locale,u)}},IntlNumberFormat:{test:function(u){return G.hasConstructorOf(u,Intl.NumberFormat)},replace:function(u){return u.resolvedOptions()},revive:function(u){return new Intl.NumberFormat(u.locale,u)}}};function xe(h){for(var u=new Uint8Array(h.length),f=0;f<h.length;f++)u[f]=h.charCodeAt(f);return u.buffer}var be={file:{test:function(u){return G.toStringTag(u)==="File"},replace:function(u){var f=new XMLHttpRequest;if(f.overrideMimeType("text/plain; charset=x-user-defined"),f.open("GET",URL.createObjectURL(u),!1),f.send(),f.status!==200&&f.status!==0)throw new Error("Bad File access: "+f.status);return{type:u.type,stringContents:f.responseText,name:u.name,lastModified:u.lastModified}},revive:function(u){var f=u.name,y=u.type,b=u.stringContents,R=u.lastModified;return new File([xe(b)],f,{type:y,lastModified:R})},replaceAsync:function(u){return new G.Promise(function(f,y){var b=new FileReader;b.addEventListener("load",function(){f({type:u.type,stringContents:b.result,name:u.name,lastModified:u.lastModified})}),b.addEventListener("error",function(){y(b.error)}),b.readAsBinaryString(u)})}}},Ie={bigint:{test:function(u){return typeof u=="bigint"},replace:function(u){return String(u)},revive:function(u){return BigInt(u)}}},Ve={bigintObject:{test:function(u){return n(u)==="object"&&G.hasConstructorOf(u,BigInt)},replace:function(u){return String(u)},revive:function(u){return new Object(BigInt(u))}}},Y={cryptokey:{test:function(u){return G.toStringTag(u)==="CryptoKey"&&u.extractable},replaceAsync:function(u){return new G.Promise(function(f,y){crypto.subtle.exportKey("jwk",u).catch(function(b){y(b)}).then(function(b){f({jwk:b,algorithm:u.algorithm,usages:u.usages})})})},revive:function(u){var f=u.jwk,y=u.algorithm,b=u.usages;return crypto.subtle.importKey("jwk",f,y,!0,b)}}};return[Ye,C,A,M,F,W,ye,{imagedata:{test:function(u){return G.toStringTag(u)==="ImageData"},replace:function(u){return{array:o(u.data),width:u.width,height:u.height}},revive:function(u){return new ImageData(new Uint8ClampedArray(u.array),u.width,u.height)}}},{imagebitmap:{test:function(u){return G.toStringTag(u)==="ImageBitmap"||u&&u.dataset&&u.dataset.toStringTag==="ImageBitmap"},replace:function(u){var f=document.createElement("canvas");return f.getContext("2d").drawImage(u,0,0),f.toDataURL()},revive:function(u){var f=document.createElement("canvas"),y=f.getContext("2d"),b=document.createElement("img");return b.addEventListener("load",function(){y.drawImage(b,0,0)}),b.src=u,f},reviveAsync:function(u){var f=document.createElement("canvas"),y=f.getContext("2d"),b=document.createElement("img");return b.addEventListener("load",function(){y.drawImage(b,0,0)}),b.src=u,createImageBitmap(f)}}},be,{file:be.file,filelist:{test:function(u){return G.toStringTag(u)==="FileList"},replace:function(u){for(var f=[],y=0;y<u.length;y++)f[y]=u.item(y);return f},revive:function(u){return new(function(){function f(){r(this,f),this._files=arguments[0],this.length=this._files.length}return function(b,R,V){return R&&i(b.prototype,R),V&&i(b,V),b}(f,[{key:"item",value:function(b){return this._files[b]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),f}())(u)}}},{blob:{test:function(u){return G.toStringTag(u)==="Blob"},replace:function(u){var f=new XMLHttpRequest;if(f.overrideMimeType("text/plain; charset=x-user-defined"),f.open("GET",URL.createObjectURL(u),!1),f.send(),f.status!==200&&f.status!==0)throw new Error("Bad Blob access: "+f.status);return{type:u.type,stringContents:f.responseText}},revive:function(u){var f=u.type,y=u.stringContents;return new Blob([xe(y)],{type:f})},replaceAsync:function(u){return new G.Promise(function(f,y){var b=new FileReader;b.addEventListener("load",function(){f({type:u.type,stringContents:b.result})}),b.addEventListener("error",function(){y(b.error)}),b.readAsBinaryString(u)})}}}].concat(typeof Map=="function"?ve:[],typeof Set=="function"?me:[],typeof ArrayBuffer=="function"?It:[],typeof Uint8Array=="function"?ft:[],typeof DataView=="function"?kt:[],typeof Intl<"u"?Be:[],typeof crypto<"u"?Y:[],typeof BigInt<"u"?[Ie,Ve]:[])})}),Vn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vr=new Uint8Array(256);for(gr=0;gr<Vn.length;gr++)vr[Vn.codePointAt(gr)]=gr;var gr,js=function(e,n,r){r==null&&(r=e.byteLength);for(var i=new Uint8Array(e,n||0,r),s=i.length,a="",o=0;o<s;o+=3)a+=Vn[i[o]>>2],a+=Vn[(i[o]&3)<<4|i[o+1]>>4],a+=Vn[(i[o+1]&15)<<2|i[o+2]>>6],a+=Vn[i[o+2]&63];return s%3===2?a=a.slice(0,-1)+"=":s%3===1&&(a=a.slice(0,-2)+"=="),a},To=function(e){var n=e.length,r=e.length*.75,i=0,s,a,o,c;e[e.length-1]==="="&&(r--,e[e.length-2]==="="&&r--);for(var l=new ArrayBuffer(r),m=new Uint8Array(l),p=0;p<n;p+=4)s=vr[e.codePointAt(p)],a=vr[e.codePointAt(p+1)],o=vr[e.codePointAt(p+2)],c=vr[e.codePointAt(p+3)],m[i++]=s<<2|a>>4,m[i++]=(a&15)<<4|o>>2,m[i++]=(o&3)<<6|c&63;return l},oc=typeof self>"u"?global:self,So={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(t){var e=t,n=oc[e];n&&(So[t.toLowerCase()+"2"]={test:function(r){return _i.toStringTag(r)===e},replace:function(r){var i=r.buffer,s=r.byteOffset,a=r.length;return{buffer:i,byteOffset:s,length:a}},revive:function(r){var i=r.buffer,s=r.byteOffset,a=r.length;return new n(i,s,a)}})});var uc={arraybuffer:{test:function(t){return _i.toStringTag(t)==="ArrayBuffer"},replace:function(t){return js(t,0,t.byteLength)},revive:function(t){var e=To(t);return e}}},Tt=new _i().register(ac),lc="FileReaderSync"in self,Ei=[],Ws=0;Tt.register([uc,So,{blob2:{test:function(t){return _i.toStringTag(t)==="Blob"},replace:function(t){if(t.isClosed)throw new Error("The Blob is closed");if(lc){var e=bo(t,"binary"),n=js(e,0,e.byteLength);return{type:t.type,data:n}}else{Ei.push(t);var r={type:t.type,data:{start:Ws,end:Ws+t.size}};return Ws+=t.size,r}},finalize:function(t,e){t.data=js(e,0,e.byteLength)},revive:function(t){var e=t.type,n=t.data;return new Blob([To(n)],{type:e})}}}]);Tt.mustFinalize=function(){return Ei.length>0};Tt.finalize=function(t){return an(void 0,void 0,void 0,function(){var e,n,r,i,s,a,o,c,l,m;return Ct(this,function(p){switch(p.label){case 0:return[4,wo(new Blob(Ei),"binary")];case 1:if(e=p.sent(),t){for(n=0,r=t;n<r.length;n++)if(i=r[n],i.$types){s=i.$types,a=s.$,a&&(s=s.$);for(o in s)c=s[o],l=Tt.types[c],l&&l.finalize&&(m=We.getByKeyPath(i,a?"$."+o:o),l.finalize(m,e.slice(m.start,m.end)))}}return Ei=[],[2]}})})};var cc=2e3;function fc(t,e){return an(this,void 0,void 0,function(){function n(){return an(this,void 0,void 0,function(){var l,m,p,w,g,T,S,k,O;return Ct(this,function(D){switch(D.label){case 0:return[4,Promise.all(t.tables.map(function(E){return E.count()}))];case 1:l=D.sent(),l.forEach(function(E,I){return i[I].rowCount=E}),c.totalRows=l.reduce(function(E,I){return E+I}),m=JSON.stringify(a,void 0,s?2:void 0),p=m.lastIndexOf("]"),w=m.substring(0,p),r.push(w),g=e.filter,T=function(E){var I,N,L,B,z,v,d,x,_,K,ae,le;return Ct(this,function(ue){switch(ue.label){case 0:I=t.table(E),N=I.schema.primKey,L=!!N.keyPath,B=e.numRowsPerChunk||cc,z=L?{tableName:I.name,inbound:!0,rows:[]}:{tableName:I.name,inbound:!1,rows:[]},v=JSON.stringify(z,void 0,s?2:void 0),s&&(v=v.split(`
`).join(`
    `)),d=v.lastIndexOf("]"),r.push(v.substring(0,d)),x=null,_=0,K=!0,ae=function(){var de,se,$e,nt,G,Ze,He,Ot,G;return Ct(this,function(Oe){switch(Oe.label){case 0:return o&&We.ignoreTransaction(function(){return o(c)}),de=x==null?I.limit(B):I.where(":id").above(x).limit(B),[4,de.toArray()];case 1:return se=Oe.sent(),se.length===0?[2,"break"]:(x!=null&&_>0&&(r.push(","),s&&r.push(`
      `)),K=se.length===B,L?($e=g?se.filter(function(Ye){return g(E,Ye)}):se,nt=$e.map(function(Ye){return Tt.encapsulate(Ye)}),Tt.mustFinalize()?[4,We.waitFor(Tt.finalize(nt))]:[3,3]):[3,4]);case 2:Oe.sent(),Oe.label=3;case 3:return G=JSON.stringify(nt,void 0,s?2:void 0),s&&(G=G.split(`
`).join(`
      `)),r.push(new Blob([G.substring(1,G.length-1)])),_=$e.length,x=se.length>0?We.getByKeyPath(se[se.length-1],N.keyPath):null,[3,8];case 4:return[4,de.primaryKeys()];case 5:return Ze=Oe.sent(),He=Ze.map(function(Ye,A){return[Ye,se[A]]}),g&&(He=He.filter(function(Ye){var A=Ye[0],C=Ye[1];return g(E,C,A)})),Ot=He.map(function(Ye){return Tt.encapsulate(Ye)}),Tt.mustFinalize()?[4,We.waitFor(Tt.finalize(Ot))]:[3,7];case 6:Oe.sent(),Oe.label=7;case 7:G=JSON.stringify(Ot,void 0,s?2:void 0),s&&(G=G.split(`
`).join(`
      `)),r.push(new Blob([G.substring(1,G.length-1)])),_=He.length,x=Ze.length>0?Ze[Ze.length-1]:null,Oe.label=8;case 8:return c.completedRows+=se.length,[2]}})},ue.label=1;case 1:return K?[5,ae()]:[3,3];case 2:return le=ue.sent(),le==="break"?[3,3]:[3,1];case 3:return r.push(v.substr(d)),c.completedTables+=1,c.completedTables<c.totalTables&&r.push(","),[2]}})},S=0,k=i,D.label=2;case 2:return S<k.length?(O=k[S].name,[5,T(O)]):[3,5];case 3:D.sent(),D.label=4;case 4:return S++,[3,2];case 5:return r.push(m.substr(p)),c.done=!0,o&&We.ignoreTransaction(function(){return o(c)}),[2]}})})}var r,i,s,a,o,c;return Ct(this,function(l){switch(l.label){case 0:e=e||{},r=[],i=t.tables.map(function(m){return{name:m.name,schema:ic(m),rowCount:0}}),s=e.prettyJson,a={formatName:"dexie",formatVersion:1,data:{databaseName:t.name,databaseVersion:t.verno,tables:i,data:[]}},o=e.progressCallback,c={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:t.tables.length},l.label=1;case 1:return l.trys.push([1,,6,7]),e.noTransaction?[4,n()]:[3,3];case 2:return l.sent(),[3,5];case 3:return[4,t.transaction("r",t.tables,n)];case 4:l.sent(),l.label=5;case 5:return[3,7];case 6:return Tt.finalize(),[7];case 7:return[2,new Blob(r,{type:"text/json"})]}})})}var hc=1,dc={Stream:function(){}},mc=$s(function(t,e){(function(n){var r=typeof process=="object"&&process.env?process.env:self;n.parser=function(v){return new g(v)},n.CParser=g,n.CStream=S,n.createStream=T,n.MAX_BUFFER_LENGTH=10*1024*1024,n.DEBUG=r.CDEBUG==="debug",n.INFO=r.CDEBUG==="debug"||r.CDEBUG==="info",n.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var i={textNode:void 0,numberNode:""},s=n.EVENTS.filter(function(v){return v!=="error"&&v!=="end"}),a=0,o;n.STATE={BEGIN:a++,VALUE:a++,OPEN_OBJECT:a++,CLOSE_OBJECT:a++,OPEN_ARRAY:a++,CLOSE_ARRAY:a++,TEXT_ESCAPE:a++,STRING:a++,BACKSLASH:a++,END:a++,OPEN_KEY:a++,CLOSE_KEY:a++,TRUE:a++,TRUE2:a++,TRUE3:a++,FALSE:a++,FALSE2:a++,FALSE3:a++,FALSE4:a++,NULL:a++,NULL2:a++,NULL3:a++,NUMBER_DECIMAL_POINT:a++,NUMBER_DIGIT:a++};for(var c in n.STATE)n.STATE[n.STATE[c]]=c;a=n.STATE;let l={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(v){function d(){this.__proto__=v}return d.prototype=v,new d}),Object.getPrototypeOf||(Object.getPrototypeOf=function(v){return v.__proto__}),Object.keys||(Object.keys=function(v){var d=[];for(var x in v)v.hasOwnProperty(x)&&d.push(x);return d});function m(v){var d=Math.max(n.MAX_BUFFER_LENGTH,10),x=0;for(var _ in i){var K=v[_]===void 0?0:v[_].length;if(K>d)switch(_){case"text":closeText(v);break;default:N(v,"Max buffer length exceeded: "+_)}x=Math.max(x,K)}v.bufferCheckPosition=n.MAX_BUFFER_LENGTH-x+v.position}function p(v){for(var d in i)v[d]=i[d]}var w=/[\\"\n]/g;function g(v){if(!(this instanceof g))return new g(v);var d=this;p(d),d.bufferCheckPosition=n.MAX_BUFFER_LENGTH,d.q=d.c=d.p="",d.opt=v||{},d.closed=d.closedRoot=d.sawRoot=!1,d.tag=d.error=null,d.state=a.BEGIN,d.stack=new Array,d.position=d.column=0,d.line=1,d.slashed=!1,d.unicodeI=0,d.unicodeS=null,d.depth=0,k(d,"onready")}g.prototype={end:function(){L(this)},write:z,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{o=dc.Stream}catch{o=function(){}}function T(v){return new S(v)}function S(v){if(!(this instanceof S))return new S(v);this._parser=new g(v),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var d=this;o.apply(d),this._parser.onend=function(){d.emit("end")},this._parser.onerror=function(x){d.emit("error",x),d._parser.error=null},s.forEach(function(x){Object.defineProperty(d,"on"+x,{get:function(){return d._parser["on"+x]},set:function(_){if(!_)return d.removeAllListeners(x),d._parser["on"+x]=_,_;d.on(x,_)},enumerable:!0,configurable:!1})})}S.prototype=Object.create(o.prototype,{constructor:{value:S}}),S.prototype.write=function(v){v=new Buffer(v);for(var d=0;d<v.length;d++){var x=v[d];if(this.bytes_remaining>0){for(var _=0;_<this.bytes_remaining;_++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+_]=v[_];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,d=d+_-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&x>=128)if(x>=194&&x<=223&&(this.bytes_in_sequence=2),x>=224&&x<=239&&(this.bytes_in_sequence=3),x>=240&&x<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+d>v.length){for(var K=0;K<=v.length-1-d;K++)this.temp_buffs[this.bytes_in_sequence][K]=v[d+K];return this.bytes_remaining=d+this.bytes_in_sequence-v.length,!0}else{this.string=v.slice(d,d+this.bytes_in_sequence).toString(),d=d+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var ae=d;ae<v.length&&!(v[ae]>=128);ae++);this.string=v.slice(d,ae).toString(),this._parser.write(this.string),this.emit("data",this.string),d=ae-1}},S.prototype.end=function(v){return v&&v.length&&this._parser.write(v.toString()),this._parser.end(),!0},S.prototype.on=function(v,d){var x=this;return!x._parser["on"+v]&&s.indexOf(v)!==-1&&(x._parser["on"+v]=function(){var _=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);_.splice(0,0,v),x.emit.apply(x,_)}),o.prototype.on.call(x,v,d)},S.prototype.destroy=function(){p(this._parser),this.emit("close")};function k(v,d,x){n.INFO&&console.log("-- emit",d,x),v[d]&&v[d](x)}function O(v,d,x){D(v),k(v,d,x)}function D(v,d){v.textNode=I(v.opt,v.textNode),v.textNode!==void 0&&k(v,d||"onvalue",v.textNode),v.textNode=void 0}function E(v){v.numberNode&&k(v,"onvalue",parseFloat(v.numberNode)),v.numberNode=""}function I(v,d){return d===void 0||(v.trim&&(d=d.trim()),v.normalize&&(d=d.replace(/\s+/g," "))),d}function N(v,d){return D(v),d+=`
Line: `+v.line+`
Column: `+v.column+`
Char: `+v.c,d=new Error(d),v.error=d,k(v,"onerror",d),v}function L(v){return(v.state!==a.VALUE||v.depth!==0)&&N(v,"Unexpected end"),D(v),v.c="",v.closed=!0,k(v,"onend"),g.call(v,v.opt),v}function B(v){return v===l.carriageReturn||v===l.lineFeed||v===l.space||v===l.tab}function z(v){var d=this;if(this.error)throw this.error;if(d.closed)return N(d,"Cannot write after close. Assign an onready handler.");if(v===null)return L(d);var x=0,_=v.charCodeAt(0),K=d.p;for(n.DEBUG&&console.log("write -> ["+v+"]");_&&(K=_,d.c=_=v.charCodeAt(x++),K!==_?d.p=K:K=d.p,!!_);)switch(n.DEBUG&&console.log(x,_,n.STATE[d.state]),d.position++,_===l.lineFeed?(d.line++,d.column=0):d.column++,d.state){case a.BEGIN:_===l.openBrace?d.state=a.OPEN_OBJECT:_===l.openBracket?d.state=a.OPEN_ARRAY:B(_)||N(d,"Non-whitespace before {[.");continue;case a.OPEN_KEY:case a.OPEN_OBJECT:if(B(_))continue;if(d.state===a.OPEN_KEY)d.stack.push(a.CLOSE_KEY);else if(_===l.closeBrace){k(d,"onopenobject"),this.depth++,k(d,"oncloseobject"),this.depth--,d.state=d.stack.pop()||a.VALUE;continue}else d.stack.push(a.CLOSE_OBJECT);_===l.doubleQuote?d.state=a.STRING:N(d,'Malformed object key should start with "');continue;case a.CLOSE_KEY:case a.CLOSE_OBJECT:if(B(_))continue;d.state,a.CLOSE_KEY,_===l.colon?(d.state===a.CLOSE_OBJECT?(d.stack.push(a.CLOSE_OBJECT),D(d,"onopenobject"),this.depth++):D(d,"onkey"),d.state=a.VALUE):_===l.closeBrace?(O(d,"oncloseobject"),this.depth--,d.state=d.stack.pop()||a.VALUE):_===l.comma?(d.state===a.CLOSE_OBJECT&&d.stack.push(a.CLOSE_OBJECT),D(d),d.state=a.OPEN_KEY):N(d,"Bad object");continue;case a.OPEN_ARRAY:case a.VALUE:if(B(_))continue;if(d.state===a.OPEN_ARRAY)if(k(d,"onopenarray"),this.depth++,d.state=a.VALUE,_===l.closeBracket){k(d,"onclosearray"),this.depth--,d.state=d.stack.pop()||a.VALUE;continue}else d.stack.push(a.CLOSE_ARRAY);_===l.doubleQuote?d.state=a.STRING:_===l.openBrace?d.state=a.OPEN_OBJECT:_===l.openBracket?d.state=a.OPEN_ARRAY:_===l.t?d.state=a.TRUE:_===l.f?d.state=a.FALSE:_===l.n?d.state=a.NULL:_===l.minus?d.numberNode+="-":l._0<=_&&_<=l._9?(d.numberNode+=String.fromCharCode(_),d.state=a.NUMBER_DIGIT):N(d,"Bad value");continue;case a.CLOSE_ARRAY:if(_===l.comma)d.stack.push(a.CLOSE_ARRAY),D(d,"onvalue"),d.state=a.VALUE;else if(_===l.closeBracket)O(d,"onclosearray"),this.depth--,d.state=d.stack.pop()||a.VALUE;else{if(B(_))continue;N(d,"Bad array")}continue;case a.STRING:d.textNode===void 0&&(d.textNode="");var ae=x-1,le=d.slashed,ue=d.unicodeI;e:for(;;){for(n.DEBUG&&console.log(x,_,n.STATE[d.state],le);ue>0;)if(d.unicodeS+=String.fromCharCode(_),_=v.charCodeAt(x++),d.position++,ue===4?(d.textNode+=String.fromCharCode(parseInt(d.unicodeS,16)),ue=0,ae=x-1):ue++,!_)break e;if(_===l.doubleQuote&&!le){d.state=d.stack.pop()||a.VALUE,d.textNode+=v.substring(ae,x-1),d.position+=x-1-ae;break}if(_===l.backslash&&!le&&(le=!0,d.textNode+=v.substring(ae,x-1),d.position+=x-1-ae,_=v.charCodeAt(x++),d.position++,!_))break;if(le){if(le=!1,_===l.n?d.textNode+=`
`:_===l.r?d.textNode+="\r":_===l.t?d.textNode+="	":_===l.f?d.textNode+="\f":_===l.b?d.textNode+="\b":_===l.u?(ue=1,d.unicodeS=""):d.textNode+=String.fromCharCode(_),_=v.charCodeAt(x++),d.position++,ae=x-1,_)continue;break}w.lastIndex=x;var de=w.exec(v);if(de===null){x=v.length+1,d.textNode+=v.substring(ae,x-1),d.position+=x-1-ae;break}if(x=de.index+1,_=v.charCodeAt(de.index),!_){d.textNode+=v.substring(ae,x-1),d.position+=x-1-ae;break}}d.slashed=le,d.unicodeI=ue;continue;case a.TRUE:_===l.r?d.state=a.TRUE2:N(d,"Invalid true started with t"+_);continue;case a.TRUE2:_===l.u?d.state=a.TRUE3:N(d,"Invalid true started with tr"+_);continue;case a.TRUE3:_===l.e?(k(d,"onvalue",!0),d.state=d.stack.pop()||a.VALUE):N(d,"Invalid true started with tru"+_);continue;case a.FALSE:_===l.a?d.state=a.FALSE2:N(d,"Invalid false started with f"+_);continue;case a.FALSE2:_===l.l?d.state=a.FALSE3:N(d,"Invalid false started with fa"+_);continue;case a.FALSE3:_===l.s?d.state=a.FALSE4:N(d,"Invalid false started with fal"+_);continue;case a.FALSE4:_===l.e?(k(d,"onvalue",!1),d.state=d.stack.pop()||a.VALUE):N(d,"Invalid false started with fals"+_);continue;case a.NULL:_===l.u?d.state=a.NULL2:N(d,"Invalid null started with n"+_);continue;case a.NULL2:_===l.l?d.state=a.NULL3:N(d,"Invalid null started with nu"+_);continue;case a.NULL3:_===l.l?(k(d,"onvalue",null),d.state=d.stack.pop()||a.VALUE):N(d,"Invalid null started with nul"+_);continue;case a.NUMBER_DECIMAL_POINT:_===l.period?(d.numberNode+=".",d.state=a.NUMBER_DIGIT):N(d,"Leading zero not followed by .");continue;case a.NUMBER_DIGIT:l._0<=_&&_<=l._9?d.numberNode+=String.fromCharCode(_):_===l.period?(d.numberNode.indexOf(".")!==-1&&N(d,"Invalid number has two dots"),d.numberNode+="."):_===l.e||_===l.E?((d.numberNode.indexOf("e")!==-1||d.numberNode.indexOf("E")!==-1)&&N(d,"Invalid number has two exponential"),d.numberNode+="e"):_===l.plus||_===l.minus?(K===l.e||K===l.E||N(d,"Invalid symbol in number"),d.numberNode+=String.fromCharCode(_)):(E(d),x--,d.state=d.stack.pop()||a.VALUE);continue;default:N(d,"Unknown state: "+d.state)}return d.position>=d.bufferCheckPosition&&m(d),d}})(e)});function yc(t){var e=0,n=pc(!0),r={pullAsync:function(i){return an(this,void 0,void 0,function(){var s,a,o;return Ct(this,function(c){switch(c.label){case 0:return s=t.slice(e,e+i),e+=i,[4,wo(s,"text")];case 1:return a=c.sent(),o=n.write(a),r.result=o||{},[2,o]}})})},pullSync:function(i){var s=t.slice(e,e+i);e+=i;var a=bo(s,"text"),o=n.write(a);return r.result=o||{},o},done:function(){return n.done()},eof:function(){return e>=t.size},result:{}};return r}function pc(t){var e=mc.parser(),n=0,r,i=[],s,a,o=!1,c=!1;return e.onopenobject=function(l){var m={};m.incomplete=!0,r||(r=m),s&&(i.push([a,s,c]),t&&(c?s.push(m):s[a]=m)),s=m,a=l,c=!1,++n},e.onkey=function(l){return a=l},e.onvalue=function(l){return c?s.push(l):s[a]=l},e.oncloseobject=function(){var l;if(delete s.incomplete,a=null,--n===0)o=!0;else{var m=s;l=i.pop(),a=l[0],s=l[1],c=l[2],t||(c?s.push(m):s[a]=m)}},e.onopenarray=function(){var l=[];l.incomplete=!0,r||(r=l),s&&(i.push([a,s,c]),t&&(c?s.push(l):s[a]=l)),s=l,c=!0,a=null,++n},e.onclosearray=function(){var l;if(delete s.incomplete,a=null,--n===0)o=!0;else{var m=s;l=i.pop(),a=l[0],s=l[1],c=l[2],t||(c?s.push(m):s[a]=m)}},{write:function(l){return e.write(l),r},done:function(){return o}}}var Eo=1024;function gc(t,e){return an(this,void 0,void 0,function(){var n,r,i,s;return Ct(this,function(a){switch(a.label){case 0:return e=e||{},n=e.chunkSizeBytes||Eo*1024,[4,Oo(t,n)];case 1:return r=a.sent(),i=r.result.data,s=new We(i.databaseName),s.version(i.databaseVersion).stores(sc(i)),[4,_o(s,r,e)];case 2:return a.sent(),[2,s]}})})}function _o(t,e,n){return an(this,void 0,void 0,function(){function r(){return an(this,void 0,void 0,function(){var T,S,k,O,D;return Ct(this,function(E){switch(E.label){case 0:T=function(I){var N,L,B,z,v,d,x,_,K,ae,le,ue;return Ct(this,function(de){switch(de.label){case 0:if(!I.rows)return[2,"break"];if(!I.rows.incomplete&&I.rows.length===0)return[2,"continue"];if(l&&We.ignoreTransaction(function(){return l(m)}),N=I.tableName,L=t.table(N),B=c.tables.filter(function(se){return se.name===N})[0].schema,!L){if(n.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(I.tableName," is missing in installed database"))}if(!n.acceptChangedPrimaryKey&&B.split(",")[0]!=L.schema.primKey.src)throw new Error("Primary key differs for table ".concat(I.tableName,". "));for(z=I.rows,v=[],d=0;d<z.length&&(x=z[d],!x.incomplete);d++)v.push(Tt.revive(x));return _=n.filter,K=_?I.inbound?v.filter(function(se){return _(N,se)}):v.filter(function(se){var $e=se[0],nt=se[1];return _(N,nt,$e)}):v,ae=I.inbound?[void 0,K]:[K.map(function(se){return se[0]}),v.map(function(se){return se[1]})],le=ae[0],ue=ae[1],n.overwriteValues?[4,L.bulkPut(ue,le)]:[3,2];case 1:return de.sent(),[3,4];case 2:return[4,L.bulkAdd(ue,le)];case 3:de.sent(),de.label=4;case 4:return m.completedRows+=v.length,v.incomplete||(m.completedTables+=1),z.splice(0,v.length),[2]}})},S=0,k=c.data,E.label=1;case 1:return S<k.length?(O=k[S],[5,T(O)]):[3,4];case 2:if(D=E.sent(),D==="break")return[3,4];E.label=3;case 3:return S++,[3,1];case 4:for(;c.data.length>0&&c.data[0].rows&&!c.data[0].rows.incomplete;)c.data.splice(0,1);return!s.done()&&!s.eof()?o?(s.pullSync(i),[3,7]):[3,5]:[3,8];case 5:return[4,We.waitFor(s.pullAsync(i))];case 6:E.sent(),E.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var i,s,a,o,c,l,m,p,w,g;return Ct(this,function(T){switch(T.label){case 0:return n=n||{},i=n.chunkSizeBytes||Eo*1024,[4,Oo(e,i)];case 1:if(s=T.sent(),a=s.result,o="FileReaderSync"in self,c=a.data,!n.acceptNameDiff&&t.name!==c.databaseName)throw new Error("Name differs. Current database name is ".concat(t.name," but export is ").concat(c.databaseName));if(!n.acceptVersionDiff&&t.verno!==c.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(t.verno," but export is ").concat(c.databaseVersion));if(l=n.progressCallback,m={done:!1,completedRows:0,completedTables:0,totalRows:c.tables.reduce(function(S,k){return S+k.rowCount},0),totalTables:c.tables.length},l&&We.ignoreTransaction(function(){return l(m)}),!n.clearTablesBeforeImport)return[3,5];p=0,w=t.tables,T.label=2;case 2:return p<w.length?(g=w[p],[4,g.clear()]):[3,5];case 3:T.sent(),T.label=4;case 4:return p++,[3,2];case 5:return n.noTransaction?[4,r()]:[3,7];case 6:return T.sent(),[3,9];case 7:return[4,t.transaction("rw",t.tables,r)];case 8:T.sent(),T.label=9;case 9:return m.done=!0,l&&We.ignoreTransaction(function(){return l(m)}),[2]}})})}function Oo(t,e){return an(this,void 0,void 0,function(){var n,r;return Ct(this,function(i){switch(i.label){case 0:n="slice"in t?yc(t):t,i.label=1;case 1:return n.eof()?[3,3]:[4,n.pullAsync(e)];case 2:return i.sent(),n.result.data&&n.result.data.data?[3,3]:[3,1];case 3:if(r=n.result,!r||r.formatName!="dexie")throw new Error("Given file is not a dexie export");if(r.formatVersion>hc)throw new Error("Format version ".concat(r.formatVersion," not supported"));if(!r.data)throw new Error("No data in export file");if(!r.data.databaseName)throw new Error("Missing databaseName in export file");if(!r.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!r.data.tables)throw new Error("Missing tables in export file");return[2,n]}})})}We.prototype.export=function(t){return fc(this,t)};We.prototype.import=function(t,e){return _o(this,t,e)};We.import=function(t,e){return gc(t,e)};var vc=(()=>{let e=class e extends We{constructor(){super("tipis-pap-tools"),this.version(1).stores({characters:"++id"}),this.version(2).stores({settings:"++id"}),this.version(3).stores({transactions:"++id,characterId,timestamp"})}initialize(){}cleanup(){return Jr(this,null,function*(){})}exportToBlob(){return this.export()}importFromBlob(r){return Jr(this,null,function*(){try{yield this.import(r,{clearTablesBeforeImport:!0})}catch{return!1}return!0})}clear(){return Jr(this,null,function*(){yield this.delete()})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Aa({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Jf=t=>()=>(t.initialize(),t.cleanup()),Qf=[vc];var Gt=class extends Error{},Oi=class extends Gt{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}},xi=class extends Gt{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}},Ii=class extends Gt{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}},Mt=class extends Gt{},Un=class extends Gt{constructor(e){super(`Invalid unit ${e}`)}},je=class extends Gt{},Ft=class extends Gt{constructor(){super("Zone is an abstract class")}};var U="numeric",Lt="short",pt="long",on={year:U,month:U,day:U},wr={year:U,month:Lt,day:U},Hs={year:U,month:Lt,day:U,weekday:Lt},br={year:U,month:pt,day:U},Tr={year:U,month:pt,day:U,weekday:pt},Sr={hour:U,minute:U},Er={hour:U,minute:U,second:U},_r={hour:U,minute:U,second:U,timeZoneName:Lt},Or={hour:U,minute:U,second:U,timeZoneName:pt},xr={hour:U,minute:U,hourCycle:"h23"},Ir={hour:U,minute:U,second:U,hourCycle:"h23"},kr={hour:U,minute:U,second:U,hourCycle:"h23",timeZoneName:Lt},Ar={hour:U,minute:U,second:U,hourCycle:"h23",timeZoneName:pt},Nr={year:U,month:U,day:U,hour:U,minute:U},Dr={year:U,month:U,day:U,hour:U,minute:U,second:U},Cr={year:U,month:Lt,day:U,hour:U,minute:U},Mr={year:U,month:Lt,day:U,hour:U,minute:U,second:U},zs={year:U,month:Lt,day:U,weekday:Lt,hour:U,minute:U},Fr={year:U,month:pt,day:U,hour:U,minute:U,timeZoneName:Lt},Lr={year:U,month:pt,day:U,hour:U,minute:U,second:U,timeZoneName:Lt},Rr={year:U,month:pt,day:U,weekday:pt,hour:U,minute:U,timeZoneName:pt},Pr={year:U,month:pt,day:U,weekday:pt,hour:U,minute:U,second:U,timeZoneName:pt};var gt=class{get type(){throw new Ft}get name(){throw new Ft}get ianaName(){return this.name}get isUniversal(){throw new Ft}offsetName(e,n){throw new Ft}formatOffset(e,n){throw new Ft}offset(e){throw new Ft}equals(e){throw new Ft}get isValid(){throw new Ft}};var Zs=null,En=class t extends gt{static get instance(){return Zs===null&&(Zs=new t),Zs}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return Ai(e,n,r)}formatOffset(e,n){return un(this.offset(e),n)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}};var Di={};function wc(t){return Di[t]||(Di[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Di[t]}var bc={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Tc(t,e){let n=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,i,s,a,o,c,l,m]=r;return[a,i,s,o,c,l,m]}function Sc(t,e){let n=t.formatToParts(e),r=[];for(let i=0;i<n.length;i++){let{type:s,value:a}=n[i],o=bc[s];s==="era"?r[o]=a:te(o)||(r[o]=parseInt(a,10))}return r}var Ni={},ot=class t extends gt{static create(e){return Ni[e]||(Ni[e]=new t(e)),Ni[e]}static resetCache(){Ni={},Di={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=t.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return Ai(e,n,r,this.name)}formatOffset(e,n){return un(this.offset(e),n)}offset(e){let n=new Date(e);if(isNaN(n))return NaN;let r=wc(this.name),[i,s,a,o,c,l,m]=r.formatToParts?Sc(r,n):Tc(r,n);o==="BC"&&(i=-Math.abs(i)+1);let w=Wn({year:i,month:s,day:a,hour:c===24?0:c,minute:l,second:m,millisecond:0}),g=+n,T=g%1e3;return g-=T>=0?T:1e3+T,(w-g)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}};var xo={};function Ec(t,e={}){let n=JSON.stringify([t,e]),r=xo[n];return r||(r=new Intl.ListFormat(t,e),xo[n]=r),r}var Ys={};function qs(t,e={}){let n=JSON.stringify([t,e]),r=Ys[n];return r||(r=new Intl.DateTimeFormat(t,e),Ys[n]=r),r}var Gs={};function _c(t,e={}){let n=JSON.stringify([t,e]),r=Gs[n];return r||(r=new Intl.NumberFormat(t,e),Gs[n]=r),r}var Js={};function Oc(t,e={}){let a=e,{base:n}=a,r=Hi(a,["base"]),i=JSON.stringify([t,r]),s=Js[i];return s||(s=new Intl.RelativeTimeFormat(t,e),Js[i]=s),s}var Br=null;function xc(){return Br||(Br=new Intl.DateTimeFormat().resolvedOptions().locale,Br)}var Io={};function Ic(t){let e=Io[t];if(!e){let n=new Intl.Locale(t);e="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,Io[t]=e}return e}function kc(t){let e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));let n=t.indexOf("-u-");if(n===-1)return[t];{let r,i;try{r=qs(t).resolvedOptions(),i=t}catch{let c=t.substring(0,n);r=qs(c).resolvedOptions(),i=c}let{numberingSystem:s,calendar:a}=r;return[i,s,a]}}function Ac(t,e,n){return(n||e)&&(t.includes("-u-")||(t+="-u"),n&&(t+=`-ca-${n}`),e&&(t+=`-nu-${e}`)),t}function Nc(t){let e=[];for(let n=1;n<=12;n++){let r=Ne.utc(2009,n,1);e.push(t(r))}return e}function Dc(t){let e=[];for(let n=1;n<=7;n++){let r=Ne.utc(2016,11,13+n);e.push(t(r))}return e}function Ci(t,e,n,r){let i=t.listingMode();return i==="error"?null:i==="en"?n(e):r(e)}function Cc(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}var Qs=class{constructor(e,n,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;let o=r,{padTo:i,floor:s}=o,a=Hi(o,["padTo","floor"]);if(!n||Object.keys(a).length>0){let c=j({useGrouping:!1},r);r.padTo>0&&(c.minimumIntegerDigits=r.padTo),this.inf=_c(e,c)}}format(e){if(this.inf){let n=this.floor?Math.floor(e):e;return this.inf.format(n)}else{let n=this.floor?Math.floor(e):Kn(e,3);return Re(n,this.padTo)}}},Xs=class{constructor(e,n,r){this.opts=r,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){let a=-1*(e.offset/60),o=a>=0?`Etc/GMT+${a}`:`Etc/GMT${a}`;e.offset!==0&&ot.create(o).valid?(i=o,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);let s=j({},this.opts);s.timeZone=s.timeZone||i,this.dtf=qs(n,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){let e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(n=>{if(n.type==="timeZoneName"){let r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return Ee(j({},n),{value:r})}else return n}):e}resolvedOptions(){return this.dtf.resolvedOptions()}},ea=class{constructor(e,n,r){this.opts=j({style:"long"},r),!n&&Mi()&&(this.rtf=Oc(e,r))}format(e,n){return this.rtf?this.rtf.format(e,n):ko(n,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,n){return this.rtf?this.rtf.formatToParts(e,n):[]}},Mc={firstDay:1,minimalDays:4,weekend:[6,7]},_e=class t{static fromOpts(e){return t.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,n,r,i,s=!1){let a=e||Te.defaultLocale,o=a||(s?"en-US":xc()),c=n||Te.defaultNumberingSystem,l=r||Te.defaultOutputCalendar,m=Vr(i)||Te.defaultWeekSettings;return new t(o,c,l,m,a)}static resetCache(){Br=null,Ys={},Gs={},Js={}}static fromObject({locale:e,numberingSystem:n,outputCalendar:r,weekSettings:i}={}){return t.create(e,n,r,i)}constructor(e,n,r,i,s){let[a,o,c]=kc(e);this.locale=a,this.numberingSystem=n||o||null,this.outputCalendar=r||c||null,this.weekSettings=i,this.intl=Ac(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Cc(this)),this.fastNumbersCached}listingMode(){let e=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&n?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:t.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,Vr(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone(Ee(j({},e),{defaultToEN:!0}))}redefaultToSystem(e={}){return this.clone(Ee(j({},e),{defaultToEN:!1}))}months(e,n=!1){return Ci(this,e,ta,()=>{let r=n?{month:e,day:"numeric"}:{month:e},i=n?"format":"standalone";return this.monthsCache[i][e]||(this.monthsCache[i][e]=Nc(s=>this.extract(s,r,"month"))),this.monthsCache[i][e]})}weekdays(e,n=!1){return Ci(this,e,na,()=>{let r=n?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=n?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=Dc(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return Ci(this,void 0,()=>ra,()=>{if(!this.meridiemCache){let e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ne.utc(2016,11,13,9),Ne.utc(2016,11,13,19)].map(n=>this.extract(n,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Ci(this,e,ia,()=>{let n={era:e};return this.eraCache[e]||(this.eraCache[e]=[Ne.utc(-40,1,1),Ne.utc(2017,1,1)].map(r=>this.extract(r,n,"era"))),this.eraCache[e]})}extract(e,n,r){let i=this.dtFormatter(e,n),s=i.formatToParts(),a=s.find(o=>o.type.toLowerCase()===r);return a?a.value:null}numberFormatter(e={}){return new Qs(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,n={}){return new Xs(e,this.intl,n)}relFormatter(e={}){return new ea(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Ec(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Fi()?Ic(this.locale):Mc}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}};var aa=null,Je=class t extends gt{static get utcInstance(){return aa===null&&(aa=new t(0)),aa}static instance(e){return e===0?t.utcInstance:new t(e)}static parseSpecifier(e){if(e){let n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new t(_n(n[1],n[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${un(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${un(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,n){return un(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}};var Ur=class extends gt{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}};function Rt(t,e){let n;if(te(t)||t===null)return e;if(t instanceof gt)return t;if(Ao(t)){let r=t.toLowerCase();return r==="default"?e:r==="local"||r==="system"?En.instance:r==="utc"||r==="gmt"?Je.utcInstance:Je.parseSpecifier(r)||ot.create(t)}else return Ut(t)?Je.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new Ur(t)}var No=()=>Date.now(),Do="system",Co=null,Mo=null,Fo=null,Lo=60,Ro,Po=null,Te=class{static get now(){return No}static set now(e){No=e}static set defaultZone(e){Do=e}static get defaultZone(){return Rt(Do,En.instance)}static get defaultLocale(){return Co}static set defaultLocale(e){Co=e}static get defaultNumberingSystem(){return Mo}static set defaultNumberingSystem(e){Mo=e}static get defaultOutputCalendar(){return Fo}static set defaultOutputCalendar(e){Fo=e}static get defaultWeekSettings(){return Po}static set defaultWeekSettings(e){Po=Vr(e)}static get twoDigitCutoffYear(){return Lo}static set twoDigitCutoffYear(e){Lo=e%100}static get throwOnInvalid(){return Ro}static set throwOnInvalid(e){Ro=e}static resetCaches(){_e.resetCache(),ot.resetCache()}};var Qe=class{constructor(e,n){this.reason=e,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}};var Bo=[0,31,59,90,120,151,181,212,243,273,304,334],Vo=[0,31,60,91,121,152,182,213,244,274,305,335];function St(t,e){return new Qe("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function Li(t,e,n){let r=new Date(Date.UTC(t,e-1,n));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);let i=r.getUTCDay();return i===0?7:i}function Uo(t,e,n){return n+(xn(t)?Vo:Bo)[e-1]}function Wo(t,e){let n=xn(t)?Vo:Bo,r=n.findIndex(s=>s<e),i=e-n[r];return{month:r+1,day:i}}function Ri(t,e){return(t-e+7)%7+1}function Wr(t,e=4,n=1){let{year:r,month:i,day:s}=t,a=Uo(r,i,s),o=Ri(Li(r,i,s),n),c=Math.floor((a-o+14-e)/7),l;return c<1?(l=r-1,c=On(l,e,n)):c>On(r,e,n)?(l=r+1,c=1):l=r,j({weekYear:l,weekNumber:c,weekday:o},jr(t))}function oa(t,e=4,n=1){let{weekYear:r,weekNumber:i,weekday:s}=t,a=Ri(Li(r,1,e),n),o=ln(r),c=i*7+s-a-7+e,l;c<1?(l=r-1,c+=ln(l)):c>o?(l=r+1,c-=ln(r)):l=r;let{month:m,day:p}=Wo(l,c);return j({year:l,month:m,day:p},jr(t))}function Pi(t){let{year:e,month:n,day:r}=t,i=Uo(e,n,r);return j({year:e,ordinal:i},jr(t))}function ua(t){let{year:e,ordinal:n}=t,{month:r,day:i}=Wo(e,n);return j({year:e,month:r,day:i},jr(t))}function la(t,e){if(!te(t.localWeekday)||!te(t.localWeekNumber)||!te(t.localWeekYear)){if(!te(t.weekday)||!te(t.weekNumber)||!te(t.weekYear))throw new Mt("Cannot mix locale-based week fields with ISO-based week fields");return te(t.localWeekday)||(t.weekday=t.localWeekday),te(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),te(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Ko(t,e=4,n=1){let r=Kr(t.weekYear),i=vt(t.weekNumber,1,On(t.weekYear,e,n)),s=vt(t.weekday,1,7);return r?i?s?!1:St("weekday",t.weekday):St("week",t.weekNumber):St("weekYear",t.weekYear)}function jo(t){let e=Kr(t.year),n=vt(t.ordinal,1,ln(t.year));return e?n?!1:St("ordinal",t.ordinal):St("year",t.year)}function ca(t){let e=Kr(t.year),n=vt(t.month,1,12),r=vt(t.day,1,jn(t.year,t.month));return e?n?r?!1:St("day",t.day):St("month",t.month):St("year",t.year)}function fa(t){let{hour:e,minute:n,second:r,millisecond:i}=t,s=vt(e,0,23)||e===24&&n===0&&r===0&&i===0,a=vt(n,0,59),o=vt(r,0,59),c=vt(i,0,999);return s?a?o?c?!1:St("millisecond",i):St("second",r):St("minute",n):St("hour",e)}function te(t){return typeof t>"u"}function Ut(t){return typeof t=="number"}function Kr(t){return typeof t=="number"&&t%1===0}function Ao(t){return typeof t=="string"}function Ho(t){return Object.prototype.toString.call(t)==="[object Date]"}function Mi(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Fi(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function zo(t){return Array.isArray(t)?t:[t]}function ha(t,e,n){if(t.length!==0)return t.reduce((r,i)=>{let s=[e(i),i];return r&&n(r[0],s[0])===r[0]?r:s},null)[1]}function Zo(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function cn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Vr(t){if(t==null)return null;if(typeof t!="object")throw new je("Week settings must be an object");if(!vt(t.firstDay,1,7)||!vt(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!vt(e,1,7)))throw new je("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function vt(t,e,n){return Kr(t)&&t>=e&&t<=n}function Fc(t,e){return t-e*Math.floor(t/e)}function Re(t,e=2){let n=t<0,r;return n?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function Jt(t){if(!(te(t)||t===null||t===""))return parseInt(t,10)}function fn(t){if(!(te(t)||t===null||t===""))return parseFloat(t)}function $r(t){if(!(te(t)||t===null||t==="")){let e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function Kn(t,e,n=!1){let r=10**e;return(n?Math.trunc:Math.round)(t*r)/r}function xn(t){return t%4===0&&(t%100!==0||t%400===0)}function ln(t){return xn(t)?366:365}function jn(t,e){let n=Fc(e-1,12)+1,r=t+(e-n)/12;return n===2?xn(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function Wn(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function $o(t,e,n){return-Ri(Li(t,1,e),n)+e-1}function On(t,e=4,n=1){let r=$o(t,e,n),i=$o(t+1,e,n);return(ln(t)-r+i)/7}function Hr(t){return t>99?t:t>Te.twoDigitCutoffYear?1900+t:2e3+t}function Ai(t,e,n,r=null){let i=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);let a=j({timeZoneName:e},s),o=new Intl.DateTimeFormat(n,a).formatToParts(i).find(c=>c.type.toLowerCase()==="timezonename");return o?o.value:null}function _n(t,e){let n=parseInt(t,10);Number.isNaN(n)&&(n=0);let r=parseInt(e,10)||0,i=n<0||Object.is(n,-0)?-r:r;return n*60+i}function da(t){let e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new je(`Invalid unit value ${t}`);return e}function $n(t,e){let n={};for(let r in t)if(cn(t,r)){let i=t[r];if(i==null)continue;n[e(r)]=da(i)}return n}function un(t,e){let n=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${Re(n,2)}:${Re(r,2)}`;case"narrow":return`${i}${n}${r>0?`:${r}`:""}`;case"techie":return`${i}${Re(n,2)}${Re(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function jr(t){return Zo(t,["hour","minute","second","millisecond"])}var Lc=["January","February","March","April","May","June","July","August","September","October","November","December"],ma=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Rc=["J","F","M","A","M","J","J","A","S","O","N","D"];function ta(t){switch(t){case"narrow":return[...Rc];case"short":return[...ma];case"long":return[...Lc];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var ya=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],pa=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Pc=["M","T","W","T","F","S","S"];function na(t){switch(t){case"narrow":return[...Pc];case"short":return[...pa];case"long":return[...ya];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var ra=["AM","PM"],Bc=["Before Christ","Anno Domini"],Vc=["BC","AD"],Uc=["B","A"];function ia(t){switch(t){case"narrow":return[...Uc];case"short":return[...Vc];case"long":return[...Bc];default:return null}}function Yo(t){return ra[t.hour<12?0:1]}function qo(t,e){return na(e)[t.weekday-1]}function Go(t,e){return ta(e)[t.month-1]}function Jo(t,e){return ia(e)[t.year<0?0:1]}function ko(t,e,n="always",r=!1){let i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(n==="auto"&&s){let p=t==="days";switch(e){case 1:return p?"tomorrow":`next ${i[t][0]}`;case-1:return p?"yesterday":`last ${i[t][0]}`;case 0:return p?"today":`this ${i[t][0]}`;default:}}let a=Object.is(e,-0)||e<0,o=Math.abs(e),c=o===1,l=i[t],m=r?c?l[1]:l[2]||l[1]:c?i[t][0]:t;return a?`${o} ${m} ago`:`in ${o} ${m}`}function Qo(t,e){let n="";for(let r of t)r.literal?n+=r.val:n+=e(r.val);return n}var Wc={D:on,DD:wr,DDD:br,DDDD:Tr,t:Sr,tt:Er,ttt:_r,tttt:Or,T:xr,TT:Ir,TTT:kr,TTTT:Ar,f:Nr,ff:Cr,fff:Fr,ffff:Rr,F:Dr,FF:Mr,FFF:Lr,FFFF:Pr},Xe=class t{static create(e,n={}){return new t(e,n)}static parseFormat(e){let n=null,r="",i=!1,s=[];for(let a=0;a<e.length;a++){let o=e.charAt(a);o==="'"?(r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),n=null,r="",i=!i):i||o===n?r+=o:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=o,n=o)}return r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return Wc[e]}constructor(e,n){this.opts=n,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,j(j({},this.opts),n)).format()}dtFormatter(e,n={}){return this.loc.dtFormatter(e,j(j({},this.opts),n))}formatDateTime(e,n){return this.dtFormatter(e,n).format()}formatDateTimeParts(e,n){return this.dtFormatter(e,n).formatToParts()}formatInterval(e,n){return this.dtFormatter(e.start,n).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,n){return this.dtFormatter(e,n).resolvedOptions()}num(e,n=0){if(this.opts.forceSimple)return Re(e,n);let r=j({},this.opts);return n>0&&(r.padTo=n),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,n){let r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(g,T)=>this.loc.extract(e,g,T),a=g=>e.isOffsetFixed&&e.offset===0&&g.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,g.format):"",o=()=>r?Yo(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),c=(g,T)=>r?Go(e,g):s(T?{month:g}:{month:g,day:"numeric"},"month"),l=(g,T)=>r?qo(e,g):s(T?{weekday:g}:{weekday:g,month:"long",day:"numeric"},"weekday"),m=g=>{let T=t.macroTokenToFormatOpts(g);return T?this.formatWithSystemDefault(e,T):g},p=g=>r?Jo(e,g):s({era:g},"era"),w=g=>{switch(g){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return a({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return a({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return a({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return o();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return l("short",!0);case"cccc":return l("long",!0);case"ccccc":return l("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return l("short",!1);case"EEEE":return l("long",!1);case"EEEEE":return l("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return c("short",!0);case"LLLL":return c("long",!0);case"LLLLL":return c("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return c("short",!1);case"MMMM":return c("long",!1);case"MMMMM":return c("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return p("short");case"GG":return p("long");case"GGGGG":return p("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return m(g)}};return Qo(t.parseFormat(n),w)}formatDurationFromString(e,n){let r=c=>{switch(c[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=c=>l=>{let m=r(l);return m?this.num(c.get(m),l.length):l},s=t.parseFormat(n),a=s.reduce((c,{literal:l,val:m})=>l?c:c.concat(m),[]),o=e.shiftTo(...a.map(r).filter(c=>c));return Qo(s,i(o))}};var eu=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function zn(...t){let e=t.reduce((n,r)=>n+r.source,"");return RegExp(`^${e}$`)}function Zn(...t){return e=>t.reduce(([n,r,i],s)=>{let[a,o,c]=s(e,i);return[j(j({},n),a),o||r,c]},[{},null,1]).slice(0,2)}function Yn(t,...e){if(t==null)return[null,null];for(let[n,r]of e){let i=n.exec(t);if(i)return r(i)}return[null,null]}function tu(...t){return(e,n)=>{let r={},i;for(i=0;i<t.length;i++)r[t[i]]=Jt(e[n+i]);return[r,null,n+i]}}var nu=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Kc=`(?:${nu.source}?(?:\\[(${eu.source})\\])?)?`,ga=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,ru=RegExp(`${ga.source}${Kc}`),va=RegExp(`(?:T${ru.source})?`),jc=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,$c=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Hc=/(\d{4})-?(\d{3})/,zc=tu("weekYear","weekNumber","weekDay"),Zc=tu("year","ordinal"),Yc=/(\d{4})-(\d\d)-(\d\d)/,iu=RegExp(`${ga.source} ?(?:${nu.source}|(${eu.source}))?`),qc=RegExp(`(?: ${iu.source})?`);function Hn(t,e,n){let r=t[e];return te(r)?n:Jt(r)}function Gc(t,e){return[{year:Hn(t,e),month:Hn(t,e+1,1),day:Hn(t,e+2,1)},null,e+3]}function qn(t,e){return[{hours:Hn(t,e,0),minutes:Hn(t,e+1,0),seconds:Hn(t,e+2,0),milliseconds:$r(t[e+3])},null,e+4]}function zr(t,e){let n=!t[e]&&!t[e+1],r=_n(t[e+1],t[e+2]),i=n?null:Je.instance(r);return[{},i,e+3]}function Zr(t,e){let n=t[e]?ot.create(t[e]):null;return[{},n,e+1]}var Jc=RegExp(`^T?${ga.source}$`),Qc=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Xc(t){let[e,n,r,i,s,a,o,c,l]=t,m=e[0]==="-",p=c&&c[0]==="-",w=(g,T=!1)=>g!==void 0&&(T||g&&m)?-g:g;return[{years:w(fn(n)),months:w(fn(r)),weeks:w(fn(i)),days:w(fn(s)),hours:w(fn(a)),minutes:w(fn(o)),seconds:w(fn(c),c==="-0"),milliseconds:w($r(l),p)}]}var ef={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function wa(t,e,n,r,i,s,a){let o={year:e.length===2?Hr(Jt(e)):Jt(e),month:ma.indexOf(n)+1,day:Jt(r),hour:Jt(i),minute:Jt(s)};return a&&(o.second=Jt(a)),t&&(o.weekday=t.length>3?ya.indexOf(t)+1:pa.indexOf(t)+1),o}var tf=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function nf(t){let[,e,n,r,i,s,a,o,c,l,m,p]=t,w=wa(e,i,r,n,s,a,o),g;return c?g=ef[c]:l?g=0:g=_n(m,p),[w,new Je(g)]}function rf(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var sf=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,af=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,of=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Xo(t){let[,e,n,r,i,s,a,o]=t;return[wa(e,i,r,n,s,a,o),Je.utcInstance]}function uf(t){let[,e,n,r,i,s,a,o]=t;return[wa(e,o,n,r,i,s,a),Je.utcInstance]}var lf=zn(jc,va),cf=zn($c,va),ff=zn(Hc,va),hf=zn(ru),su=Zn(Gc,qn,zr,Zr),df=Zn(zc,qn,zr,Zr),mf=Zn(Zc,qn,zr,Zr),yf=Zn(qn,zr,Zr);function au(t){return Yn(t,[lf,su],[cf,df],[ff,mf],[hf,yf])}function ou(t){return Yn(rf(t),[tf,nf])}function uu(t){return Yn(t,[sf,Xo],[af,Xo],[of,uf])}function lu(t){return Yn(t,[Qc,Xc])}var pf=Zn(qn);function cu(t){return Yn(t,[Jc,pf])}var gf=zn(Yc,qc),vf=zn(iu),wf=Zn(qn,zr,Zr);function fu(t){return Yn(t,[gf,su],[vf,wf])}var hu="Invalid Duration",mu={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},bf=j({years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3}},mu),Et=146097/400,Gn=146097/4800,Tf=j({years:{quarters:4,months:12,weeks:Et/7,days:Et,hours:Et*24,minutes:Et*24*60,seconds:Et*24*60*60,milliseconds:Et*24*60*60*1e3},quarters:{months:3,weeks:Et/28,days:Et/4,hours:Et*24/4,minutes:Et*24*60/4,seconds:Et*24*60*60/4,milliseconds:Et*24*60*60*1e3/4},months:{weeks:Gn/7,days:Gn,hours:Gn*24,minutes:Gn*24*60,seconds:Gn*24*60*60,milliseconds:Gn*24*60*60*1e3}},mu),In=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Sf=In.slice(0).reverse();function hn(t,e,n=!1){let r={values:n?e.values:j(j({},t.values),e.values||{}),loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Pe(r)}function yu(t,e){let n=e.milliseconds??0;for(let r of Sf.slice(1))e[r]&&(n+=e[r]*t[r].milliseconds);return n}function du(t,e){let n=yu(t,e)<0?-1:1;In.reduceRight((r,i)=>{if(te(e[i]))return r;if(r){let s=e[r]*n,a=t[i][r],o=Math.floor(s/a);e[i]+=o*n,e[r]-=o*a*n}return i},null),In.reduce((r,i)=>{if(te(e[i]))return r;if(r){let s=e[r]%1;e[r]-=s,e[i]+=s*t[r][i]}return i},null)}function Ef(t){let e={};for(let[n,r]of Object.entries(t))r!==0&&(e[n]=r);return e}var Pe=class t{constructor(e){let n=e.conversionAccuracy==="longterm"||!1,r=n?Tf:bf;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||_e.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,n){return t.fromObject({milliseconds:e},n)}static fromObject(e,n={}){if(e==null||typeof e!="object")throw new je(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new t({values:$n(e,t.normalizeUnit),loc:_e.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(e){if(Ut(e))return t.fromMillis(e);if(t.isDuration(e))return e;if(typeof e=="object")return t.fromObject(e);throw new je(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,n){let[r]=lu(e);return r?t.fromObject(r,n):t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,n){let[r]=cu(e);return r?t.fromObject(r,n):t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,n=null){if(!e)throw new je("need to specify a reason the Duration is invalid");let r=e instanceof Qe?e:new Qe(e,n);if(Te.throwOnInvalid)throw new Ii(r);return new t({invalid:r})}static normalizeUnit(e){let n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!n)throw new Un(e);return n}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,n={}){let r=Ee(j({},n),{floor:n.round!==!1&&n.floor!==!1});return this.isValid?Xe.create(this.loc,r).formatDurationFromString(this,e):hu}toHuman(e={}){if(!this.isValid)return hu;let n=In.map(r=>{let i=this.values[r];return te(i)?null:this.loc.numberFormatter(Ee(j({style:"unit",unitDisplay:"long"},e),{unit:r.slice(0,-1)})).format(i)}).filter(r=>r);return this.loc.listFormatter(j({type:"conjunction",style:e.listStyle||"narrow"},e)).format(n)}toObject(){return this.isValid?j({},this.values):{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=Kn(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;let n=this.toMillis();return n<0||n>=864e5?null:(e=Ee(j({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},e),{includeOffset:!1}),Ne.fromMillis(n,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?yu(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;let n=t.fromDurationLike(e),r={};for(let i of In)(cn(n.values,i)||cn(this.values,i))&&(r[i]=n.get(i)+this.get(i));return hn(this,{values:r},!0)}minus(e){if(!this.isValid)return this;let n=t.fromDurationLike(e);return this.plus(n.negate())}mapUnits(e){if(!this.isValid)return this;let n={};for(let r of Object.keys(this.values))n[r]=da(e(this.values[r],r));return hn(this,{values:n},!0)}get(e){return this[t.normalizeUnit(e)]}set(e){if(!this.isValid)return this;let n=j(j({},this.values),$n(e,t.normalizeUnit));return hn(this,{values:n})}reconfigure({locale:e,numberingSystem:n,conversionAccuracy:r,matrix:i}={}){let a={loc:this.loc.clone({locale:e,numberingSystem:n}),matrix:i,conversionAccuracy:r};return hn(this,a)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;let e=this.toObject();return du(this.matrix,e),hn(this,{values:e},!0)}rescale(){if(!this.isValid)return this;let e=Ef(this.normalize().shiftToAll().toObject());return hn(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(a=>t.normalizeUnit(a));let n={},r={},i=this.toObject(),s;for(let a of In)if(e.indexOf(a)>=0){s=a;let o=0;for(let l in r)o+=this.matrix[l][a]*r[l],r[l]=0;Ut(i[a])&&(o+=i[a]);let c=Math.trunc(o);n[a]=c,r[a]=(o*1e3-c*1e3)/1e3}else Ut(i[a])&&(r[a]=i[a]);for(let a in r)r[a]!==0&&(n[s]+=a===s?r[a]:r[a]/this.matrix[s][a]);return du(this.matrix,n),hn(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;let e={};for(let n of Object.keys(this.values))e[n]=this.values[n]===0?0:-this.values[n];return hn(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function n(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(let r of In)if(!n(this.values[r],e.values[r]))return!1;return!0}};var Jn="Invalid Interval";function _f(t,e){return!t||!t.isValid?dn.invalid("missing or invalid start"):!e||!e.isValid?dn.invalid("missing or invalid end"):e<t?dn.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}var dn=class t{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,n=null){if(!e)throw new je("need to specify a reason the Interval is invalid");let r=e instanceof Qe?e:new Qe(e,n);if(Te.throwOnInvalid)throw new xi(r);return new t({invalid:r})}static fromDateTimes(e,n){let r=Qn(e),i=Qn(n),s=_f(r,i);return s??new t({start:r,end:i})}static after(e,n){let r=Pe.fromDurationLike(n),i=Qn(e);return t.fromDateTimes(i,i.plus(r))}static before(e,n){let r=Pe.fromDurationLike(n),i=Qn(e);return t.fromDateTimes(i.minus(r),i)}static fromISO(e,n){let[r,i]=(e||"").split("/",2);if(r&&i){let s,a;try{s=Ne.fromISO(r,n),a=s.isValid}catch{a=!1}let o,c;try{o=Ne.fromISO(i,n),c=o.isValid}catch{c=!1}if(a&&c)return t.fromDateTimes(s,o);if(a){let l=Pe.fromISO(i,n);if(l.isValid)return t.after(s,l)}else if(c){let l=Pe.fromISO(r,n);if(l.isValid)return t.before(o,l)}}return t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",n){if(!this.isValid)return NaN;let r=this.start.startOf(e,n),i;return n?.useLocaleWeeks?i=this.end.reconfigure({locale:r.locale}):i=this.end,i=i.startOf(e,n),Math.floor(i.diff(r,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:n}={}){return this.isValid?t.fromDateTimes(e||this.s,n||this.e):this}splitAt(...e){if(!this.isValid)return[];let n=e.map(Qn).filter(a=>this.contains(a)).sort((a,o)=>a.toMillis()-o.toMillis()),r=[],{s:i}=this,s=0;for(;i<this.e;){let a=n[s]||this.e,o=+a>+this.e?this.e:a;r.push(t.fromDateTimes(i,o)),i=o,s+=1}return r}splitBy(e){let n=Pe.fromDurationLike(e);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:r}=this,i=1,s,a=[];for(;r<this.e;){let o=this.start.plus(n.mapUnits(c=>c*i));s=+o>+this.e?this.e:o,a.push(t.fromDateTimes(r,s)),r=s,i+=1}return a}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;let n=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return n>=r?null:t.fromDateTimes(n,r)}union(e){if(!this.isValid)return this;let n=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return t.fromDateTimes(n,r)}static merge(e){let[n,r]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],a)=>s?s.overlaps(a)||s.abutsStart(a)?[i,s.union(a)]:[i.concat([s]),a]:[i,a],[[],null]);return r&&n.push(r),n}static xor(e){let n=null,r=0,i=[],s=e.map(c=>[{time:c.s,type:"s"},{time:c.e,type:"e"}]),a=Array.prototype.concat(...s),o=a.sort((c,l)=>c.time-l.time);for(let c of o)r+=c.type==="s"?1:-1,r===1?n=c.time:(n&&+n!=+c.time&&i.push(t.fromDateTimes(n,c.time)),n=null);return t.merge(i)}difference(...e){return t.xor([this].concat(e)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:Jn}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=on,n={}){return this.isValid?Xe.create(this.s.loc.clone(n),e).formatInterval(this):Jn}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Jn}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Jn}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Jn}toFormat(e,{separator:n=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(e)}${n}${this.e.toFormat(e)}`:Jn}toDuration(e,n){return this.isValid?this.e.diff(this.s,e,n):Pe.invalid(this.invalidReason)}mapEndpoints(e){return t.fromDateTimes(e(this.s),e(this.e))}};var mn=class{static hasDST(e=Te.defaultZone){let n=Ne.now().setZone(e).set({month:12});return!e.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(e){return ot.isValidZone(e)}static normalizeZone(e){return Rt(e,Te.defaultZone)}static getStartOfWeek({locale:e=null,locObj:n=null}={}){return(n||_e.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:n=null}={}){return(n||_e.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:n=null}={}){return(n||_e.create(e)).getWeekendDays().slice()}static months(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||_e.create(n,r,s)).months(e)}static monthsFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||_e.create(n,r,s)).months(e,!0)}static weekdays(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||_e.create(n,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||_e.create(n,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return _e.create(e).meridiems()}static eras(e="short",{locale:n=null}={}){return _e.create(n,null,"gregory").eras(e)}static features(){return{relative:Mi(),localeWeek:Fi()}}};function pu(t,e){let n=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(e)-n(t);return Math.floor(Pe.fromMillis(r).as("days"))}function Of(t,e,n){let r=[["years",(c,l)=>l.year-c.year],["quarters",(c,l)=>l.quarter-c.quarter+(l.year-c.year)*4],["months",(c,l)=>l.month-c.month+(l.year-c.year)*12],["weeks",(c,l)=>{let m=pu(c,l);return(m-m%7)/7}],["days",pu]],i={},s=t,a,o;for(let[c,l]of r)n.indexOf(c)>=0&&(a=c,i[c]=l(t,e),o=s.plus(i),o>e?(i[c]--,t=s.plus(i),t>e&&(o=t,i[c]--,t=s.plus(i))):t=o);return[t,i,o,a]}function gu(t,e,n,r){let[i,s,a,o]=Of(t,e,n),c=e-i,l=n.filter(p=>["hours","minutes","seconds","milliseconds"].indexOf(p)>=0);l.length===0&&(a<e&&(a=i.plus({[o]:1})),a!==i&&(s[o]=(s[o]||0)+c/(a-i)));let m=Pe.fromObject(s,r);return l.length>0?Pe.fromMillis(c,r).shiftTo(...l).plus(m):m}var ba={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},vu={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},xf=ba.hanidec.replace(/[\[|\]]/g,"").split("");function wu(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(t[n].search(ba.hanidec)!==-1)e+=xf.indexOf(t[n]);else for(let i in vu){let[s,a]=vu[i];r>=s&&r<=a&&(e+=r-s)}}return parseInt(e,10)}else return e}function _t({numberingSystem:t},e=""){return new RegExp(`${ba[t||"latn"]}${e}`)}var If="missing Intl.DateTimeFormat.formatToParts support";function we(t,e=n=>n){return{regex:t,deser:([n])=>e(wu(n))}}var kf="\xA0",Su=`[ ${kf}]`,Eu=new RegExp(Su,"g");function Af(t){return t.replace(/\./g,"\\.?").replace(Eu,Su)}function bu(t){return t.replace(/\./g,"").replace(Eu," ").toLowerCase()}function Pt(t,e){return t===null?null:{regex:RegExp(t.map(Af).join("|")),deser:([n])=>t.findIndex(r=>bu(n)===bu(r))+e}}function Tu(t,e){return{regex:t,deser:([,n,r])=>_n(n,r),groups:e}}function Bi(t){return{regex:t,deser:([e])=>e}}function Nf(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Df(t,e){let n=_t(e),r=_t(e,"{2}"),i=_t(e,"{3}"),s=_t(e,"{4}"),a=_t(e,"{6}"),o=_t(e,"{1,2}"),c=_t(e,"{1,3}"),l=_t(e,"{1,6}"),m=_t(e,"{1,9}"),p=_t(e,"{2,4}"),w=_t(e,"{4,6}"),g=k=>({regex:RegExp(Nf(k.val)),deser:([O])=>O,literal:!0}),S=(k=>{if(t.literal)return g(k);switch(k.val){case"G":return Pt(e.eras("short"),0);case"GG":return Pt(e.eras("long"),0);case"y":return we(l);case"yy":return we(p,Hr);case"yyyy":return we(s);case"yyyyy":return we(w);case"yyyyyy":return we(a);case"M":return we(o);case"MM":return we(r);case"MMM":return Pt(e.months("short",!0),1);case"MMMM":return Pt(e.months("long",!0),1);case"L":return we(o);case"LL":return we(r);case"LLL":return Pt(e.months("short",!1),1);case"LLLL":return Pt(e.months("long",!1),1);case"d":return we(o);case"dd":return we(r);case"o":return we(c);case"ooo":return we(i);case"HH":return we(r);case"H":return we(o);case"hh":return we(r);case"h":return we(o);case"mm":return we(r);case"m":return we(o);case"q":return we(o);case"qq":return we(r);case"s":return we(o);case"ss":return we(r);case"S":return we(c);case"SSS":return we(i);case"u":return Bi(m);case"uu":return Bi(o);case"uuu":return we(n);case"a":return Pt(e.meridiems(),0);case"kkkk":return we(s);case"kk":return we(p,Hr);case"W":return we(o);case"WW":return we(r);case"E":case"c":return we(n);case"EEE":return Pt(e.weekdays("short",!1),1);case"EEEE":return Pt(e.weekdays("long",!1),1);case"ccc":return Pt(e.weekdays("short",!0),1);case"cccc":return Pt(e.weekdays("long",!0),1);case"Z":case"ZZ":return Tu(new RegExp(`([+-]${o.source})(?::(${r.source}))?`),2);case"ZZZ":return Tu(new RegExp(`([+-]${o.source})(${r.source})?`),2);case"z":return Bi(/[a-z_+-/]{1,256}?/i);case" ":return Bi(/[^\S\n\r]/);default:return g(k)}})(t)||{invalidReason:If};return S.token=t,S}var Cf={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Mf(t,e,n){let{type:r,value:i}=t;if(r==="literal"){let c=/^\s+$/.test(i);return{literal:!c,val:c?" ":i}}let s=e[r],a=r;r==="hour"&&(e.hour12!=null?a=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?a="hour12":a="hour24":a=n.hour12?"hour12":"hour24");let o=Cf[a];if(typeof o=="object"&&(o=o[s]),o)return{literal:!1,val:o}}function Ff(t){return[`^${t.map(n=>n.regex).reduce((n,r)=>`${n}(${r.source})`,"")}$`,t]}function Lf(t,e,n){let r=t.match(e);if(r){let i={},s=1;for(let a in n)if(cn(n,a)){let o=n[a],c=o.groups?o.groups+1:1;!o.literal&&o.token&&(i[o.token.val[0]]=o.deser(r.slice(s,s+c))),s+=c}return[r,i]}else return[r,{}]}function Rf(t){let e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},n=null,r;return te(t.z)||(n=ot.create(t.z)),te(t.Z)||(n||(n=new Je(t.Z)),r=t.Z),te(t.q)||(t.M=(t.q-1)*3+1),te(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),te(t.u)||(t.S=$r(t.u)),[Object.keys(t).reduce((s,a)=>{let o=e(a);return o&&(s[o]=t[a]),s},{}),n,r]}var Ta=null;function Pf(){return Ta||(Ta=Ne.fromMillis(1555555555555)),Ta}function Bf(t,e){if(t.literal)return t;let n=Xe.macroTokenToFormatOpts(t.val),r=_a(n,e);return r==null||r.includes(void 0)?t:r}function Sa(t,e){return Array.prototype.concat(...t.map(n=>Bf(n,e)))}function Ea(t,e,n){let r=Sa(Xe.parseFormat(n),t),i=r.map(a=>Df(a,t)),s=i.find(a=>a.invalidReason);if(s)return{input:e,tokens:r,invalidReason:s.invalidReason};{let[a,o]=Ff(i),c=RegExp(a,"i"),[l,m]=Lf(e,c,o),[p,w,g]=m?Rf(m):[null,null,void 0];if(cn(m,"a")&&cn(m,"H"))throw new Mt("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:r,regex:c,rawMatches:l,matches:m,result:p,zone:w,specificOffset:g}}}function _u(t,e,n){let{result:r,zone:i,specificOffset:s,invalidReason:a}=Ea(t,e,n);return[r,i,s,a]}function _a(t,e){if(!t)return null;let r=Xe.create(e,t).dtFormatter(Pf()),i=r.formatToParts(),s=r.resolvedOptions();return i.map(a=>Mf(a,t,s))}var Oa="Invalid DateTime",Ou=864e13;function Vi(t){return new Qe("unsupported zone",`the zone "${t.name}" is not supported`)}function xa(t){return t.weekData===null&&(t.weekData=Wr(t.c)),t.weekData}function Ia(t){return t.localWeekData===null&&(t.localWeekData=Wr(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function kn(t,e){let n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new Ne(Ee(j(j({},n),e),{old:n}))}function Cu(t,e,n){let r=t-e*60*1e3,i=n.offset(r);if(e===i)return[r,e];r-=(i-e)*60*1e3;let s=n.offset(r);return i===s?[r,i]:[t-Math.min(i,s)*60*1e3,Math.max(i,s)]}function Ui(t,e){t+=e*60*1e3;let n=new Date(t);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function Ki(t,e,n){return Cu(Wn(t),e,n)}function xu(t,e){let n=t.o,r=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s=Ee(j({},t.c),{year:r,month:i,day:Math.min(t.c.day,jn(r,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7}),a=Pe.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),o=Wn(s),[c,l]=Cu(o,n,t.zone);return a!==0&&(c+=a,l=t.zone.offset(c)),{ts:c,o:l}}function Yr(t,e,n,r,i,s){let{setZone:a,zone:o}=n;if(t&&Object.keys(t).length!==0||e){let c=e||o,l=Ne.fromObject(t,Ee(j({},n),{zone:c,specificOffset:s}));return a?l:l.setZone(o)}else return Ne.invalid(new Qe("unparsable",`the input "${i}" can't be parsed as ${r}`))}function Wi(t,e,n=!0){return t.isValid?Xe.create(_e.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(t,e):null}function ka(t,e){let n=t.c.year>9999||t.c.year<0,r="";return n&&t.c.year>=0&&(r+="+"),r+=Re(t.c.year,n?6:4),e?(r+="-",r+=Re(t.c.month),r+="-",r+=Re(t.c.day)):(r+=Re(t.c.month),r+=Re(t.c.day)),r}function Iu(t,e,n,r,i,s){let a=Re(t.c.hour);return e?(a+=":",a+=Re(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(a+=":")):a+=Re(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!n)&&(a+=Re(t.c.second),(t.c.millisecond!==0||!r)&&(a+=".",a+=Re(t.c.millisecond,3))),i&&(t.isOffsetFixed&&t.offset===0&&!s?a+="Z":t.o<0?(a+="-",a+=Re(Math.trunc(-t.o/60)),a+=":",a+=Re(Math.trunc(-t.o%60))):(a+="+",a+=Re(Math.trunc(t.o/60)),a+=":",a+=Re(Math.trunc(t.o%60)))),s&&(a+="["+t.zone.ianaName+"]"),a}var Mu={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Vf={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Uf={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Fu=["year","month","day","hour","minute","second","millisecond"],Wf=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Kf=["year","ordinal","hour","minute","second","millisecond"];function jf(t){let e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new Un(t);return e}function ku(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return jf(t)}}function Au(t,e){let n=Rt(e.zone,Te.defaultZone),r=_e.fromObject(e),i=Te.now(),s,a;if(te(t.year))s=i;else{for(let l of Fu)te(t[l])&&(t[l]=Mu[l]);let o=ca(t)||fa(t);if(o)return Ne.invalid(o);let c=n.offset(i);[s,a]=Ki(t,c,n)}return new Ne({ts:s,zone:n,loc:r,o:a})}function Nu(t,e,n){let r=te(n.round)?!0:n.round,i=(a,o)=>(a=Kn(a,r||n.calendary?0:2,!0),e.loc.clone(n).relFormatter(n).format(a,o)),s=a=>n.calendary?e.hasSame(t,a)?0:e.startOf(a).diff(t.startOf(a),a).get(a):e.diff(t,a).get(a);if(n.unit)return i(s(n.unit),n.unit);for(let a of n.units){let o=s(a);if(Math.abs(o)>=1)return i(o,a)}return i(t>e?-0:0,n.units[n.units.length-1])}function Du(t){let e={},n;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],n=Array.from(t).slice(0,t.length-1)):n=Array.from(t),[e,n]}var Ne=class t{constructor(e){let n=e.zone||Te.defaultZone,r=e.invalid||(Number.isNaN(e.ts)?new Qe("invalid input"):null)||(n.isValid?null:Vi(n));this.ts=te(e.ts)?Te.now():e.ts;let i=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(n))[i,s]=[e.old.c,e.old.o];else{let o=n.offset(this.ts);i=Ui(this.ts,o),r=Number.isNaN(i.year)?new Qe("invalid input"):null,i=r?null:i,s=r?null:o}this._zone=n,this.loc=e.loc||_e.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new t({})}static local(){let[e,n]=Du(arguments),[r,i,s,a,o,c,l]=n;return Au({year:r,month:i,day:s,hour:a,minute:o,second:c,millisecond:l},e)}static utc(){let[e,n]=Du(arguments),[r,i,s,a,o,c,l]=n;return e.zone=Je.utcInstance,Au({year:r,month:i,day:s,hour:a,minute:o,second:c,millisecond:l},e)}static fromJSDate(e,n={}){let r=Ho(e)?e.valueOf():NaN;if(Number.isNaN(r))return t.invalid("invalid input");let i=Rt(n.zone,Te.defaultZone);return i.isValid?new t({ts:r,zone:i,loc:_e.fromObject(n)}):t.invalid(Vi(i))}static fromMillis(e,n={}){if(Ut(e))return e<-Ou||e>Ou?t.invalid("Timestamp out of range"):new t({ts:e,zone:Rt(n.zone,Te.defaultZone),loc:_e.fromObject(n)});throw new je(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,n={}){if(Ut(e))return new t({ts:e*1e3,zone:Rt(n.zone,Te.defaultZone),loc:_e.fromObject(n)});throw new je("fromSeconds requires a numerical input")}static fromObject(e,n={}){e=e||{};let r=Rt(n.zone,Te.defaultZone);if(!r.isValid)return t.invalid(Vi(r));let i=_e.fromObject(n),s=$n(e,ku),{minDaysInFirstWeek:a,startOfWeek:o}=la(s,i),c=Te.now(),l=te(n.specificOffset)?r.offset(c):n.specificOffset,m=!te(s.ordinal),p=!te(s.year),w=!te(s.month)||!te(s.day),g=p||w,T=s.weekYear||s.weekNumber;if((g||m)&&T)throw new Mt("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(w&&m)throw new Mt("Can't mix ordinal dates with month/day");let S=T||s.weekday&&!g,k,O,D=Ui(c,l);S?(k=Wf,O=Vf,D=Wr(D,a,o)):m?(k=Kf,O=Uf,D=Pi(D)):(k=Fu,O=Mu);let E=!1;for(let d of k){let x=s[d];te(x)?E?s[d]=O[d]:s[d]=D[d]:E=!0}let I=S?Ko(s,a,o):m?jo(s):ca(s),N=I||fa(s);if(N)return t.invalid(N);let L=S?oa(s,a,o):m?ua(s):s,[B,z]=Ki(L,l,r),v=new t({ts:B,zone:r,o:z,loc:i});return s.weekday&&g&&e.weekday!==v.weekday?t.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${v.toISO()}`):v}static fromISO(e,n={}){let[r,i]=au(e);return Yr(r,i,n,"ISO 8601",e)}static fromRFC2822(e,n={}){let[r,i]=ou(e);return Yr(r,i,n,"RFC 2822",e)}static fromHTTP(e,n={}){let[r,i]=uu(e);return Yr(r,i,n,"HTTP",n)}static fromFormat(e,n,r={}){if(te(e)||te(n))throw new je("fromFormat requires an input string and a format");let{locale:i=null,numberingSystem:s=null}=r,a=_e.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[o,c,l,m]=_u(a,e,n);return m?t.invalid(m):Yr(o,c,r,`format ${n}`,e,l)}static fromString(e,n,r={}){return t.fromFormat(e,n,r)}static fromSQL(e,n={}){let[r,i]=fu(e);return Yr(r,i,n,"SQL",e)}static invalid(e,n=null){if(!e)throw new je("need to specify a reason the DateTime is invalid");let r=e instanceof Qe?e:new Qe(e,n);if(Te.throwOnInvalid)throw new Oi(r);return new t({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,n={}){let r=_a(e,_e.fromObject(n));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(e,n={}){return Sa(Xe.parseFormat(e),_e.fromObject(n)).map(i=>i.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?xa(this).weekYear:NaN}get weekNumber(){return this.isValid?xa(this).weekNumber:NaN}get weekday(){return this.isValid?xa(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Ia(this).weekday:NaN}get localWeekNumber(){return this.isValid?Ia(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Ia(this).weekYear:NaN}get ordinal(){return this.isValid?Pi(this.c).ordinal:NaN}get monthShort(){return this.isValid?mn.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?mn.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?mn.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?mn.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];let e=864e5,n=6e4,r=Wn(this.c),i=this.zone.offset(r-e),s=this.zone.offset(r+e),a=this.zone.offset(r-i*n),o=this.zone.offset(r-s*n);if(a===o)return[this];let c=r-a*n,l=r-o*n,m=Ui(c,a),p=Ui(l,o);return m.hour===p.hour&&m.minute===p.minute&&m.second===p.second&&m.millisecond===p.millisecond?[kn(this,{ts:c}),kn(this,{ts:l})]:[this]}get isInLeapYear(){return xn(this.year)}get daysInMonth(){return jn(this.year,this.month)}get daysInYear(){return this.isValid?ln(this.year):NaN}get weeksInWeekYear(){return this.isValid?On(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?On(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){let{locale:n,numberingSystem:r,calendar:i}=Xe.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:n,numberingSystem:r,outputCalendar:i}}toUTC(e=0,n={}){return this.setZone(Je.instance(e),n)}toLocal(){return this.setZone(Te.defaultZone)}setZone(e,{keepLocalTime:n=!1,keepCalendarTime:r=!1}={}){if(e=Rt(e,Te.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(n||r){let s=e.offset(this.ts),a=this.toObject();[i]=Ki(a,s,e)}return kn(this,{ts:i,zone:e})}else return t.invalid(Vi(e))}reconfigure({locale:e,numberingSystem:n,outputCalendar:r}={}){let i=this.loc.clone({locale:e,numberingSystem:n,outputCalendar:r});return kn(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;let n=$n(e,ku),{minDaysInFirstWeek:r,startOfWeek:i}=la(n,this.loc),s=!te(n.weekYear)||!te(n.weekNumber)||!te(n.weekday),a=!te(n.ordinal),o=!te(n.year),c=!te(n.month)||!te(n.day),l=o||c,m=n.weekYear||n.weekNumber;if((l||a)&&m)throw new Mt("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&a)throw new Mt("Can't mix ordinal dates with month/day");let p;s?p=oa(j(j({},Wr(this.c,r,i)),n),r,i):te(n.ordinal)?(p=j(j({},this.toObject()),n),te(n.day)&&(p.day=Math.min(jn(p.year,p.month),p.day))):p=ua(j(j({},Pi(this.c)),n));let[w,g]=Ki(p,this.o,this.zone);return kn(this,{ts:w,o:g})}plus(e){if(!this.isValid)return this;let n=Pe.fromDurationLike(e);return kn(this,xu(this,n))}minus(e){if(!this.isValid)return this;let n=Pe.fromDurationLike(e).negate();return kn(this,xu(this,n))}startOf(e,{useLocaleWeeks:n=!1}={}){if(!this.isValid)return this;let r={},i=Pe.normalizeUnit(e);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break;case"milliseconds":break}if(i==="weeks")if(n){let s=this.loc.getStartOfWeek(),{weekday:a}=this;a<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(i==="quarters"){let s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,n){return this.isValid?this.plus({[e]:1}).startOf(e,n).minus(1):this}toFormat(e,n={}){return this.isValid?Xe.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,e):Oa}toLocaleString(e=on,n={}){return this.isValid?Xe.create(this.loc.clone(n),e).formatDateTime(this):Oa}toLocaleParts(e={}){return this.isValid?Xe.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:n=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;let a=e==="extended",o=ka(this,a);return o+="T",o+=Iu(this,a,n,r,i,s),o}toISODate({format:e="extended"}={}){return this.isValid?ka(this,e==="extended"):null}toISOWeekDate(){return Wi(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:n=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:s=!1,format:a="extended"}={}){return this.isValid?(i?"T":"")+Iu(this,a==="extended",n,e,r,s):null}toRFC2822(){return Wi(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Wi(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?ka(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:n=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(n||e)&&(r&&(i+=" "),n?i+="z":e&&(i+="ZZ")),Wi(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Oa}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};let n=j({},this.c);return e.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,n="milliseconds",r={}){if(!this.isValid||!e.isValid)return Pe.invalid("created by diffing an invalid DateTime");let i=j({locale:this.locale,numberingSystem:this.numberingSystem},r),s=zo(n).map(Pe.normalizeUnit),a=e.valueOf()>this.valueOf(),o=a?this:e,c=a?e:this,l=gu(o,c,s,i);return a?l.negate():l}diffNow(e="milliseconds",n={}){return this.diff(t.now(),e,n)}until(e){return this.isValid?dn.fromDateTimes(this,e):this}hasSame(e,n,r){if(!this.isValid)return!1;let i=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(n,r)<=i&&i<=s.endOf(n,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;let n=e.base||t.fromObject({},{zone:this.zone}),r=e.padding?this<n?-e.padding:e.padding:0,i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),Nu(n,this.plus(r),Ee(j({},e),{numeric:"always",units:i,unit:s}))}toRelativeCalendar(e={}){return this.isValid?Nu(e.base||t.fromObject({},{zone:this.zone}),this,Ee(j({},e),{numeric:"auto",units:["years","months","days"],calendary:!0})):null}static min(...e){if(!e.every(t.isDateTime))throw new je("min requires all arguments be DateTimes");return ha(e,n=>n.valueOf(),Math.min)}static max(...e){if(!e.every(t.isDateTime))throw new je("max requires all arguments be DateTimes");return ha(e,n=>n.valueOf(),Math.max)}static fromFormatExplain(e,n,r={}){let{locale:i=null,numberingSystem:s=null}=r,a=_e.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return Ea(a,e,n)}static fromStringExplain(e,n,r={}){return t.fromFormatExplain(e,n,r)}static get DATE_SHORT(){return on}static get DATE_MED(){return wr}static get DATE_MED_WITH_WEEKDAY(){return Hs}static get DATE_FULL(){return br}static get DATE_HUGE(){return Tr}static get TIME_SIMPLE(){return Sr}static get TIME_WITH_SECONDS(){return Er}static get TIME_WITH_SHORT_OFFSET(){return _r}static get TIME_WITH_LONG_OFFSET(){return Or}static get TIME_24_SIMPLE(){return xr}static get TIME_24_WITH_SECONDS(){return Ir}static get TIME_24_WITH_SHORT_OFFSET(){return kr}static get TIME_24_WITH_LONG_OFFSET(){return Ar}static get DATETIME_SHORT(){return Nr}static get DATETIME_SHORT_WITH_SECONDS(){return Dr}static get DATETIME_MED(){return Cr}static get DATETIME_MED_WITH_SECONDS(){return Mr}static get DATETIME_MED_WITH_WEEKDAY(){return zs}static get DATETIME_FULL(){return Fr}static get DATETIME_FULL_WITH_SECONDS(){return Lr}static get DATETIME_HUGE(){return Rr}static get DATETIME_HUGE_WITH_SECONDS(){return Pr}};function Qn(t){if(Ne.isDateTime(t))return t;if(t&&t.valueOf&&Ut(t.valueOf()))return Ne.fromJSDate(t);if(t&&typeof t=="object")return Ne.fromObject(t);throw new je(`Unknown datetime argument: ${t}, of type ${typeof t}`)}export{vc as a,Jf as b,Qf as c,Ne as d};
