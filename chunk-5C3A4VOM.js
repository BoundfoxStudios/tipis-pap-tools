import{b as T,c as I}from"./chunk-V6WH2VWW.js";import{a as B,b as N}from"./chunk-PGCHQ2YC.js";import{h as M,v as y}from"./chunk-PLM7H556.js";import"./chunk-ERMG2SKR.js";import"./chunk-34EE4NIK.js";import{a as b,f as F,j as w,l as D,o as R,q as A}from"./chunk-AXA5O7IY.js";import{$a as n,Fa as g,Ja as a,Oa as s,S as o,V as v,Wa as p,ab as l,bb as S,n as c,nb as d,pb as C,rb as G,u as f,vb as E}from"./chunk-BTA754KE.js";import{a as u,b as h}from"./chunk-CWTPBX7D.js";var tt=(()=>{let r=class r{constructor(){this.editModeStore=o(I),this.activatedRoute=o(M),this.characterStore=o(y),this.id=T(this.activatedRoute.paramMap.pipe(c(e=>e.get("characterId")),f(e=>!!e),c(e=>+e))),this.character=g(()=>this.characterStore.entityMap()[this.id()]),this.formBuilder=o(R),this.formGroup=this.formBuilder.group({main:this.formBuilder.group({agility:[0],magic:[0],spirit:[0],intelligence:[0],stamina:[0],strength:[0]}),value:this.formBuilder.group({life:[0],power:[0],energy:[0],precision:[0],perception:[0],magicDefense:[0],magicTolerance:[0],magicControl:[0],mana:[0],manaRegeneration:[0],reaction:[0],cover:[0],authority:[0]})}),s(()=>{let e=this.character();this.formGroup.reset({main:e.main,value:e.value})},{allowSignalWrites:!0}),s(()=>{if(this.editModeStore.isEnabled()||this.formGroup.pristine)return;let i=this.character(),t=this.formGroup.getRawValue();this.characterStore.updateStatistics(h(u({},i),{main:t.main,value:t.value}))})}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=v({type:r,selectors:[["pap-character-dashboard"]],standalone:!0,features:[E],decls:6,vars:13,consts:[[3,"formGroup"],[1,"mt-4",3,"mainAllowEdit","mainFormGroup","mainStatistics","pointsToDistribute","valueFormGroup","valueAllowEdit"]],template:function(i,t){i&1&&(n(0,"pap-h1"),d(1),n(2,"pap-secondary-h1"),d(3),l()(),n(4,"form",0),S(5,"pap-character-statistics",1),l()),i&2&&(a(),C("",t.character().name," "),a(2),G("Level ",t.character().level," - ",t.character().age,", ",t.character().gender,", ",t.character().nation," , ",t.character().religion," "),a(),p("formGroup",t.formGroup),a(),p("mainAllowEdit",t.editModeStore.isEnabled())("mainFormGroup",t.formGroup.controls.main)("mainStatistics",t.character().main)("pointsToDistribute",0)("valueFormGroup",t.formGroup.controls.value)("valueAllowEdit",t.editModeStore.isEnabled()))},dependencies:[b,B,A,w,F,D,N],changeDetection:0});let m=r;return m})();export{tt as default};
