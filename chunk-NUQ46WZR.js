import{b as V}from"./chunk-PGCHQ2YC.js";import{j as S,u as G,v as T}from"./chunk-PLM7H556.js";import"./chunk-ERMG2SKR.js";import"./chunk-34EE4NIK.js";import{a as k,c as D,d as n,e as F,f as w,j as I,k as N,l as M,o as q,p as E,q as h,r as R}from"./chunk-AXA5O7IY.js";import{$a as u,Ja as o,S as p,V as c,Va as v,Wa as r,ab as m,bb as d,fb as y,nb as s,ob as C,vb as f}from"./chunk-BTA754KE.js";import{f as b}from"./chunk-CWTPBX7D.js";var L=0,A=(()=>{let t=class t{constructor(){this.placeholder="",this.autoComplete="off",this.valueType="text",this.id=`control_${L++}`}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=c({type:t,selectors:[["pap-text-input"]],inputs:{placeholder:"placeholder",label:"label",control:"control",autoComplete:"autoComplete",valueType:"valueType",min:"min",autofocus:"autofocus"},standalone:!0,features:[f],decls:3,vars:9,consts:[[1,"mb-2","block","text-sm","font-medium",3,"for"],[1,"block","w-full","rounded-lg","border","border-gray-300","bg-gray-50","p-2.5","text-sm","focus:border-blue-500","focus:ring-blue-500","dark:border-gray-600","dark:bg-gray-700","dark:placeholder-gray-400","dark:focus:border-blue-500","dark:focus:ring-blue-500",3,"autofocus","autocomplete","formControl","min","placeholder","type"]],template:function(i,e){i&1&&(u(0,"label",0),s(1),m(),d(2,"input",1)),i&2&&(r("for",e.id),o(),C(e.label),o(),r("autofocus",e.autofocus)("autocomplete",e.autoComplete)("formControl",e.control)("min",e.min)("placeholder",e.placeholder)("type",e.valueType),v("id",e.id))},dependencies:[h,D,F,N],changeDetection:0});let a=t;return a})();function B(a,t){return g=>{let l=a.sumMainStatistics(g.value.main),i=a.sumValueStatistics(g.value.value);return l+i/3!==t?{invalidDistributedPoints:!0}:null}}var O=200,me=(()=>{let t=class t{constructor(){this.charactersService=p(G),this.charactersStore=p(T),this.formBuilder=p(q),this.formGroup=this.formBuilder.group({name:["",n.required],nation:["",n.required],gender:["",n.required],age:[0,[n.required,n.min(0)]],religion:["",n.required],group:["",n.required],main:this.formBuilder.group({agility:[0],magic:[0],spirit:[0],intelligence:[0],stamina:[0],strength:[0]}),value:this.formBuilder.group({life:[0],power:[0],energy:[0],magicDefense:[0],magicTolerance:[0],magicControl:[0],precision:[0],perception:[0],mana:[0],manaRegeneration:[0],reaction:[0],cover:[0],authority:[0]})},{validators:B(this.charactersService,O)}),this.router=p(S)}submit(){return b(this,null,function*(){if(this.formGroup.invalid)return;let l=yield this.charactersStore.add(this.formGroup.getRawValue());yield this.router.navigate(["/characters",l.id,"dashboard"])})}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=c({type:t,selectors:[["pap-create-character"]],standalone:!0,features:[f],decls:12,vars:15,consts:[[1,"space-y-4",3,"formGroup","ngSubmit"],["autoComplete","nickname","label","Name",1,"block",3,"autofocus","control"],["label","Alter","valueType","number",1,"block",3,"control","min"],["label","Geschlecht",1,"block",3,"control"],["label","Volk",1,"block",3,"control"],["label","Religion",1,"block",3,"control"],["label","Spielrunde",1,"block",3,"control"],[1,"mt-4",3,"mainAllowEdit","mainFormGroup","pointsToDistribute","valueFormGroup","valueAllowEdit"],["type","submit",1,"mt-4",3,"disabled"]],template:function(i,e){i&1&&(u(0,"pap-h1"),s(1,"Neuen Charakter erstellen"),m(),u(2,"form",0),y("ngSubmit",function(){return e.submit()}),d(3,"pap-text-input",1)(4,"pap-text-input",2)(5,"pap-text-input",3)(6,"pap-text-input",4)(7,"pap-text-input",5)(8,"pap-text-input",6)(9,"pap-character-statistics",7),u(10,"pap-button",8),s(11,"Charakter erstellen"),m()()),i&2&&(o(2),r("formGroup",e.formGroup),o(),r("autofocus",!0)("control",e.formGroup.controls.name),o(),r("control",e.formGroup.controls.age)("min",0),o(),r("control",e.formGroup.controls.gender),o(),r("control",e.formGroup.controls.nation),o(),r("control",e.formGroup.controls.religion),o(),r("control",e.formGroup.controls.group),o(),r("mainAllowEdit",!0)("mainFormGroup",e.formGroup.controls.main)("pointsToDistribute",200)("valueFormGroup",e.formGroup.controls.value)("valueAllowEdit",!0),o(),r("disabled",e.formGroup.invalid))},dependencies:[k,A,R,E,I,w,h,M,V],changeDetection:0});let a=t;return a})();export{me as default};
